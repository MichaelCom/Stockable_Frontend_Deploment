(function(Rt){var Ke={};function w(y){if(Ke[y])return Ke[y].exports;var I=Ke[y]={i:y,l:!1,exports:{}};return Rt[y].call(I.exports,I,I.exports,w),I.l=!0,I.exports}w.m=Rt,w.c=Ke,w.d=function(y,I,L){w.o(y,I)||Object.defineProperty(y,I,{enumerable:!0,get:L})},w.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},w.t=function(y,I){if(1&I&&(y=w(y)),8&I||4&I&&"object"==typeof y&&y&&y.__esModule)return y;var L=Object.create(null);if(w.r(L),Object.defineProperty(L,"default",{enumerable:!0,value:y}),2&I&&"string"!=typeof y)for(var le in y)w.d(L,le,function(me){return y[me]}.bind(null,le));return L},w.n=function(y){var I=y&&y.__esModule?function(){return y.default}:function(){return y};return w.d(I,"a",I),I},w.o=function(y,I){return Object.prototype.hasOwnProperty.call(y,I)},w.p="/",w(w.s=17)})({17:function(Rt,Ke,w){Rt.exports=w("I9Yi")},I9Yi:function(Rt,Ke){window.payfast_session_storage=window.sessionStorage,window.payfast_do_onsite_payment=function(I){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;payfast_session_storage.setItem("payfast_payment",!0),window.addEventListener("beforeunload",w,!1),window.addEventListener("unload",y,{capture:!0});var le=document.getElementsByTagName("head")[0],me=document.getElementsByTagName("body")[0],H=document.createElement("link"),q="sandbox.payfast.co.za";H.id="payfast_compact_engine_css",H.rel="stylesheet",H.type="text/css",H.href="https://"+q+"/onsite/engine.css",H.media="all",le.appendChild(H);var te=document.createElement("div");te.id="payfast_div_container",te.setAttribute("class","payfast_compact_payment_modal"),me.appendChild(te);var V=document.createElement("iframe");V.setAttribute("id","payfast_compact_engine_iframe"),V.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-pointer-lock allow-modals allow-popups"),V.allowTransparency=!0,V.src="https://"+q+"/eng/process/payment/"+I.uuid,V.frameBorder=0,V.width="100%",V.height="100%",V.style.backgroundColor="transparent",te.appendChild(V),te.style.display="block",window.payfast_do_finish_callback="function"==typeof L?L:function(Te){!0===Te?void 0!==I.return_url&&""!==I.return_url&&window.location.replace(I.return_url):void 0!==I.cancel_url&&""!==I.cancel_url&&window.location.replace(I.cancel_url)},window.addEventListener("message",payfast_close_payment_popup,!1)},window.payfast_do_onsite_card_update=function(I){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;payfast_session_storage.setItem("payfast_payment",!0),window.addEventListener("beforeunload",w,!1),window.addEventListener("unload",y,{capture:!0});var le=document.getElementsByTagName("head")[0],me=document.getElementsByTagName("body")[0],H=document.createElement("link"),q="sandbox.payfast.co.za";H.id="payfast_compact_engine_css",H.rel="stylesheet",H.type="text/css",H.href="https://"+q+"/onsite/engine.css",H.media="all",le.appendChild(H);var te=document.createElement("div");te.id="payfast_div_container",te.setAttribute("class","payfast_compact_payment_modal"),me.appendChild(te);var V=document.createElement("iframe");V.setAttribute("id","payfast_compact_engine_iframe"),V.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-pointer-lock allow-modals allow-popups"),V.allowTransparency=!0,V.src="https://"+q+"/onsite/recurring/update/"+I,V.frameBorder=0,V.width="100%",V.height="100%",V.style.backgroundColor="transparent",te.appendChild(V),te.style.display="block",window.payfast_do_finish_callback="function"==typeof L?L:function(Te){!0===Te&&"string"==typeof L&&""!==L&&window.location.replace(L)},window.addEventListener("message",payfast_close_payment_popup,!1)},window.payfast_close_payment_popup=function(I){"https://sandbox.payfast.co.za"===I.origin&&"payfast_close_payment_popup"===I.data.requestFunction&&(payfast_session_storage.getItem("payfast_payment")&&payfast_session_storage.removeItem("payfast_payment"),document.getElementById("payfast_div_container").remove(),document.getElementById("payfast_compact_engine_css").remove(),window.removeEventListener("message",payfast_close_payment_popup,!1),window.removeEventListener("beforeunload",w,!1),window.removeEventListener("unload",y,!1),payfast_do_finish_callback(I.data.requestData))};var w=function(I){if(payfast_session_storage.getItem("payfast_payment"))return I.preventDefault(),I.returnValue="Are you sure you want to exit the payment process?"},y=function I(){payfast_session_storage.removeItem("payfast_payment"),window.removeEventListener("message",payfast_close_payment_popup,!1),window.removeEventListener("beforeunload",w,!1),window.removeEventListener("unload",I,!1)}}}),(()=>{"use strict";var Rt={844:(y,I,L)=>{L.d(I,{Rf:()=>H,DM:()=>q,en:()=>te,jH:()=>V,Cf:()=>Te,Db:()=>re,EG:()=>Re,l4:()=>D,JY:()=>ft});var le=L(422),me={};function H(){return(0,le.KV)()?L.g:typeof window<"u"?window:typeof self<"u"?self:me}function q(){var v=H(),T=v.crypto||v.msCrypto;if(void 0!==T&&T.getRandomValues){var C=new Uint16Array(8);T.getRandomValues(C),C[3]=4095&C[3]|16384,C[4]=16383&C[4]|32768;var W=function(A){for(var ne=A.toString(16);ne.length<4;)ne="0"+ne;return ne};return W(C[0])+W(C[1])+W(C[2])+W(C[3])+W(C[4])+W(C[5])+W(C[6])+W(C[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(A){var ne=16*Math.random()|0;return("x"===A?ne:3&ne|8).toString(16)})}function te(v){if(!v)return{};var T=v.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);return T?{host:T[4],path:T[5],protocol:T[2],relative:T[5]+(T[6]||"")+(T[8]||"")}:{}}function V(v){if(v.message)return v.message;if(v.exception&&v.exception.values&&v.exception.values[0]){var T=v.exception.values[0];return T.type&&T.value?T.type+": "+T.value:T.type||T.value||v.event_id||"<unknown>"}return v.event_id||"<unknown>"}function Te(v){var T=H();if(!("console"in T))return v();var C=T.console,W={};["debug","info","warn","error","log","assert"].forEach(function(ne){ne in T.console&&C[ne].__sentry_original__&&(W[ne]=C[ne],C[ne]=C[ne].__sentry_original__)});var A=v();return Object.keys(W).forEach(function(ne){C[ne]=W[ne]}),A}function re(v,T,C){v.exception=v.exception||{},v.exception.values=v.exception.values||[],v.exception.values[0]=v.exception.values[0]||{},v.exception.values[0].value=v.exception.values[0].value||T||"",v.exception.values[0].type=v.exception.values[0].type||C||"Error"}function Re(v,T){void 0===T&&(T={});try{v.exception.values[0].mechanism=v.exception.values[0].mechanism||{},Object.keys(T).forEach(function(C){v.exception.values[0].mechanism[C]=T[C]})}catch{}}function D(){var v=H();try{return v.document.location.href}catch{return""}}function ft(v,T){if(!T)return 6e4;var C=parseInt(""+T,10);if(!isNaN(C))return 1e3*C;var W=Date.parse(""+T);return isNaN(W)?6e4:W-v}},422:(y,I,L)=>{function le(){return"[object process]"===Object.prototype.toString.call(typeof process<"u"?process:0)}function me(H,q){return H.require(q)}L.d(I,{KV:()=>le,l$:()=>me}),y=L.hmd(y)},170:(y,I,L)=>{L.d(I,{yW:()=>V,ph:()=>Te});var le=L(844),me=L(422);y=L.hmd(y);var H={nowSeconds:function(){return Date.now()/1e3}},q=(0,me.KV)()?function(){try{return(0,me.l$)(y,"perf_hooks").performance}catch{return}}():function(){var re=(0,le.Rf)().performance;if(re&&re.now)return{now:function(){return re.now()},timeOrigin:Date.now()-re.now()}}(),te=void 0===q?H:{nowSeconds:function(){return(q.timeOrigin+q.now())/1e3}},V=H.nowSeconds.bind(H),Te=te.nowSeconds.bind(te);!function(){var re=(0,le.Rf)().performance;if(re&&re.now){var D=re.now(),ft=Date.now(),C=(re.timeOrigin&&Math.abs(re.timeOrigin+D-ft),re.timing&&re.timing.navigationStart);"number"==typeof C&&Math.abs(C+D-ft)}}()}},Ke={};function w(y){var I=Ke[y];if(void 0!==I)return I.exports;var L=Ke[y]={id:y,loaded:!1,exports:{}};return Rt[y](L,L.exports,w),L.loaded=!0,L.exports}w.d=(y,I)=>{for(var L in I)w.o(I,L)&&!w.o(y,L)&&Object.defineProperty(y,L,{enumerable:!0,get:I[L]})},w.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),w.hmd=y=>((y=Object.create(y)).children||(y.children=[]),Object.defineProperty(y,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+y.id)}}),y),w.o=(y,I)=>Object.prototype.hasOwnProperty.call(y,I),w.r=y=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},(()=>{var y={};w.r(y),w.d(y,{FunctionToString:()=>jo,InboundFilters:()=>ta});var I={};w.r(I),w.d(I,{Breadcrumbs:()=>pa,Dedupe:()=>Tu,GlobalHandlers:()=>Iu,LinkedErrors:()=>Ou,TryCatch:()=>Su,UserAgent:()=>Pu});var L=/android/i;function le(){var t,e=null===(t=navigator)||void 0===t?void 0:t.userAgent;return!!e&&Boolean((/Safari/.test(e)&&(/iPhone/.test(e)||/iPad/.test(e))&&!/Trident/.test(e)||/AppleWebKit/.test(e)&&!(/Android/.test(e)||/Linux/.test(e)||/Trident/.test(e))&&(/Mobile/.test(e)||/iPhone/.test(e)||/iPad/.test(e))&&!/Macintosh/.test(e)&&!/Windows/.test(e))&&!(/Chrome/.test(e)||/CriOS/.test(e)||/Edg/.test(e)))}function me(){var t,e=null===(t=navigator)||void 0===t?void 0:t.userAgent;return!!e&&Boolean((/Safari/.test(e)||/AppleWebKit/.test(e))&&(/Macintosh/.test(e)||/Windows/.test(e))&&!/iPhone/.test(e)&&!/iPad/.test(e)&&!/Chrome/.test(e)&&!/Edg/.test(e)&&!/Firefox/.test(e))}var H,q,te,V,Te,re,Re,D,ft,t,v={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(t,e){var n=new URL(t),r={};return e.forEach(i=>{var o=n.searchParams.get(i);o&&(r[i]=o)}),r},isAndroid:function(){return L.test(window.navigator.userAgent)},isDesktopSafari:me,isMobileSafari:le,isSafari:function(){return le()||me()},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},redirectTo:function(t){window.location.href=t},replaceWindowState:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;window.history.replaceState(null,e,t)},submitForm:function(t){t.submit()},get windowHash(){return window.location.hash},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return window.navigator.sendBeacon},get windowNavigationLanguage(){var t=window.navigator.language;return!t&&window.navigator.languages.length>0&&(t=window.navigator.languages[0]),t},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};function T(t){return r=new Blob([t],{type:ft.JAVASCRIPT}),URL.createObjectURL(r);var r}(t=H||(H={})).Final="FINAL",t.Estimated="ESTIMATED",t.Unknown="NOT_CURRENTLY_KNOWN",function(t){t.INITIALIZE="INITIALIZE",t.PAYMENT_AUTHORIZATION="PAYMENT_AUTHORIZATION",t.SHIPPING_ADDRESS="SHIPPING_ADDRESS",t.SHIPPING_OPTION="SHIPPING_OPTION"}(q||(q={})),function(t){t.FULL="FULL",t.MIN="MIN"}(te||(te={})),function(t){t.CARD="CARD"}(V||(V={})),function(t){t.PAYMENT_GATEWAY="PAYMENT_GATEWAY"}(Te||(Te={})),function(t){t.SUCCESS="SUCCESS"}(re||(re={})),function(t){t.TEST="TEST",t.PRODUCTION="PRODUCTION"}(Re||(Re={})),function(t){t.development="development",t.sandbox="sandbox",t.production="production",t.staging="staging",t.test="test"}(D||(D={})),function(t){t.JAVASCRIPT="text/javascript",t.HTML="text/html"}(ft||(ft={}));var C="sandbox",A={get AFTERPAY_SCRIPT_URL(){switch(C){case D.test:return T("window.AfterPay = {};");case D.production:return"https://portal.afterpay.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID);default:return"https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID)}},get AFTERPAY_MESSAGING_SCRIPT_URL(){return C===D.test?T("window.Afterpay = {};"):"https://js.afterpay.com/afterpay-1.x.js"},get AFTERPAY_CREATE_CHECKOUT(){return"".concat(this.API_URL,"/bnpl/afterpay/create-checkout")},get AFTERPAY_MERCHANT_ID(){return"b8a38183b2e5959390488e48f9b109f6a73fd53c"},get AFTERPAY_STYLES(){return"".concat(this.ASSET_URL,"/afterpay.css")},get ALIPAY_PAY_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/alipay/pay")},get ANALYTICS_PUBLIC_ENDPOINT(){return C===D.test?T("window.Square.Analytics = {};"):"".concat(this.API_PROTOCOL,"js.").concat(this.API_PUBLIC_HOST,"/payments/data.js")},get API_HOST(){switch(C){case D.production:return"pci-connect.squareup.com";case D.sandbox:return"pci-connect.squareupsandbox.com";default:return"pci-connect.squareupstaging.com"}},get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(C){case D.production:return"squareup.com";case D.sandbox:return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.API_HOST)},get APPENDED_FILE_NAME(){return""},get APPLEPAY_VALIDATE_MERCHANT_ENDPOINT(){return"".concat(this.API_URL,"/v2/apple-pay/validate-merchant")},get ASSET_BASE_URL(){return function(t){switch(t){case D.production:return"https://web.squarecdn.com";case D.sandbox:return"https://sandbox.web.squarecdn.com";case D.development:return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(D[C])},get ASSET_URL(){return"local"===this.VERSION?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CASH_APP_API(){return C===D.production?"https://api.cash.app":"https://api.cashstaging.app"},get CASH_APP_API_CUSTOMER(){return"".concat(this.CASH_APP_API,"/customer")},get CASH_APP_AUTH_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/cash-app/auth")},get CASH_APP_PAY_CLIENT_ID(){switch(C){case D.production:return"CA-CI_SQ_SELLER";case D.staging:return"CAS-CI_SQ_SELLER_STAGING";default:return"CAS-CI_SQ_SELLER_SANDBOX"}},get CASH_APP_STYLES(){return"".concat(this.ASSET_URL,"/cash.css")},get CASH_APP_PAY_SCRIPT_URL(){switch(C){case D.production:return"https://kit.cash.app/v1/pay.js";case D.test:return T("window.CashApp = {};");default:return"https://sandbox.kit.cash.app/v1/pay.js"}},get CREATE_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/link-session")},get PLAID_OAUTH_REDIRECT_URI(){return""},get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/oauth-link-session")},get ENABLE_ERROR_LOGGING(){return C!==D.development},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},get GIFT_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/gift-card-element-iframe").concat("",".html")},get GOOGLE_PAY_ENV(){return C===D.production?Re.PRODUCTION:Re.TEST},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get GOOGLE_PAY_MERCHANT_ID(){return"05498866192997955200"},get GOOGLE_PAY_SCRIPT_URL(){return C===D.test?T("window.google = {};"):"https://pay.google.com/gp/p/js/pay.js"},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},get IFRAME_SRC(){return"".concat(this.ASSET_URL,"/main-iframe").concat("",".html")},get INSTANT_WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/instant-wallet-nonce")},get MASTERPASS_CALLBACK_ENDPOINT(){return"".concat(this.API_URL,"/v2/masterpass/callback")},get MASTERPASS_LIBRARY_URL(){return"".concat(this.API_URL,"/v2/masterpass/frame")},get METRICS_ERROR_URL(){return"".concat(this.API_URL,"/payments/mtx/error")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get PAYMENTS_UI_STYLES(){return C===D.test?T(""):"".concat(this.ASSET_URL,"/payments-ui.css")},get PLAID_LINK_ENV(){return C===D.production?"production":"sandbox"},get PLAID_LINK_SCRIPT_URL(){return C===D.test?T("window.Plaid = {};"):"https://cdn.plaid.com/link/v2/stable/link-initialize.js"},get SENTRY_DSN(){switch(C){case D.test:case D.development:return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832"}},get SINGLE_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/single-card-element-iframe").concat("",".html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},STATIC_ASSET(t){return"".concat(this.ASSET_URL,"/static-assets/").concat(t)},get VERSION(){return"1.32.0"},get WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/wallet-nonce")},env:C},ne=function(t,e){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(t,e)};function Wn(t,e){function n(){this.constructor=t}ne(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ho,G=function(){return G=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},G.apply(this,arguments)};function Fo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qn(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function wt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qn(arguments[e]));return t}var jo=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Ho=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Ho.apply(this.__sentry_original__||this,e)}},t.id="FunctionToString",t}(),ue=function(){return ue=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ue.apply(this,arguments)};function Zc(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Fe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Zc(arguments[e]));return t}var S=function(){return S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},S.apply(this,arguments)};function Xc(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Kt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Xc(arguments[e]));return t}function Bo(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return gt(t,Error)}}function qo(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function Go(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function Wt(t){return"[object String]"===Object.prototype.toString.call(t)}function Jn(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function Qt(t){return"[object Object]"===Object.prototype.toString.call(t)}function Kr(t){return typeof Event<"u"&&gt(t,Event)}function Vo(t){return typeof Element<"u"&&gt(t,Element)}function Wr(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function gt(t,e){try{return t instanceof e}catch{return!1}}var We,Jt=w(170);!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(We||(We={}));var Qe,Yo,ve=function(){function t(e){var n=this;this._state=We.PENDING,this._handlers=[],this._resolve=function(r){n._setResult(We.RESOLVED,r)},this._reject=function(r){n._setResult(We.REJECTED,r)},this._setResult=function(r,i){n._state===We.PENDING&&(Wr(i)?i.then(n._resolve,n._reject):(n._state=r,n._value=i,n._executeHandlers()))},this._attachHandler=function(r){n._handlers=n._handlers.concat(r),n._executeHandlers()},this._executeHandlers=function(){if(n._state!==We.PENDING){var r=n._handlers.slice();n._handlers=[],r.forEach(function(i){i.done||(n._state===We.RESOLVED&&i.onfulfilled&&i.onfulfilled(n._value),n._state===We.REJECTED&&i.onrejected&&i.onrejected(n._value),i.done=!0)})}};try{e(this._resolve,this._reject)}catch(r){this._reject(r)}}return t.resolve=function(e){return new t(function(n){n(e)})},t.reject=function(e){return new t(function(n,r){r(e)})},t.all=function(e){return new t(function(n,r){if(Array.isArray(e))if(0!==e.length){var i=e.length,o=[];e.forEach(function(a,s){t.resolve(a).then(function(c){o[s]=c,0==(i-=1)&&n(o)}).then(null,r)})}else n([]);else r(new TypeError("Promise.all requires an array as input."))})},t.prototype.then=function(e,n){var r=this;return new t(function(i,o){r._attachHandler({done:!1,onfulfilled:function(a){if(e)try{return void i(e(a))}catch(s){return void o(s)}else i(a)},onrejected:function(a){if(n)try{return void i(n(a))}catch(s){return void o(s)}else o(a)}})})},t.prototype.catch=function(e){return this.then(function(n){return n},e)},t.prototype.finally=function(e){var n=this;return new t(function(r,i){var o,a;return n.then(function(s){a=!1,o=s,e&&e()},function(s){a=!0,o=s,e&&e()}).then(function(){a?i(o):r(o)})})},t.prototype.toString=function(){return"[object SyncPromise]"},t}(),O=w(844),Zn=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=Kt(e._breadcrumbs),n._tags=S({},e._tags),n._extra=S({},e._extra),n._contexts=S({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=Kt(e._eventProcessors),n._requestSession=e._requestSession),n},t.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},t.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},t.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(e){return this._requestSession=e,this},t.prototype.setTags=function(e){return this._tags=S(S({},this._tags),e),this._notifyScopeListeners(),this},t.prototype.setTag=function(e,n){var r;return this._tags=S(S({},this._tags),((r={})[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(e){return this._extra=S(S({},this._extra),e),this._notifyScopeListeners(),this},t.prototype.setExtra=function(e,n){var r;return this._extra=S(S({},this._extra),((r={})[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},t.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(e){return this.setTransactionName(e)},t.prototype.setContext=function(e,n){var r;return null===n?delete this._contexts[e]:this._contexts=S(S({},this._contexts),((r={})[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var e,n,r,i,o=this.getSpan();return null!==(e=o)&&void 0!==e&&e.transaction?null===(n=o)||void 0===n?void 0:n.transaction:null!==(i=null===(r=o)||void 0===r?void 0:r.spanRecorder)&&void 0!==i&&i.spans[0]?o.spanRecorder.spans[0]:void 0},t.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=S(S({},this._tags),e._tags),this._extra=S(S({},this._extra),e._extra),this._contexts=S(S({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):Qt(e)&&(this._tags=S(S({},this._tags),e.tags),this._extra=S(S({},this._extra),e.extra),this._contexts=S(S({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(e,n){var r="number"==typeof n?Math.min(n,100):100;if(r<=0)return this;var i=S({timestamp:(0,Jt.yW)()},e);return this._breadcrumbs=Kt(this._breadcrumbs,[i]).slice(-r),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(e,n){var r;if(this._extra&&Object.keys(this._extra).length&&(e.extra=S(S({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=S(S({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=S(S({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=S(S({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=S({trace:this._span.getTraceContext()},e.contexts);var i=null===(r=this._span.transaction)||void 0===r?void 0:r.name;i&&(e.tags=S({transaction:i},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=Kt(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(Kt(zo(),this._eventProcessors),e,n)},t.prototype._notifyEventProcessors=function(e,n,r,i){var o=this;return void 0===i&&(i=0),new ve(function(a,s){var c=e[i];if(null===n||"function"!=typeof c)a(n);else{var u=c(S({},n),r);Wr(u)?u.then(function(l){return o._notifyEventProcessors(e,l,r,i+1).then(a)}).then(null,s):o._notifyEventProcessors(e,u,r,i+1).then(a).then(null,s)}})},t.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(n){n(e)}),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},t}();function zo(){var t=(0,O.Rf)();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function Xn(t){zo().push(t)}(function(t){t.Ok="ok",t.Exited="exited",t.Crashed="crashed",t.Abnormal="abnormal"})(Qe||(Qe={})),function(t){t.Ok="ok",t.Errored="errored",t.Crashed="crashed"}(Yo||(Yo={}));var Nt=(0,O.Rf)(),Qr="Sentry Logger ",$c=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&(0,O.Cf)(function(){Nt.console.log(Qr+"[Log]: "+e.join(" "))})},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&(0,O.Cf)(function(){Nt.console.warn(Qr+"[Warn]: "+e.join(" "))})},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&(0,O.Cf)(function(){Nt.console.error(Qr+"[Error]: "+e.join(" "))})},t}();Nt.__SENTRY__=Nt.__SENTRY__||{};var F=Nt.__SENTRY__.logger||(Nt.__SENTRY__.logger=new $c),eu=w(422),Jr=function(t,e){return(Jr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(t,e)},bt=function(){return bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bt.apply(this,arguments)};function Ko(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $n(t,e){try{for(var n=t,r=[],i=0,o=0,s=void 0;n&&i++<5&&!("html"===(s=tu(n,e))||i>1&&o+3*r.length+s.length>=80);)r.push(s),o+=s.length,n=n.parentNode;return r.reverse().join(" > ")}catch{return"<unknown>"}}function tu(t,e){var n,r,i,o,a,s,c,u=t,l=[];if(!u||!u.tagName)return"";l.push(u.tagName.toLowerCase());var d=null!==(n=e)&&void 0!==n&&n.length?e.filter(function(h){return u.getAttribute(h)}).map(function(h){return[h,u.getAttribute(h)]}):null;if(null!==(r=d)&&void 0!==r&&r.length)d.forEach(function(h){l.push("["+h[0]+'="'+h[1]+'"]')});else if(u.id&&l.push("#"+u.id),(i=u.className)&&Wt(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)l.push("."+o[c]);var p=["type","name","title","alt"];for(c=0;c<p.length;c++)(s=u.getAttribute(a=p[c]))&&l.push("["+a+'="'+s+'"]');return l.join("")}var nu=function(){function t(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var n=0;n<this._inner.length;n++)if(this._inner[n]===e)return!0;return this._inner.push(e),!1},t.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var n=0;n<this._inner.length;n++)if(this._inner[n]===e){this._inner.splice(n,1);break}},t}(),Wo="<anonymous>";function yt(t){try{return t&&"function"==typeof t&&t.name||Wo}catch{return Wo}}function vn(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function Qo(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var i=t[r];try{n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Zr(t,e){return!!Wt(t)&&("[object RegExp]"===Object.prototype.toString.call(e)?e.test(t):"string"==typeof e&&-1!==t.indexOf(e))}function de(t,e,n){if(e in t){var r=t[e],i=n(r);if("function"==typeof i)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch{}t[e]=i}}function Jo(t){if(Bo(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}if(Kr(t)){var i=t,o={};o.type=i.type;try{o.target=Vo(i.target)?$n(i.target):Object.prototype.toString.call(i.target)}catch{o.target="<unknown>"}try{o.currentTarget=Vo(i.currentTarget)?$n(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch{o.currentTarget="<unknown>"}for(var a in typeof CustomEvent<"u"&&gt(t,CustomEvent)&&(o.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=i[a]);return o}return t}function Zo(t,e,n){void 0===e&&(e=3),void 0===n&&(n=102400);var o,i=Zt(t,e);return o=JSON.stringify(i),~-encodeURI(o).split(/%..|./).length>n?Zo(t,e-1,n):i}function Xo(t,e){return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":void 0!==w.g&&t===w.g?"[Global]":typeof window<"u"&&t===window?"[Window]":typeof document<"u"&&t===document?"[Document]":Qt(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+yt(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t;var n}function $o(t,e,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new nu),0===n)return function(c){var u=Object.prototype.toString.call(c);if("string"==typeof c)return c;if("[object Object]"===u)return"[Object]";if("[object Array]"===u)return"[Array]";var l=Xo(c);return Jn(l)?l:u}(e);if(null!=e&&"function"==typeof e.toJSON)return e.toJSON();var i=Xo(e,t);if(Jn(i))return i;var o=Jo(e),a=Array.isArray(e)?[]:{};if(r.memoize(e))return"[Circular ~]";for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=$o(s,o[s],n-1,r));return r.unmemoize(e),a}function Zt(t,e){try{return JSON.parse(JSON.stringify(t,function(n,r){return $o(n,r,e)}))}catch{return"**non-serializable**"}}function ru(t,e){void 0===e&&(e=40);var n=Object.keys(Jo(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return vn(n[0],e);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length?i:vn(i,e)}return""}function er(t){var e,n;if(Qt(t)){var r=t,i={};try{for(var o=Ko(Object.keys(r)),a=o.next();!a.done;a=o.next()){var s=a.value;void 0!==r[s]&&(i[s]=er(r[s]))}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}return Array.isArray(t)?t.map(er):t}var iu=function(){function t(e){this.errors=0,this.sid=(0,O.DM)(),this.duration=0,this.status=Qe.Ok,this.init=!0,this.ignoreDuration=!1;var n=(0,Jt.ph)();this.timestamp=n,this.started=n,e&&this.update(e)}return t.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||(0,Jt.ph)(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:(0,O.DM)()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var n=this.timestamp-this.started;this.duration=n>=0?n:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},t.prototype.close=function(e){e?this.update({status:e}):this.status===Qe.Ok?this.update({status:Qe.Exited}):this.update()},t.prototype.toJSON=function(){return er({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:er({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}(),tr=function(){function t(e,n,r){void 0===n&&(n=new Zn),void 0===r&&(r=4),this._version=r,this._stack=[{}],this.getStackTop().scope=n,e&&this.bindClient(e)}return t.prototype.isOlderThan=function(e){return this._version<e},t.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},t.prototype.pushScope=function(){var e=Zn.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},t.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},t.prototype.withScope=function(e){var n=this.pushScope();try{e(n)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(e,n){var r=this._lastEventId=(0,O.DM)(),i=n;if(!n){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(a){o=a}i={originalException:e,syntheticException:o}}return this._invokeClient("captureException",e,S(S({},i),{event_id:r})),r},t.prototype.captureMessage=function(e,n,r){var i=this._lastEventId=(0,O.DM)(),o=r;if(!r){var a=void 0;try{throw new Error(e)}catch(s){a=s}o={originalException:e,syntheticException:a}}return this._invokeClient("captureMessage",e,n,S(S({},o),{event_id:i})),i},t.prototype.captureEvent=function(e,n){var r=(0,O.DM)();return"transaction"!==e.type&&(this._lastEventId=r),this._invokeClient("captureEvent",e,S(S({},n),{event_id:r})),r},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(e,n){var r=this.getStackTop(),i=r.scope,o=r.client;if(i&&o){var a=o.getOptions&&o.getOptions()||{},s=a.beforeBreadcrumb,c=void 0===s?null:s,u=a.maxBreadcrumbs,l=void 0===u?100:u;if(!(l<=0)){var d=(0,Jt.yW)(),p=S({timestamp:d},e),h=c?(0,O.Cf)(function(){return c(p,n)}):p;null!==h&&i.addBreadcrumb(h,l)}}},t.prototype.setUser=function(e){var n=this.getScope();n&&n.setUser(e)},t.prototype.setTags=function(e){var n=this.getScope();n&&n.setTags(e)},t.prototype.setExtras=function(e){var n=this.getScope();n&&n.setExtras(e)},t.prototype.setTag=function(e,n){var r=this.getScope();r&&r.setTag(e,n)},t.prototype.setExtra=function(e,n){var r=this.getScope();r&&r.setExtra(e,n)},t.prototype.setContext=function(e,n){var r=this.getScope();r&&r.setContext(e,n)},t.prototype.configureScope=function(e){var n=this.getStackTop(),r=n.scope;r&&n.client&&e(r)},t.prototype.run=function(e){var n=Xr(this);try{e(this)}finally{Xr(n)}},t.prototype.getIntegration=function(e){var n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return F.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},t.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},t.prototype.startTransaction=function(e,n){return this._callExtensionMethod("startTransaction",e,n)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var e,n,r,i,o;null===(r=null===(n=null===(e=this.getStackTop())||void 0===e?void 0:e.scope)||void 0===n?void 0:n.getSession())||void 0===r||r.close(),this._sendSessionUpdate(),null===(o=null===(i=this.getStackTop())||void 0===i?void 0:i.scope)||void 0===o||o.setSession()},t.prototype.startSession=function(e){var n=this.getStackTop(),r=n.scope,i=n.client,o=i&&i.getOptions()||{},a=o.release,s=o.environment,c=((0,O.Rf)().navigator||{}).userAgent,u=new iu(S(S(S({release:a,environment:s},r&&{user:r.getUser()}),c&&{userAgent:c}),e));if(r){var l=r.getSession&&r.getSession();l&&l.status===Qe.Ok&&l.update({status:Qe.Exited}),this.endSession(),r.setSession(u)}return u},t.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),n=e.scope,r=e.client;if(n){var i=n.getSession&&n.getSession();i&&r&&r.captureSession&&r.captureSession(i)}},t.prototype._invokeClient=function(e){for(var n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=this.getStackTop(),s=o.client;s&&s[e]&&(n=s)[e].apply(n,Kt(r,[o.scope]))},t.prototype._callExtensionMethod=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=nr().__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[e])return o.extensions[e].apply(this,n);F.warn("Extension method "+e+" couldn't be found, doing nothing.")},t}();function nr(){var t=(0,O.Rf)();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function Xr(t){var e=nr(),n=vt(e);return $r(e,t),n}function Ee(){var t=nr();return ea(t)&&!vt(t).isOlderThan(4)||$r(t,new tr),(0,eu.KV)()?function(e){var n,r,i;try{var o=null===(i=null===(r=null===(n=nr().__SENTRY__)||void 0===n?void 0:n.extensions)||void 0===r?void 0:r.domain)||void 0===i?void 0:i.active;if(!o)return vt(e);if(!ea(o)||vt(o).isOlderThan(4)){var a=vt(e).getStackTop();$r(o,new tr(a.client,Zn.clone(a.scope)))}return vt(o)}catch{return vt(e)}}(t):vt(t)}function ea(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function vt(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new tr),t.__SENTRY__.hub}function $r(t,e){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}var je,ou=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],ta=function(){function t(e){void 0===e&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){Xn(function(e){var n=Ee();if(!n)return e;var r=n.getIntegration(t);if(r){var i=n.getClient(),o=i?i.getOptions():{},a="function"==typeof r._mergeOptions?r._mergeOptions(o):{};return"function"!=typeof r._shouldDropEvent?e:r._shouldDropEvent(e,a)?null:e}return e})},t.prototype._shouldDropEvent=function(e,n){return this._isSentryError(e,n)?(F.warn("Event dropped due to being internal Sentry Error.\nEvent: "+(0,O.jH)(e)),!0):this._isIgnoredError(e,n)?(F.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+(0,O.jH)(e)),!0):this._isDeniedUrl(e,n)?(F.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+(0,O.jH)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,n)&&(F.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+(0,O.jH)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},t.prototype._isSentryError=function(e,n){if(!n.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch{return!1}},t.prototype._isIgnoredError=function(e,n){return!(!n.ignoreErrors||!n.ignoreErrors.length)&&this._getPossibleEventMessages(e).some(function(r){return n.ignoreErrors.some(function(i){return Zr(r,i)})})},t.prototype._isDeniedUrl=function(e,n){if(!n.denyUrls||!n.denyUrls.length)return!1;var r=this._getEventFilterUrl(e);return!!r&&n.denyUrls.some(function(i){return Zr(r,i)})},t.prototype._isAllowedUrl=function(e,n){if(!n.allowUrls||!n.allowUrls.length)return!0;var r=this._getEventFilterUrl(e);return!r||n.allowUrls.some(function(i){return Zr(r,i)})},t.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:Fe(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:Fe(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:Fe(this._options.ignoreErrors||[],e.ignoreErrors||[],ou),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},t.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var n=e.exception.values&&e.exception.values[0]||{},r=n.type,o=n.value,a=void 0===o?"":o;return[""+a,(void 0===r?"":r)+": "+a]}catch{return F.error("Cannot extract message for event "+(0,O.jH)(e)),[]}return[]},t.prototype._getLastValidUrl=function(e){var n,r;void 0===e&&(e=[]);for(var i=e.length-1;i>=0;i--){var o=e[i];if("<anonymous>"!==(null===(n=o)||void 0===n?void 0:n.filename)&&"[native code]"!==(null===(r=o)||void 0===r?void 0:r.filename))return o.filename||null}return null},t.prototype._getEventFilterUrl=function(e){try{return e.stacktrace?this._getLastValidUrl(e.stacktrace.frames):e.exception?this._getLastValidUrl(e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames):null}catch{return F.error("Cannot extract url for event "+(0,O.jH)(e)),null}},t.id="InboundFilters",t}();function rr(){if(!("fetch"in(0,O.Rf)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch{return!1}}function ei(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function au(){if(!rr())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}(function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"})(je||(je={})),function(t){t.fromString=function(e){switch(e){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;default:return t.Log}}}(je||(je={}));var ir,or,ti,Z=(0,O.Rf)(),En={},na={};function Lt(t){t&&"string"==typeof t.type&&"function"==typeof t.callback&&(En[t.type]=En[t.type]||[],En[t.type].push(t.callback),function(e){if(!na[e])switch(na[e]=!0,e){case"console":"console"in Z&&["debug","info","warn","error","log","assert"].forEach(function(n){n in Z.console&&de(Z.console,n,function(r){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];we("console",{args:i,level:n}),r&&Function.prototype.apply.call(r,Z.console,i)}})});break;case"dom":!function(){if("document"in Z){var n=we.bind(null,"dom"),r=ra(n,!0);Z.document.addEventListener("click",r,!1),Z.document.addEventListener("keypress",r,!1),["EventTarget","Node"].forEach(function(i){var o=Z[i]&&Z[i].prototype;o&&o.hasOwnProperty&&o.hasOwnProperty("addEventListener")&&(de(o,"addEventListener",function(a){return function(s,c,u){if("click"===s||"keypress"==s)try{var l=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=l[s]=l[s]||{refCount:0};if(!d.handler){var p=ra(n);d.handler=p,a.call(this,s,p,u)}d.refCount+=1}catch{}return a.call(this,s,c,u)}}),de(o,"removeEventListener",function(a){return function(s,c,u){if("click"===s||"keypress"==s)try{var l=this.__sentry_instrumentation_handlers__||{},d=l[s];d&&(d.refCount-=1,d.refCount<=0&&(a.call(this,s,d.handler,u),d.handler=void 0,delete l[s]),0===Object.keys(l).length&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,s,c,u)}}))})}}();break;case"xhr":!function(){if("XMLHttpRequest"in Z){var n=[],r=[],i=XMLHttpRequest.prototype;de(i,"open",function(o){return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=this,u=a[1];c.__sentry_xhr__={method:Wt(a[0])?a[0].toUpperCase():a[0],url:a[1]},Wt(u)&&"POST"===c.__sentry_xhr__.method&&u.match(/sentry_key/)&&(c.__sentry_own_request__=!0);var l=function(){if(4===c.readyState){try{c.__sentry_xhr__&&(c.__sentry_xhr__.status_code=c.status)}catch{}try{var d=n.indexOf(c);if(-1!==d){n.splice(d);var p=r.splice(d)[0];c.__sentry_xhr__&&void 0!==p[0]&&(c.__sentry_xhr__.body=p[0])}}catch{}we("xhr",{args:a,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:c})}};return"onreadystatechange"in c&&"function"==typeof c.onreadystatechange?de(c,"onreadystatechange",function(d){return function(){for(var p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];return l(),d.apply(c,p)}}):c.addEventListener("readystatechange",l),o.apply(c,a)}}),de(i,"send",function(o){return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.push(this),r.push(a),we("xhr",{args:a,startTimestamp:Date.now(),xhr:this}),o.apply(this,a)}})}}();break;case"fetch":(function(){if(!rr())return!1;var n=(0,O.Rf)();if(ei(n.fetch))return!0;var r=!1,i=n.document;if(i&&"function"==typeof i.createElement)try{var o=i.createElement("iframe");o.hidden=!0,i.head.appendChild(o),o.contentWindow&&o.contentWindow.fetch&&(r=ei(o.contentWindow.fetch)),i.head.removeChild(o)}catch(a){F.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",a)}return r})()&&de(Z,"fetch",function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o={args:r,fetchData:{method:su(r),url:cu(r)},startTimestamp:Date.now()};return we("fetch",bt({},o)),n.apply(Z,r).then(function(a){return we("fetch",bt(bt({},o),{endTimestamp:Date.now(),response:a})),a},function(a){throw we("fetch",bt(bt({},o),{endTimestamp:Date.now(),error:a})),a})}});break;case"history":!function(){if(!((o=(i=(0,O.Rf)()).chrome)&&o.app&&o.app.runtime)&&"history"in i&&i.history.pushState&&i.history.replaceState){var n=Z.onpopstate;Z.onpopstate=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=Z.location.href,s=ir;if(ir=a,we("history",{from:s,to:a}),n)try{return n.apply(this,i)}catch{}},de(Z.history,"pushState",r),de(Z.history,"replaceState",r)}var i,o;function r(i){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=o.length>2?o[2]:void 0;if(s){var c=ir,u=String(s);ir=u,we("history",{from:c,to:u})}return i.apply(this,o)}}}();break;case"error":ni=Z.onerror,Z.onerror=function(n,r,i,o,a){return we("error",{column:o,error:a,line:i,msg:n,url:r}),!!ni&&ni.apply(this,arguments)};break;case"unhandledrejection":ri=Z.onunhandledrejection,Z.onunhandledrejection=function(n){return we("unhandledrejection",n),!ri||ri.apply(this,arguments)};break;default:F.warn("unknown instrumentation type:",e)}}(t.type))}function we(t,e){var n,r;if(t&&En[t])try{for(var i=Ko(En[t]||[]),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(e)}catch(s){F.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+yt(a)+"\nError: "+s)}}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function su(t){return void 0===t&&(t=[]),"Request"in Z&&gt(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function cu(t){return void 0===t&&(t=[]),"string"==typeof t[0]?t[0]:"Request"in Z&&gt(t[0],Request)?t[0].url:String(t[0])}function ra(t,e){return void 0===e&&(e=!1),function(n){if(n&&ti!==n&&!function(i){if("keypress"!==i.type)return!1;try{var o=i.target;if(!o||!o.tagName)return!0;if("INPUT"===o.tagName||"TEXTAREA"===o.tagName||o.isContentEditable)return!1}catch{}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===or||function(i,o){if(!i||i.type!==o.type)return!0;try{if(i.target!==o.target)return!0}catch{}return!1}(ti,n))&&(t({event:n,name:r,global:e}),ti=n),clearTimeout(or),or=Z.setTimeout(function(){or=void 0},1e3)}}}var ni=null,ri=null,Xt="?",uu=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,lu=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,du=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,pu=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,hu=/\((\S*)(?::(\d+))(?::(\d+))\)/,mu=/Minified React error #\d+;/i;function _n(t){var e=null,n=0;t&&("number"==typeof t.framesToPop?n=t.framesToPop:mu.test(t.message)&&(n=1));try{if(e=function(r){if(!r||!r.stacktrace)return null;for(var i,o=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,a=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,s=r.stacktrace.split("\n"),c=[],u=0;u<s.length;u+=2){var l=null;(i=o.exec(s[u]))?l={url:i[2],func:i[3],args:[],line:+i[1],column:null}:(i=a.exec(s[u]))&&(l={url:i[6],func:i[3]||i[4],args:i[5]?i[5].split(","):[],line:+i[1],column:+i[2]}),l&&(!l.func&&l.line&&(l.func=Xt),c.push(l))}return c.length?{message:ii(r),name:r.name,stack:c}:null}(t))return oa(e,n)}catch{}try{if(e=function(r){var i,o;if(!r||!r.stack)return null;for(var a,s,c,u=[],l=r.stack.split("\n"),d=0;d<l.length;++d){if(s=uu.exec(l[d])){var p=s[2]&&0===s[2].indexOf("native");s[2]&&0===s[2].indexOf("eval")&&(a=hu.exec(s[2]))&&(s[2]=a[1],s[3]=a[2],s[4]=a[3]);var h=s[2]&&0===s[2].indexOf("address at ")?s[2].substr(11):s[2],m=s[1]||Xt;m=(i=Qn(ia(m,h),2))[0],c={url:h=i[1],func:m,args:p?[s[2]]:[],line:s[3]?+s[3]:null,column:s[4]?+s[4]:null}}else if(s=du.exec(l[d]))c={url:s[2],func:s[1]||Xt,args:[],line:+s[3],column:s[4]?+s[4]:null};else{if(!(s=lu.exec(l[d])))continue;s[3]&&s[3].indexOf(" > eval")>-1&&(a=pu.exec(s[3]))?(s[1]=s[1]||"eval",s[3]=a[1],s[4]=a[2],s[5]=""):0!==d||s[5]||void 0===r.columnNumber||(u[0].column=r.columnNumber+1),m=(o=Qn(ia(m=s[1]||Xt,h=s[3]),2))[0],c={url:h=o[1],func:m,args:s[2]?s[2].split(","):[],line:s[4]?+s[4]:null,column:s[5]?+s[5]:null}}!c.func&&c.line&&(c.func=Xt),u.push(c)}return u.length?{message:ii(r),name:r.name,stack:u}:null}(t))return oa(e,n)}catch{}return{message:ii(t),name:t&&t.name,stack:[],failed:!0}}var ia=function(t,e){var n=-1!==t.indexOf("safari-extension"),r=-1!==t.indexOf("safari-web-extension");return n||r?[-1!==t.indexOf("@")?t.split("@")[0]:Xt,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]};function oa(t,e){try{return G(G({},t),{stack:t.stack.slice(e)})}catch{return t}}function ii(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function aa(t){var e=oi(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function sa(t){return{exception:{values:[aa(t)]}}}function oi(t){if(!t||!t.length)return[];var e=t,n=e[0].func||"",r=e[e.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.slice(0,50).map(function(i){return{colno:null===i.column?void 0:i.column,filename:i.url||e[0].url,function:i.func||"?",in_app:!0,lineno:null===i.line?void 0:i.line}}).reverse()}function ai(t,e,n){var r;if(void 0===n&&(n={}),qo(t)&&t.error)return sa(_n(t=t.error));if(Go(t)||"[object DOMException]"===Object.prototype.toString.call(t)){var o=t,a=o.name||(Go(o)?"DOMError":"DOMException"),s=o.message?a+": "+o.message:a;return r=si(s,e,n),(0,O.Db)(r,s),"code"in o&&(r.tags=G(G({},r.tags),{"DOMException.code":""+o.code})),r}return Bo(t)?r=sa(_n(t)):Qt(t)||Kr(t)?(r=function(c,u,l){var d={exception:{values:[{type:Kr(c)?c.constructor.name:l?"UnhandledRejection":"Error",value:"Non-Error "+(l?"promise rejection":"exception")+" captured with keys: "+ru(c)}]},extra:{__serialized__:Zo(c)}};if(u){var p=oi(_n(u).stack);d.stacktrace={frames:p}}return d}(t,e,n.rejection),(0,O.EG)(r,{synthetic:!0}),r):(r=si(t,e,n),(0,O.Db)(r,""+t,void 0),(0,O.EG)(r,{synthetic:!0}),r)}function si(t,e,n){void 0===n&&(n={});var r={message:t};if(n.attachStacktrace&&e){var i=oi(_n(e).stack);r.stacktrace={frames:i}}return r}function fu(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ca(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Ee();if(r&&r[t])return r[t].apply(r,function gu(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(fu(arguments[e]));return t}(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}var Eu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}),ie=function(t){function e(n){var r=this.constructor,i=t.call(this,n)||this;return i.message=n,i.name=r.prototype.constructor.name,Eu(i,r.prototype),i}return function(n,r){function i(){this.constructor=n}Jr(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}(e,t),e}(Error),_u=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,ua=function(){function t(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return t.prototype.toString=function(e){void 0===e&&(e=!1);var n=this,i=n.path,o=n.pass,a=n.port;return n.protocol+"://"+n.publicKey+(e&&o?":"+o:"")+"@"+n.host+(a?":"+a:"")+"/"+(i&&i+"/")+n.projectId},t.prototype._fromString=function(e){var n=_u.exec(e);if(!n)throw new ie("Invalid Dsn");var r=function(f,P){var b="function"==typeof Symbol&&f[Symbol.iterator];if(!b)return f;var j,J,ee=b.call(f),He=[];try{for(;(void 0===P||P-- >0)&&!(j=ee.next()).done;)He.push(j.value)}catch(Tt){J={error:Tt}}finally{try{j&&!j.done&&(b=ee.return)&&b.call(ee)}finally{if(J)throw J.error}}return He}(n.slice(1),6),i=r[0],o=r[1],a=r[2],s=void 0===a?"":a,c=r[3],u=r[4],l=void 0===u?"":u,d="",p=r[5],h=p.split("/");if(h.length>1&&(d=h.slice(0,-1).join("/"),p=h.pop()),p){var m=p.match(/^\d+/);m&&(p=m[0])}this._fromComponents({host:c,pass:s,path:d,projectId:p,port:l,protocol:i,publicKey:o})},t.prototype._fromComponents=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},t.prototype._validate=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach(function(n){if(!e[n])throw new ie("Invalid Dsn: "+n+" missing")}),!this.projectId.match(/^\d+$/))throw new ie("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new ie("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new ie("Invalid Dsn: Invalid port "+this.port)},t}(),la=function(){function t(e,n,r){void 0===n&&(n={}),this.dsn=e,this._dsnObject=new ua(e),this.metadata=n,this._tunnel=r}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.forceEnvelope=function(){return!!this._tunnel},t.prototype.getBaseApiEndpoint=function(){var e=this.getDsn();return(e.protocol?e.protocol+":":"")+"//"+e.host+(e.port?":"+e.port:"")+(e.path?"/"+e.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},t.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},t.prototype.getRequestHeaders=function(e,n){var r=this.getDsn(),i=["Sentry sentry_version=7"];return i.push("sentry_client="+e+"/"+n),i.push("sentry_key="+r.publicKey),r.pass&&i.push("sentry_secret="+r.pass),{"Content-Type":"application/json","X-Sentry-Auth":i.join(", ")}},t.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var n=this.getDsn(),r=this.getBaseApiEndpoint()+"embed/error-page/",i=[];for(var o in i.push("dsn="+n.toString()),e)if("dsn"!==o)if("user"===o){if(!e.user)continue;e.user.name&&i.push("name="+encodeURIComponent(e.user.name)),e.user.email&&i.push("email="+encodeURIComponent(e.user.email))}else i.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return i.length?r+"?"+i.join("&"):r},t.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},t.prototype._getIngestEndpoint=function(e){return this._tunnel?this._tunnel:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+e+"/"},t.prototype._encodedAuth=function(){var e,n={sentry_key:this.getDsn().publicKey,sentry_version:"7"};return e=n,Object.keys(e).map(function(r){return encodeURIComponent(r)+"="+encodeURIComponent(e[r])}).join("&")},t}(),ar=(0,O.Rf)(),ci=0;function da(){return ci>0}function $t(t,e,n){if(void 0===e&&(e={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch{return t}var r=function(){var o=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var a=o.map(function(s){return $t(s,e)});return t.handleEvent?t.handleEvent.apply(this,a):t.apply(this,a)}catch(s){throw function Au(){ci+=1,setTimeout(function(){ci-=1})}(),function vu(t){ca("withScope",t)}(function(c){c.addEventProcessor(function(u){var l=G({},u);return e.mechanism&&((0,O.Db)(l,void 0,void 0),(0,O.EG)(l,e.mechanism)),l.extra=G(G({},l.extra),{arguments:o}),l}),function yu(t,e){var n;try{throw new Error("Sentry syntheticException")}catch(r){n=r}ca("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}(s)}),s}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}t.prototype=t.prototype||{},r.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return t.name}})}catch{}return r}var Iu=function(){function t(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=G({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(F.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(F.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(Lt({callback:function(n){var r=n.error,i=Ee(),o=i.getIntegration(t),a=r&&!0===r.__sentry_own_request__;if(o&&!da()&&!a){var s=i.getClient(),c=void 0===r&&Wt(n.msg)?e._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):e._enhanceEventWithInitialFrame(ai(r||n.msg,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);(0,O.EG)(c,{handled:!1,type:"onerror"}),i.captureEvent(c,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(Lt({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch{}var i=Ee(),o=i.getIntegration(t),a=r&&!0===r.__sentry_own_request__;if(!o||da()||a)return!0;var s=i.getClient(),c=Jn(r)?e._eventFromRejectionWithPrimitive(r):ai(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!0});c.level=je.Error,(0,O.EG)(c,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(c,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},t.prototype._eventFromIncompleteOnError=function(e,n,r,i){var o,a=qo(e)?e.message:e,s=a.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);return s&&(o=s[1],a=s[2]),this._enhanceEventWithInitialFrame({exception:{values:[{type:o||"Error",value:a}]}},n,r,i)},t.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},t.prototype._enhanceEventWithInitialFrame=function(e,n,r,i){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(i,10))?void 0:i,a=isNaN(parseInt(r,10))?void 0:r,s=Wt(n)&&n.length>0?n:(0,O.l4)();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:o,filename:s,function:"?",in_app:!0,lineno:a}),e},t.id="GlobalHandlers",t}(),Cu=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Su=function(){function t(e){this.name=t.id,this._options=G({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var e=(0,O.Rf)();this._options.setTimeout&&de(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&de(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&de(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&de(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Cu).forEach(this._wrapEventTarget.bind(this))},t.prototype._wrapTimeFunction=function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n[0]=$t(n[0],{mechanism:{data:{function:yt(e)},handled:!0,type:"instrument"}}),e.apply(this,n)}},t.prototype._wrapRAF=function(e){return function(n){return e.call(this,$t(n,{mechanism:{data:{function:"requestAnimationFrame",handler:yt(e)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(e){var n=(0,O.Rf)(),r=n[e]&&n[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(de(r,"addEventListener",function(i){return function(o,a,s){try{"function"==typeof a.handleEvent&&(a.handleEvent=$t(a.handleEvent.bind(a),{mechanism:{data:{function:"handleEvent",handler:yt(a),target:e},handled:!0,type:"instrument"}}))}catch{}return i.call(this,o,$t(a,{mechanism:{data:{function:"addEventListener",handler:yt(a),target:e},handled:!0,type:"instrument"}}),s)}}),de(r,"removeEventListener",function(i){return function(o,a,s){var c,u=a;try{var l=null===(c=u)||void 0===c?void 0:c.__sentry_wrapped__;l&&i.call(this,o,l,s)}catch{}return i.call(this,o,u,s)}}))},t.prototype._wrapXHR=function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(function(a){a in i&&"function"==typeof i[a]&&de(i,a,function(s){var c={mechanism:{data:{function:a,handler:yt(s)},handled:!0,type:"instrument"}};return s.__sentry_original__&&(c.mechanism.data.handler=yt(s.__sentry_original__)),$t(s,c)})}),e.apply(this,n)}},t.id="TryCatch",t}(),pa=function(){function t(e){this.name=t.id,this._options=G({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&Ee().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:(0,O.jH)(e)},{event:e})},t.prototype.setupOnce=function(){var e=this;this._options.console&&Lt({callback:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e._consoleBreadcrumb.apply(e,wt(n))},type:"console"}),this._options.dom&&Lt({callback:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e._domBreadcrumb.apply(e,wt(n))},type:"dom"}),this._options.xhr&&Lt({callback:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e._xhrBreadcrumb.apply(e,wt(n))},type:"xhr"}),this._options.fetch&&Lt({callback:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e._fetchBreadcrumb.apply(e,wt(n))},type:"fetch"}),this._options.history&&Lt({callback:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e._historyBreadcrumb.apply(e,wt(n))},type:"history"})},t.prototype._consoleBreadcrumb=function(e){var n={category:"console",data:{arguments:e.args,logger:"console"},level:je.fromString(e.level),message:Qo(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;n.message="Assertion failed: "+(Qo(e.args.slice(1)," ")||"console.assert"),n.data.arguments=e.args.slice(1)}Ee().addBreadcrumb(n,{input:e.args,level:e.level})},t.prototype._domBreadcrumb=function(e){var n,r="object"==typeof this._options.dom?this._options.dom.serializeAttribute:void 0;"string"==typeof r&&(r=[r]);try{n=$n(e.event.target?e.event.target:e.event,r)}catch{n="<unknown>"}0!==n.length&&Ee().addBreadcrumb({category:"ui."+e.name,message:n},{event:e.event,name:e.name,global:e.global})},t.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var n=e.xhr.__sentry_xhr__||{},r=n.method,i=n.url,o=n.status_code,a=n.body;Ee().addBreadcrumb({category:"xhr",data:{method:r,url:i,status_code:o},type:"http"},{xhr:e.xhr,input:a})}},t.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?Ee().addBreadcrumb({category:"fetch",data:e.fetchData,level:je.Error,type:"http"},{data:e.error,input:e.args}):Ee().addBreadcrumb({category:"fetch",data:G(G({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},t.prototype._historyBreadcrumb=function(e){var n=(0,O.Rf)(),r=e.from,i=e.to,o=(0,O.en)(n.location.href),a=(0,O.en)(r),s=(0,O.en)(i);a.path||(a=o),o.protocol===s.protocol&&o.host===s.host&&(i=s.relative),o.protocol===a.protocol&&o.host===a.host&&(r=a.relative),Ee().addBreadcrumb({category:"navigation",data:{from:r,to:i}})},t.id="Breadcrumbs",t}(),Ou=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._key=e.key||"cause",this._limit=e.limit||5}return t.prototype.setupOnce=function(){Xn(function(e,n){var r=Ee().getIntegration(t);if(r){var i=r._handler&&r._handler.bind(r);return"function"==typeof i?i(e,n):e}return e})},t.prototype._handler=function(e,n){if(!(e.exception&&e.exception.values&&n&&gt(n.originalException,Error)))return e;var r=this._walkErrorTree(n.originalException,this._key);return e.exception.values=wt(r,e.exception.values),e},t.prototype._walkErrorTree=function(e,n,r){if(void 0===r&&(r=[]),!gt(e[n],Error)||r.length+1>=this._limit)return r;var i=aa(_n(e[n]));return this._walkErrorTree(e[n],n,wt([i],r))},t.id="LinkedErrors",t}(),en=(0,O.Rf)(),Pu=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Xn(function(e){var n,r,i;if(Ee().getIntegration(t)){if(!en.navigator&&!en.location&&!en.document)return e;var o=(null===(n=e.request)||void 0===n?void 0:n.url)||(null===(r=en.location)||void 0===r?void 0:r.href),a=(en.document||{}).referrer,s=(en.navigator||{}).userAgent,c=G(G(G({},null===(i=e.request)||void 0===i?void 0:i.headers),a&&{Referer:a}),s&&{"User-Agent":s}),u=G(G({},o&&{url:o}),{headers:c});return G(G({},e),{request:u})}return e})},t.id="UserAgent",t}(),Tu=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,n){e(function(r){var i=n().getIntegration(t);if(i){try{if(i._shouldDropEvent(r,i._previousEvent))return F.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return i._previousEvent=r}return i._previousEvent=r}return r})},t.prototype._shouldDropEvent=function(e,n){return!(!n||!this._isSameMessageEvent(e,n)&&!this._isSameExceptionEvent(e,n))},t.prototype._isSameMessageEvent=function(e,n){var r=e.message,i=n.message;return!(!r&&!i||r&&!i||!r&&i||r!==i||!this._isSameFingerprint(e,n)||!this._isSameStacktrace(e,n))},t.prototype._getFramesFromEvent=function(e){var n=e.exception;if(n)try{return n.values[0].stacktrace.frames}catch{return}else if(e.stacktrace)return e.stacktrace.frames},t.prototype._isSameStacktrace=function(e,n){var r=this._getFramesFromEvent(e),i=this._getFramesFromEvent(n);if(!r&&!i)return!0;if(r&&!i||!r&&i||i.length!==r.length)return!1;for(var o=0;o<i.length;o++){var a=i[o],s=r[o];if(a.filename!==s.filename||a.lineno!==s.lineno||a.colno!==s.colno||a.function!==s.function)return!1}return!0},t.prototype._getExceptionFromEvent=function(e){return e.exception&&e.exception.values&&e.exception.values[0]},t.prototype._isSameExceptionEvent=function(e,n){var r=this._getExceptionFromEvent(n),i=this._getExceptionFromEvent(e);return!!(r&&i&&r.type===i.type&&r.value===i.value&&this._isSameFingerprint(e,n)&&this._isSameStacktrace(e,n))},t.prototype._isSameFingerprint=function(e,n){var r=e.fingerprint,i=n.fingerprint;if(!r&&!i)return!0;if(r&&!i||!r&&i)return!1;try{return r.join("")===i.join("")}catch{return!1}},t.id="Dedupe",t}(),ha={},ui=(0,O.Rf)();ui.Sentry&&ui.Sentry.Integrations&&(ha=ui.Sentry.Integrations);var Ne,tn=G(G(G({},ha),y),I),ma="6.13.3";!function(t){t.BeforeSend="before_send",t.EventProcessor="event_processor",t.NetworkError="network_error",t.QueueOverflow="queue_overflow",t.RateLimitBackoff="ratelimit_backoff",t.SampleRate="sample_rate"}(Ne||(Ne={}));var fa=[];function ga(t){return t.reduce(function(e,n){return e.every(function(r){return n.name!==r.name})&&e.push(n),e},[])}var Dt,Ru=function(){function t(e,n){this._integrations={},this._numProcessing=0,this._backend=new e(n),this._options=n,n.dsn&&(this._dsn=new ua(n.dsn))}return t.prototype.captureException=function(e,n,r){var i=this,o=n&&n.event_id;return this._process(this._getBackend().eventFromException(e,n).then(function(a){return i._captureEvent(a,n,r)}).then(function(a){o=a})),o},t.prototype.captureMessage=function(e,n,r,i){var o=this,a=r&&r.event_id,s=Jn(e)?this._getBackend().eventFromMessage(String(e),n,r):this._getBackend().eventFromException(e,r);return this._process(s.then(function(c){return o._captureEvent(c,r,i)}).then(function(c){a=c})),a},t.prototype.captureEvent=function(e,n,r){var i=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(function(o){i=o})),i},t.prototype.captureSession=function(e){this._isEnabled()?"string"!=typeof e.release?F.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1})):F.warn("SDK not enabled, will not capture session.")},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.getTransport=function(){return this._getBackend().getTransport()},t.prototype.flush=function(e){var n=this;return this._isClientDoneProcessing(e).then(function(r){return n.getTransport().close(e).then(function(i){return r&&i})})},t.prototype.close=function(e){var n=this;return this.flush(e).then(function(r){return n.getOptions().enabled=!1,r})},t.prototype.setupIntegrations=function(){var n;this._isEnabled()&&!this._integrations.initialized&&(this._integrations=(n={},function(r){var i=r.defaultIntegrations&&Fe(r.defaultIntegrations)||[],o=r.integrations,a=Fe(ga(i));Array.isArray(o)?a=Fe(a.filter(function(u){return o.every(function(l){return l.name!==u.name})}),ga(o)):"function"==typeof o&&(a=o(a),a=Array.isArray(a)?a:[a]);var s=a.map(function(u){return u.name}),c="Debug";return-1!==s.indexOf(c)&&a.push.apply(a,Fe(a.splice(s.indexOf(c),1))),a}(this._options).forEach(function(r){var i;n[r.name]=r,-1===fa.indexOf((i=r).name)&&(i.setupOnce(Xn,Ee),fa.push(i.name),F.log("Integration installed: "+i.name))}),Object.defineProperty(n,"initialized",{value:!0}),n))},t.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch{return F.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(e,n){var r,i,o=!1,a=!1,s=n.exception&&n.exception.values;if(s){a=!0;try{for(var c=function(p){var h="function"==typeof Symbol&&Symbol.iterator,m=h&&p[h],f=0;if(m)return m.call(p);if(p&&"number"==typeof p.length)return{next:function(){return p&&f>=p.length&&(p=void 0),{value:p&&p[f++],done:!p}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),u=c.next();!u.done;u=c.next()){var l=u.value.mechanism;if(l&&!1===l.handled){o=!0;break}}}catch(p){r={error:p}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}var d=e.status===Qe.Ok;(d&&0===e.errors||d&&o)&&(e.update(ue(ue({},o&&{status:Qe.Crashed}),{errors:e.errors||Number(a||o)})),this.captureSession(e))},t.prototype._sendSession=function(e){this._getBackend().sendSession(e)},t.prototype._isClientDoneProcessing=function(e){var n=this;return new ve(function(r){var i=0,o=setInterval(function(){0==n._numProcessing?(clearInterval(o),r(!0)):(i+=1,e&&i>=e&&(clearInterval(o),r(!1)))},1)})},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},t.prototype._prepareEvent=function(e,n,r){var i=this,o=this.getOptions().normalizeDepth,a=void 0===o?3:o,s=ue(ue({},e),{event_id:e.event_id||(r&&r.event_id?r.event_id:(0,O.DM)()),timestamp:e.timestamp||(0,Jt.yW)()});this._applyClientOptions(s),this._applyIntegrationsMetadata(s);var c=n;r&&r.captureContext&&(c=Zn.clone(c).update(r.captureContext));var u=ve.resolve(s);return c&&(u=c.applyToEvent(s,r)),u.then(function(l){return"number"==typeof a&&a>0?i._normalizeEvent(l,a):l})},t.prototype._normalizeEvent=function(e,n){if(!e)return null;var r=ue(ue(ue(ue(ue({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(o){return ue(ue({},o),o.data&&{data:Zt(o.data,n)})})}),e.user&&{user:Zt(e.user,n)}),e.contexts&&{contexts:Zt(e.contexts,n)}),e.extra&&{extra:Zt(e.extra,n)});e.contexts&&e.contexts.trace&&(r.contexts.trace=e.contexts.trace);var i=this.getOptions()._experiments;return(void 0===i?{}:i).ensureNoCircularStructures?Zt(r):r},t.prototype._applyClientOptions=function(e){var n=this.getOptions(),i=n.release,o=n.dist,a=n.maxValueLength,s=void 0===a?250:a;"environment"in e||(e.environment="environment"in n?n.environment:"production"),void 0===e.release&&void 0!==i&&(e.release=i),void 0===e.dist&&void 0!==o&&(e.dist=o),e.message&&(e.message=vn(e.message,s));var c=e.exception&&e.exception.values&&e.exception.values[0];c&&c.value&&(c.value=vn(c.value,s));var u=e.request;u&&u.url&&(u.url=vn(u.url,s))},t.prototype._applyIntegrationsMetadata=function(e){var n=Object.keys(this._integrations);n.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=Fe(e.sdk.integrations||[],n))},t.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},t.prototype._captureEvent=function(e,n,r){return this._processEvent(e,n,r).then(function(i){return i.event_id},function(i){F.error(i)})},t.prototype._processEvent=function(e,n,r){var i,o,a=this,s=this.getOptions(),c=s.beforeSend,u=s.sampleRate,l=this.getTransport();if(!this._isEnabled())return ve.reject(new ie("SDK not enabled, will not capture event."));var d="transaction"===e.type;return!d&&"number"==typeof u&&Math.random()>u?(null===(o=(i=l).recordLostEvent)||void 0===o||o.call(i,Ne.SampleRate,"event"),ve.reject(new ie("Discarding event because it's not included in the random sample (sampling rate = "+u+")"))):this._prepareEvent(e,r,n).then(function(p){var h,m;if(null===p)throw null===(m=(h=l).recordLostEvent)||void 0===m||m.call(h,Ne.EventProcessor,e.type||"event"),new ie("An event processor returned null, will not send event.");if(n&&n.data&&!0===n.data.__sentry__||d||!c)return p;var f=c(p,n);return a._ensureBeforeSendRv(f)}).then(function(p){var h,m;if(null===p)throw null===(m=(h=l).recordLostEvent)||void 0===m||m.call(h,Ne.BeforeSend,e.type||"event"),new ie("`beforeSend` returned `null`, will not send event.");var f=r&&r.getSession&&r.getSession();return!d&&f&&a._updateSessionFromEvent(f,p),a._sendEvent(p),p}).then(null,function(p){throw p instanceof ie?p:(a.captureException(p,{data:{__sentry__:!0},originalException:p}),new ie("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+p))})},t.prototype._process=function(e){var n=this;this._numProcessing+=1,e.then(function(r){return n._numProcessing-=1,r},function(r){return n._numProcessing-=1,r})},t.prototype._ensureBeforeSendRv=function(e){var n="`beforeSend` method has to return `null` or a valid event.";if(Wr(e))return e.then(function(r){if(!Qt(r)&&null!==r)throw new ie(n);return r},function(r){throw new ie("beforeSend rejected with "+r)});if(!Qt(e)&&null!==e)throw new ie(n);return e},t}();(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"})(Dt||(Dt={})),function(t){t.fromHttpCode=function(e){return e>=200&&e<300?t.Success:429===e?t.RateLimit:e>=400&&e<500?t.Invalid:e>=500?t.Failed:t.Unknown}}(Dt||(Dt={}));var wu=function(){function t(){}return t.prototype.sendEvent=function(e){return ve.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:Dt.Skipped})},t.prototype.close=function(e){return ve.resolve(!0)},t}(),Nu=function(){function t(e){this._options=e,this._options.dsn||F.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(e,n){throw new ie("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(e,n,r){throw new ie("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,function(n){F.error("Error while sending event: "+n)})},t.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,function(n){F.error("Error while sending session: "+n)}):F.warn("Dropping session because custom transport doesn't implement sendSession")},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new wu},t}();function ya(t){if(t.metadata&&t.metadata.sdk){var e=t.metadata.sdk;return{name:e.name,version:e.version}}}function bu(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=Fe(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=Fe(t.sdk.packages||[],e.packages||[])),t}function va(t,e){var n=ya(e),r="aggregates"in t?"sessions":"session";return{body:JSON.stringify(ue(ue({sent_at:(new Date).toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()}))+"\n"+JSON.stringify({type:r})+"\n"+JSON.stringify(t),type:r,url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function Ea(t,e){var n=ya(e),r=t.type||"event",i="transaction"===r||e.forceEnvelope(),o=t.debug_meta||{},a=o.transactionSampling,s=function(h,m){var f={};for(var P in h)Object.prototype.hasOwnProperty.call(h,P)&&m.indexOf(P)<0&&(f[P]=h[P]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var b=0;for(P=Object.getOwnPropertySymbols(h);b<P.length;b++)m.indexOf(P[b])<0&&Object.prototype.propertyIsEnumerable.call(h,P[b])&&(f[P[b]]=h[P[b]])}return f}(o,["transactionSampling"]),c=a||{},u=c.method,l=c.rate;0===Object.keys(s).length?delete t.debug_meta:t.debug_meta=s;var d={body:JSON.stringify(n?bu(t,e.metadata.sdk):t),type:r,url:i?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(i){var p=JSON.stringify(ue(ue({event_id:t.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()}))+"\n"+JSON.stringify({type:r,sample_rates:[{id:u,rate:l}]})+"\n"+d.body;d.body=p}return d}var sr,Lu=function(){function t(e){this._limit=e,this._buffer=[]}return t.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},t.prototype.add=function(e){var n=this;if(!this.isReady())return ve.reject(new ie("Not adding Promise due to buffer limit reached."));var r=e();return-1===this._buffer.indexOf(r)&&this._buffer.push(r),r.then(function(){return n.remove(r)}).then(null,function(){return n.remove(r).then(null,function(){})}),r},t.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(e){var n=this;return new ve(function(r){var i=setTimeout(function(){e&&e>0&&r(!1)},e);ve.all(n._buffer).then(function(){clearTimeout(i),r(!0)}).then(null,function(){r(!0)})})},t}(),be=(0,O.Rf)();function _a(){var t,e;if(sr)return sr;if(ei(be.fetch))return sr=be.fetch.bind(be);var n=be.document,r=be.fetch;if("function"==typeof(null===(t=n)||void 0===t?void 0:t.createElement))try{var i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i),!(null===(e=i.contentWindow)||void 0===e)&&e.fetch&&(r=i.contentWindow.fetch),n.head.removeChild(i)}catch(o){F.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",o)}return sr=r.bind(be)}var Aa,Ia={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},li=(0,O.Rf)(),Ca=function(){function t(e){var n=this;this.options=e,this._buffer=new Lu(30),this._rateLimits={},this._outcomes={},this._api=new la(e.dsn,e._metadata,e.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth(),this.options.sendClientReports&&li.document&&li.document.addEventListener("visibilitychange",function(){"hidden"===li.document.visibilityState&&n._flushOutcomes()})}return t.prototype.sendEvent=function(e){throw new ie("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(e){return this._buffer.drain(e)},t.prototype.recordLostEvent=function(e,n){var r;if(this.options.sendClientReports){var i=Ia[n]+":"+e;F.log("Adding outcome: "+i),this._outcomes[i]=(null!=(r=this._outcomes[i])?r:0)+1}},t.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},Object.keys(e).length){F.log("Flushing outcomes:\n"+JSON.stringify(e,null,2));var n=this._api.getEnvelopeEndpointWithUrlEncodedAuth(),r=JSON.stringify({})+"\n"+JSON.stringify({type:"client_report"})+"\n"+JSON.stringify({timestamp:(0,Jt.yW)(),discarded_events:Object.keys(e).map(function(i){var o=Qn(i.split(":"),2);return{reason:o[1],category:o[0],quantity:e[i]}})});try{!function(i,o){if("[object Navigator]"===Object.prototype.toString.call(be&&be.navigator)&&"function"==typeof be.navigator.sendBeacon)return be.navigator.sendBeacon.bind(be.navigator)(i,o);rr()&&_a()(i,{body:o,method:"POST",credentials:"omit",keepalive:!0}).then(null,function(a){console.error(a)})}(n,r)}catch(i){F.error(i)}}else F.log("No outcomes to flush")}},t.prototype._handleResponse=function(e){var n=e.requestType,r=e.response,i=e.headers,o=e.resolve,a=e.reject,s=Dt.fromHttpCode(r.status);this._handleRateLimit(i)&&F.warn("Too many "+n+" requests, backing off until: "+this._disabledUntil(n)),s!==Dt.Success?a(r):o({status:s})},t.prototype._disabledUntil=function(e){return this._rateLimits[Ia[e]]||this._rateLimits.all},t.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},t.prototype._handleRateLimit=function(e){var n,r,i,o,a=Date.now(),s=e["x-sentry-rate-limits"],c=e["retry-after"];if(s){try{for(var u=Fo(s.trim().split(",")),l=u.next();!l.done;l=u.next()){var d=l.value.split(":",2),p=parseInt(d[0],10),h=1e3*(isNaN(p)?60:p);try{for(var m=(i=void 0,Fo(d[1].split(";"))),f=m.next();!f.done;f=m.next())this._rateLimits[f.value||"all"]=new Date(a+h)}catch(b){i={error:b}}finally{try{f&&!f.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}}}catch(b){n={error:b}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return!0}return!!c&&(this._rateLimits.all=new Date(a+(0,O.JY)(a,c)),!0)},t}(),Du=function(t){function e(n,r){void 0===r&&(r=_a());var i=t.call(this,n)||this;return i._fetch=r,i}return Wn(e,t),e.prototype.sendEvent=function(n){return this._sendRequest(Ea(n,this._api),n)},e.prototype.sendSession=function(n){return this._sendRequest(va(n,this._api),n)},e.prototype._sendRequest=function(n,r){var i=this;if(this._isRateLimited(n.type))return this.recordLostEvent(Ne.RateLimitBackoff,n.type),Promise.reject({event:r,type:n.type,reason:"Transport for "+n.type+" requests locked till "+this._disabledUntil(n.type)+" due to too many requests.",status:429});var o={body:n.body,method:"POST",referrerPolicy:au()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(o,this.options.fetchParameters),void 0!==this.options.headers&&(o.headers=this.options.headers),this._buffer.add(function(){return new ve(function(a,s){i._fetch(n.url,o).then(function(c){var u={"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")};i._handleResponse({requestType:n.type,response:c,headers:u,resolve:a,reject:s})}).catch(s)})}).then(void 0,function(a){throw i.recordLostEvent(a instanceof ie?Ne.QueueOverflow:Ne.NetworkError,n.type),a})},e}(Ca),Uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wn(e,t),e.prototype.sendEvent=function(n){return this._sendRequest(Ea(n,this._api),n)},e.prototype.sendSession=function(n){return this._sendRequest(va(n,this._api),n)},e.prototype._sendRequest=function(n,r){var i=this;return this._isRateLimited(n.type)?(this.recordLostEvent(Ne.RateLimitBackoff,n.type),Promise.reject({event:r,type:n.type,reason:"Transport for "+n.type+" requests locked till "+this._disabledUntil(n.type)+" due to too many requests.",status:429})):this._buffer.add(function(){return new ve(function(o,a){var s=new XMLHttpRequest;for(var c in s.onreadystatechange=function(){if(4===s.readyState){var u={"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")};i._handleResponse({requestType:n.type,response:s,headers:u,resolve:o,reject:a})}},s.open("POST",n.url),i.options.headers)i.options.headers.hasOwnProperty(c)&&s.setRequestHeader(c,i.options.headers[c]);s.send(n.body)})}).then(void 0,function(o){throw i.recordLostEvent(o instanceof ie?Ne.QueueOverflow:Ne.NetworkError,n.type),o})},e}(Ca),xu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wn(e,t),e.prototype.eventFromException=function(n,r){return s=ai(n,(a=r)&&a.syntheticException||void 0,{attachStacktrace:this._options.attachStacktrace}),(0,O.EG)(s,{handled:!0,type:"generic"}),s.level=je.Error,a&&a.event_id&&(s.event_id=a.event_id),ve.resolve(s);var a,s},e.prototype.eventFromMessage=function(n,r,i){return void 0===r&&(r=je.Info),function(o,a,s,c){void 0===s&&(s=je.Info);var u=si(a,c&&c.syntheticException||void 0,{attachStacktrace:o.attachStacktrace});return u.level=s,c&&c.event_id&&(u.event_id=c.event_id),ve.resolve(u)}(this._options,n,r,i)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var n=G(G({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(n):rr()?new Du(n):new Uu(n)},e}(Nu),Mu=function(t){function e(n){return void 0===n&&(n={}),n._metadata=n._metadata||{},n._metadata.sdk=n._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:ma}],version:ma},t.call(this,xu,n)||this}return Wn(e,t),e.prototype.showReportDialog=function(n){void 0===n&&(n={}),(0,O.Rf)().document&&(this._isEnabled()?function(r){if(void 0===r&&(r={}),ar.document)if(r.eventId)if(r.dsn){var i=ar.document.createElement("script");i.async=!0,i.src=new la(r.dsn).getReportDialogEndpoint(r),r.onLoad&&(i.onload=r.onLoad);var o=ar.document.head||ar.document.body;o&&o.appendChild(i)}else F.error("Missing dsn option in showReportDialog call");else F.error("Missing eventId option in showReportDialog call")}(G(G({},n),{dsn:n.dsn||this.getDsn()})):F.error("Trying to call showReportDialog with Sentry Client disabled"))},e.prototype._prepareEvent=function(n,r,i){return n.platform=n.platform||"javascript",t.prototype._prepareEvent.call(this,n,r,i)},e.prototype._sendEvent=function(n){var r=this.getIntegration(pa);r&&r.addSentryBreadcrumb(n),t.prototype._sendEvent.call(this,n)},e}(Ru);!function(t){t.API_ERROR="API_ERROR",t.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",t.INVALID_REQUEST_ERROR="INVALID_REQUEST_ERROR",t.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",t.PAYMENT_METHOD_ERROR="PAYMENT_METHOD_ERROR",t.REFUND_ERROR="REFUND_ERROR"}(Aa||(Aa={}));class E extends Error{constructor(){var o,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;n.length>0&&(o=n,r="".concat(e,"\n  ").concat(o.map(a=>{switch(!0){case"message"in a:return a.message;case"detail"in a:return a.detail;default:return"[Unspecified Error]"}}).join("\n  "))),super(r),this.errors=n,this.name="SqError",Object.setPrototypeOf(this,E.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}var Le,di,pi,pe,ku=Object.defineProperty,Hu=Object.defineProperties,Fu=Object.getOwnPropertyDescriptors,Sa=Object.getOwnPropertySymbols,ju=Object.prototype.hasOwnProperty,Bu=Object.prototype.propertyIsEnumerable,Oa=(t,e,n)=>e in t?ku(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qu=(t,e)=>{for(var n in e||(e={}))ju.call(e,n)&&Oa(t,n,e[n]);if(Sa)for(var n of Sa(e))Bu.call(e,n)&&Oa(t,n,e[n]);return t},Gu=(t,e)=>Hu(t,Fu(e)),hi=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{s(n.next(c))}catch(u){i(u)}},a=c=>{try{s(n.throw(c))}catch(u){i(u)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((n=n.apply(t,e)).next())}),Ut=class extends Error{constructor(t){super(t),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,Ut.prototype)}},mi=class extends Error{constructor(t){super(t),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,mi.prototype)}},fi=class extends Error{constructor(t,e,n){super(n?`Messenger has not received an acknowledgement of message ${t} with id ${e} from iframe id=${n} which ${void 0!==document.getElementById(n)?.src?"exists":"does not exist"}`:`Messenger has not received an acknowledgement of message ${t} with id ${e}, no iframeID was set`),this.type=t,this.id=e,this.iframeID=n,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,fi.prototype)}},Pa="channel:connected",Ta="channel:connecting",Ra="channel:close",wa="channel:error";(di=Le||(Le={})).ACK="ack",di.OK="ok",di.ERROR="error",(pe=pi||(pi={}))[pe.BAD_REQUEST=400]="BAD_REQUEST",pe[pe.OK=200]="OK",pe[pe.NO_CONTENT=204]="NO_CONTENT",pe[pe.NOT_FOUND=404]="NOT_FOUND",pe[pe.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",pe[pe.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",pe[pe.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",pe[pe.UNAUTHORIZED=401]="UNAUTHORIZED";var gi,Na,Be={get BACKOFF_FACTOR(){return 1.66},get REQUEST_DURATION_MAX_MS(){return 6e4},get REQUEST_TIMEOUT_MS(){return[1e4,2e4,3e4]},get RETRY_DELAY_MS(){return 200},STATUS_CODE:pi},Vu=class extends Error{constructor(t,e){super(`The listener provided for event type ${t} timed out after ${e} milliseconds. If you've returned a promise, ensure it is resolving`),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,Vu.prototype)}},Yu=class extends Error{constructor(t,e){super(`The listener provided for event type ${t} threw an error: ${e}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,Yu.prototype)}},An=class extends Error{constructor(t,e,n){super(`Request timeout exceeded (attempts=${t}; duration=${e}ms; url=${n})`),this.name="HttpRequestTimeoutError",Object.setPrototypeOf(this,An.prototype)}},yi=class extends Error{constructor(t,e){super(`Invalid JSON received (status=${e}; url=${t})`),this.name="HttpRequestInvalidJsonError",Object.setPrototypeOf(this,yi.prototype)}},vi=class extends Error{constructor(t,e,n){super(`Network error during request (attempts=${t}; duration=${e}ms; url=${n})`),this.name="HttpRequestNetworkError",Object.setPrototypeOf(this,vi.prototype)}},Ei={timeout:function(t,e){return hi(this,arguments,function*(n,r,i=new Error("Promise timeout exceeded")){let o=-1,a=new Promise((c,u)=>{o=window.setTimeout(()=>{u(i)},r)}),s=yield Promise.race([a,n()]);return window.clearTimeout(o),s})}};(Na=gi||(gi={})).POST="POST",Na.GET="GET";var zu="include",Ku="cors";function ba(t,e){return{body:t,status:e.status,statusText:e.statusText}}function La(t,e,n){return hi(this,arguments,function*(r,i,o,a=1,s=Date.now()){let c=Date.now()-s,l=o?.retryOnTimeout;void 0===l&&(l=!0);let d=Math.min(o?.timeout||Be.REQUEST_TIMEOUT_MS[a-1],Be.REQUEST_DURATION_MAX_MS-c),p=null;void 0!==window.AbortController&&null!==window.AbortController&&(p=new window.AbortController);let h=Gu(qu({credentials:zu,mode:Ku},i),{signal:p?p.signal:null});try{let m=yield Ei.timeout(window.fetch.bind(null,r,h),d,new An(a,c,r));return yield function Ju(t,e){return hi(this,null,function*(){if(!(t.status<Be.STATUS_CODE.INTERNAL_SERVER_ERROR))return ba({},t);try{let n={};return t.status!==Be.STATUS_CODE.NO_CONTENT&&(n=yield t.json()),ba(n,t)}catch{throw new yi(e,t.status)}})}(m,r)}catch(m){let f=0;if(m instanceof An)p&&p.abort();else{if(m instanceof yi)throw m;if(f=function Wu(t,e){let n=Math.floor(Be.RETRY_DELAY_MS*Math.pow(Be.BACKOFF_FACTOR,t-1)),r=Date.now()-e,i=Be.REQUEST_DURATION_MAX_MS-r;return i<=n?i-Be.REQUEST_TIMEOUT_MS[t-1]:n}(a,s),!l||f<=0)throw new vi(a,c,r)}if(!l||a===Be.REQUEST_TIMEOUT_MS.length)throw m;return new Promise(P=>{setTimeout(()=>{P(La(r,i,o,a+1,s))},f)})}})}var _i=function(t,e){let n=function Qu(t){let e=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);if(t)for(let n in t)t[n]&&e.set(n,t[n]);return e}(e&&e.headers);return La(t,{body:JSON.stringify(e.body),headers:n,method:gi.POST},e)};class cr extends E{constructor(){super("Web Payments SDK is not enabled for this application"),this.name="WebSdkDisabledError",Object.setPrototypeOf(this,cr.prototype)}}class In extends E{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,In.prototype)}}class ur extends E{constructor(e,n){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(n,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,ur.prototype)}}function Da(t){var n=Object.entries(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).map(r=>{var[i,o]=r;return"".concat(encodeURIComponent(i),"=").concat(encodeURIComponent(o))}).join("&");return encodeURI(t)+(n.length>0?"?".concat(n):"")}var Xu=new RegExp(/^[\w.-]+$/i),$u=new RegExp(/sq0at/i);function Ai(t){return A.env===t}function Ua(){return Ai(D.production)}var tl=xa(60),nl=Ma(60);function xa(t){return 1e3*t}function Ma(t){return t*tl}var nn={hoursToMs:function(t){return t*nl},minutesToMs:Ma,msToSeconds:function(t){return t/1e3},secondsToMs:xa},rl=/^_/g,il=/(?!^)([A-Z])/g,ol=/[\s_]+(?=[A-Za-z])/g,al=new Set(["BIF","DJF","GNF","JPY","KMF","KRW","PYG","RWF","UGX","UYI","VND","VUV","XAF","XOF","XPF"]),sl=new Set(["JOD","KWD","LYD","OMR","TND"]);function Ii(t){var e=t.toUpperCase();return al.has(e)?0:sl.has(e)?3:2}var Q,M,qe,fe,cl={convertLocaleToUnderscore:function(t){return t.replace(/-/,"_")},cssProperty:function(t){return t.replace(rl,"-").replace(il," $1").replace(ol,"-").toLowerCase()},delay:function(t){return new Promise(e=>setTimeout(e,t))},formatCSSKeyValuePair:function(t,e){return"".concat(t,": ").concat(e,";")},fromEntries:function(t){return t.reduce((e,n)=>{var[r,i]=n;return Object.assign({},e,{[r]:i})},{})},enumValues:function(t){return Object.keys(t).map(e=>t[e]).filter(function(e){return"string"==typeof e})},isInstanceOf:function(t,e){return e.some(function(n){return t instanceof n})},isStaging:function(){return Ai(D.staging)},isProduction:Ua,isValidUrl:function(t){try{return new URL(t),!0}catch{return!1}},requestId:function(){return Date.now()+Number.parseFloat(Math.random().toFixed(8))},url:Da,versionedUrl:function(t){return Da(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},paymentRequestAmountToMoneyAmount:function(t,e){var n=Math.pow(10,Ii(e));return Math.trunc(Math.round(Number(t)*n))},moneyAmountToPaymentRequestAmount:function(t,e){var n=Ii(e);return(t/Math.pow(10,n)).toFixed(n)},moneyAmountToInternationalizedCurrency:function(t,e,n){var r=Ii(e),i=t/Math.pow(10,r);return new Intl.NumberFormat(n,{currency:e,style:"currency"}).format(i)}},z=cl;class lr extends E{constructor(e,n,r){if(r){var i=document.getElementById(r);super("Messenger has not received an acknowledgement of message ".concat(e," with id ").concat(n," from iframe id=").concat(r," which ").concat(void 0!==i?.src?"exists":"does not exist"))}else super("Messenger has not received an acknowledgement of message ".concat(e," with id ").concat(n,", no iframeID was set"));this.name="InternalMessengerTimeoutError",Object.setPrototypeOf(this,lr.prototype)}}function ka(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ha(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ka(Object(n),!0).forEach(function(r){ul(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ul(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}(fe=Q||(Q={})).CanUseOverrideStrings="can_use_override_strings",fe.CanUseWebSDK="can_use_websdk",fe.CanUseInterac="can_use_interac",fe.CanUsePaymentsUI="can_use_payments_ui",fe.PostalCodeLeadingSpaceExperiment="postal_code_leading_space_experiment",fe.PaymentsUICanUseCard="payments_ui_can_use_card",fe.PaymentsUICanUseCashApp="payments_ui_can_use_cash_app",fe.PaymentsUICanUseApplePay="payments_ui_can_use_apple_pay",fe.PaymentsUICanUseGooglePay="payments_ui_can_use_google_pay",fe.PaymentsUICanUseAchPlaid="payments_ui_can_use_ach_plaid",fe.PaymentsUICanUseBnplA="payments_ui_can_use_bnpl_a",fe.PaymentsUICanUseGiftCard="payments_ui_can_use_gift_card",fe.CanUseBNPLA="can_use_bnpl_a",fe.CanUsePlaidOAuth="can_use_plaid_oauth",fe.RecordErrorMetrics="record_error_metrics",function(t){t.Control="C",t.TreatmentA="T1"}(M||(M={})),function(t){t.LEGACY_IMPLEMENTATION="LEGACY_IMPLEMENTATION",t.PREFER_OAUTH_FLOW="PREFER_OAUTH_FLOW",t.ENFORCE_OAUTH_FLOW="ENFORCE_OAUTH_FLOW"}(qe||(qe={}));var Fa,Ci,ll=A.SENTRY_DSN;class dl{constructor(e){var n,r={beforeSend:(a,s)=>{if(!e.enableErrorLogging)return console.error(a.exception),null;if(!s)return a;var c=s.originalException;if(void 0!==this.featureFlagHandler&&this.featureFlagHandler.isActive(Q.RecordErrorMetrics)){var u=c?.toString();_i(A.METRICS_ERROR_URL,{body:{sdk_version:A.VERSION,error_message:u||""}}).catch(()=>{})}return c instanceof E?Ha(Ha({},a),{},{fingerprint:[c.name]}):a},dsn:ll,environment:e.environment,release:"web-payments-sdk@".concat(A.VERSION),transport:e.transport};n=e.useGlobalHandlers?new tn.GlobalHandlers:new tn.GlobalHandlers({onerror:!1,onunhandledrejection:!1});var i=[new ta,new jo,new tn.TryCatch,new tn.Breadcrumbs,n,new tn.LinkedErrors,new tn.UserAgent];r.integrations=i;var o=new Mu(r);this.hub=new tr(o),this.hub.configureScope(a=>{a.setTag("applicationId",e.applicationId),a.setTag("applicationUrl",e.applicationUrl),a.setTag("source",e.sourceName),a.setTag("version",e.version),e.sessionId&&a.setTag("sessionId",e.sessionId)}),e.useGlobalHandlers&&Xr(this.hub)}setFeatureFlagHandler(e){this.featureFlagHandler=e}setAvt(e){this.hub.setUser({id:e}),this.hub.configureScope(n=>{n.setTag("avt",e)})}setSessionId(e){this.hub.configureScope(n=>{n.setTag("sessionId",e)})}setInstanceId(e){this.hub.configureScope(n=>{n.setTag("instanceId",e)})}captureException(e,n,r,i){z.isInstanceOf(e,[vi,An,lr])||this.hub.withScope(o=>{r&&o.setTag("sessionId",r),n&&o.setTag("instanceId",n),i&&Object.entries(i).forEach(a=>{var[s,c]=a;o.setTag(s,c)}),this.hub.captureException(e)})}wrap(e){if(Object.prototype.hasOwnProperty.call(e,"__inner__"))return e;var n=this.captureException.bind(this);function r(i){try{for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];return e.apply(i,a)}catch(c){throw n(c),c}}return r.__inner__=e,r}}(function(t){t.INVALID_APPLICATION_ID="INVALID_APPLICATION_ID",t.INVALID_CARD_NUMBER="INVALID_CARD_NUMBER",t.INVALID_CVV="INVALID_CVV",t.INVALID_EXPIRATION_DATE="INVALID_EXPIRATION_DATE",t.INVALID_POSTAL_CODE="INVALID_POSTAL_CODE",t.INVALID_SANDBOX_CARD_NUMBER="INVALID_SANDBOX_CARD_NUMBER",t.INVALID_STAGING_CARD_NUMBER="INVALID_STAGING_CARD_NUMBER",t.MISSING_APPLICATION_ID="MISSING_APPLICATION_ID",t.MISSING_CARD_DATA="MISSING_CARD_DATA",t.UNKNOWN="UNKNOWN",t.UNSUPPORTED_CARD_BRAND="UNSUPPORTED_CARD_BRAND"})(Fa||(Fa={})),function(t){t.UNKNOWN="UNKNOWN"}(Ci||(Ci={}));var ja,pl={[Ci.UNKNOWN]:{message:"An unknown error has occurred",type:"UNKNOWN"}};!function(t){t.EXPIRED_PLAID_SESSION="EXPIRED_PLAID_SESSION",t.INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID="INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID",t.UNKNOWN="UNKNOWN"}(ja||(ja={}));var Ba,xt,K,N,De,Mt,qa,Ga,_,X,oe,Je,ge,Si,Va,Ya,za,Ka,Ue,Ge,kt,Ie,dr,Et,Ht,hl={EXPIRED_PLAID_SESSION:{message:"The plaid session was expired. Please try again.",type:"EXPIRED_PLAID_SESSION"},INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID:{message:"Invalid plaid bank account id selected",type:"INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"}},ml={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"},UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};!function(t){t.INVALID_VALUE="INVALID_VALUE",t.MISSING_LOCATION_ID_OR_NAME="MISSING_LOCATION_ID_OR_NAME",t.NOT_FOUND="NOT_FOUND",t.UNKNOWN="UNKNOWN"}(Ba||(Ba={}));class pr extends E{constructor(){super("You cannot call `tokenize` when using an `onTokenize` callback"),this.name="AfterpayOnTokenizeListenerError",Object.setPrototypeOf(this,pr.prototype)}}class hr extends E{constructor(e,n){super("This instance of ".concat(e," is missing the ").concat(n," listener.")),this.name="PaymentMethodMissingListener",Object.setPrototypeOf(this,hr.prototype)}}class Cn extends E{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("The payment request used for Afterpay/Clearpay caused a failure",e),this.errors=e,this.name="AfterpayRequestError",Object.setPrototypeOf(this,Cn.prototype)}}class Sn extends E{constructor(){super("The amount is outside of the merchant's Afterpay payment limits."),this.name="AfterpayAmountOutsideLimitsError",Object.setPrototypeOf(this,Sn.prototype)}}class mr extends E{constructor(){super("The currency provided is not supported for use with Afterpay/Clearpay"),this.name="AfterpayUnsupportedCurrencyError",Object.setPrototypeOf(this,mr.prototype)}}class fr extends E{constructor(){super("Afterpay/Clearpay is not enabled for this merchant."),this.name="AfterpayMerchantError",Object.setPrototypeOf(this,fr.prototype)}}class rn extends E{constructor(e){super(e),this.name="AfterpayInvalidPaymentRequestError",Object.setPrototypeOf(this,rn.prototype)}}class Ft extends E{constructor(e){var n=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(n," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,Ft.prototype)}}class Ze extends E{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(n=>{var[r,i]=n;return'expected property: "'.concat(r,'" of type "').concat(i,'"')}).join("\n");super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(e)),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,Ze.prototype)}}class on extends E{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(n=>{var[r,i]=n;return'expected property: "'.concat(r,'" of type "').concat(i,'"')}).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,on.prototype)}}class an extends E{constructor(e,n){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(n)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,an.prototype)}}class Ce extends E{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,Ce.prototype)}}class On extends E{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,On.prototype)}}class Pn extends E{constructor(){super("Something went wrong and Plaid was not properly initialized"),this.name="PlaidUninitializedError",Object.setPrototypeOf(this,Pn.prototype)}}class Tn extends E{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,Tn.prototype)}}(Et=xt||(xt={})).FOCUS_CLASS_ADDED="focusClassAdded",Et.FOCUS_CLASS_REMOVED="focusClassRemoved",Et.ERROR_CLASS_ADDED="errorClassAdded",Et.ERROR_CLASS_REMOVED="errorClassRemoved",Et.CARD_BRAND_CHANGED="cardBrandChanged",Et.POSTAL_CODE_CHANGED="postalCodeChanged",Et.ESCAPE="escape",Et.SUBMIT="submit",(dr=K||(K={})).CARD_NUMBER="cardNumber",dr.CVV="cvv",dr.EXPIRATION_DATE="expirationDate",dr.POSTAL_CODE="postalCode",(Ie=N||(N={})).CARD_INPUT="input",Ie.CARD_INPUT_FOCUS="input.is-focus",Ie.CARD_INPUT_PLACEHOLDER="input::placeholder",Ie.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",Ie.CARD_INPUT_ERROR="input.is-error",Ie.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",Ie.CARD_COMPONENT=".input-container",Ie.CARD_COMPONENT_FOCUS=".input-container.is-focus",Ie.CARD_COMPONENT_ERROR=".input-container.is-error",Ie.CARD_INPUT_HELPER_TEXT=".message-text",Ie.CARD_INPUT_HELPER_ICON=".message-icon",Ie.CARD_INPUT_ERROR_TEXT=".message-text.is-error",Ie.CARD_INPUT_ERROR_ICON=".message-icon.is-error",(De||(De={})).GIFT_CARD_NUMBER="giftCardNumber",(kt=Mt||(Mt={})).FOCUS_CLASS_ADDED="focusClassAdded",kt.FOCUS_CLASS_REMOVED="focusClassRemoved",kt.ERROR_CLASS_ADDED="errorClassAdded",kt.ERROR_CLASS_REMOVED="errorClassRemoved",kt.CARD_BRAND_CHANGED="cardBrandChanged",kt.ESCAPE="escape",kt.SUBMIT="submit",function(t){t.UNKNOWN="Unknown"}(qa||(qa={})),function(t){t.GIFT="Gift"}(Ga||(Ga={}));class sn extends E{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(K),...Object.values(De)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,sn.prototype)}}class gr extends E{constructor(e){super("Configuration property '".concat(e,"' is invalid")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,gr.prototype)}}class xe extends E{constructor(e,n,r){super("Configuration property '".concat(e,"' has an invalid value '").concat(n,"'.").concat(r?" ".concat(r,"."):"")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,xe.prototype)}}class Rn extends E{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,Rn.prototype)}}class wn extends E{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,wn.prototype)}}class Xe extends E{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,Xe.prototype)}}class ae extends E{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before a payment method can be tokenized")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,ae.prototype)}}class k extends E{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,k.prototype)}}class Nn extends E{constructor(e,n){var r=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(r," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...n].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,Nn.prototype)}}class Oi extends E{constructor(e,n){super("An element with one of the following conflicting IDs was found on the page: ".concat(n,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,Oi.prototype)}}class he extends E{constructor(e,n){var r=n||e?.field;super("Method unsupported: ".concat(e?.message).concat(r?" (field=".concat(r,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,he.prototype)}}class Pi extends E{constructor(e){super("The ".concat(e," feature is not enabled for this application.")),this.name="FeatureDisabledError",Object.setPrototypeOf(this,Pi.prototype)}}class _t extends E{constructor(e,n){super("".concat(e," is undefined after loading script ").concat(n,")")),this.name="ScriptLoaderError",Object.setPrototypeOf(this,_t.prototype)}}class jt extends E{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,jt.prototype)}}class Bt extends E{constructor(e,n){super("Invalid style value '".concat(n,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,Bt.prototype)}}class cn extends E{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,cn.prototype)}}class Me extends E{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,Me.prototype)}}class se extends E{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,se.prototype)}}class Y extends E{constructor(e){var n="An unexpected error occurred";e&&(n+=" while ".concat(e)),super("".concat(n,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,Y.prototype)}}(Ht=_||(_={})).APPLE_PAY="Apple Pay",Ht.AFTERPAY_CLEARPAY="AfterpayClearpay",Ht.CARD="Card",Ht.CASH_APP="Cash App",Ht.GOOGLE_PAY="Google Pay",Ht.GIFT_CARD="Gift Card",Ht.ACH="ACH",function(t){t.SHIPPING_CONTACT_CHANGED="shippingcontactchanged",t.SHIPPING_OPTION_CHANGED="shippingoptionchanged"}(X||(X={}));class Ti{constructor(e,n){this.type=e,this.detail=n,this.type=e,this.detail=n}}(function(t){t.UNKNOWN="Unknown",t.OK="OK",t.ERROR="Error",t.INVALID="Invalid",t.ABORT="Abort",t.CANCEL="Cancel"})(oe||(oe={})),function(t){t.BLACK="black",t.GREEN="mint",t.MINT="mint"}(Je||(Je={})),function(t){t.CheckoutWithAfterpay="checkout_with_afterpay",t.BuyNowWithAfterpay="buy_now_with_afterpay",t.PlaceOrderWithAfterpay="place_order_with_afterpay"}(ge||(ge={})),function(t){t.REVIEW_MY_ORDER="review_my_order",t.BUY_NOW="buy_now"}(Si||(Si={})),function(t){t.BLACK_ON_MINT="black-on-mint",t.BLACK_ON_WHITE="black-on-white",t.MINT_ON_BLACK="mint-on-black",t.WHITE_ON_BLACK="white-on-black"}(Va||(Va={})),function(t){t.XS="xs",t.SM="sm",t.MD="md",t.LG="lg"}(Ya||(Ya={})),function(t){t.CIRCLED_INFO_ICON="circled-info-icon",t.CIRCLED_QUESTION_ICON="circled-question-icon",t.LEARN_MORE_TEXT="learn-more-text",t.MORE_INFO_TEXT="more-info-text",t.NONE="none"}(za||(za={})),function(t){t.MINT="mint",t.WHITE="white"}(Ka||(Ka={})),function(t){t.AFTERPAY_SHIPPING_ADDRESS_CHANGED="afterpay_shippingaddresschanged",t.AFTERPAY_SHIPPING_OPTION_CHANGED="afterpay_shippingoptionchanged"}(Ue||(Ue={})),function(t){t.ON_TOKENIZATION="ontokenization",t.CLOSE_OAUTH="CLOSE_OAUTH",t.ERROR="ERROR",t.EXIT="EXIT",t.FAIL_OAUTH="FAIL_OAUTH",t.HANDOFF="HANDOFF",t.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",t.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",t.OPEN="OPEN",t.OPEN_MY_PLAID="OPEN_MY_PLAID",t.OPEN_OAUTH="OPEN_OAUTH",t.SEARCH_INSTITUTION="SEARCH_INSTITUTION",t.SELECT_BRAND="SELECT_BRAND",t.SELECT_INSTITUTION="SELECT_INSTITUTION",t.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",t.SUBMIT_MFA="SUBMIT_MFA",t.TRANSITION_VIEW="TRANSITION_VIEW"}(Ge||(Ge={}));var Wa,Qa,Ja,yr,vr,Er,un,bn,Ln,Ri,Za,fl=["borderColor","borderRadius","borderWidth"],Xa=["borderColor","borderWidth"],$a=["color"],es=["color"];(function(t){t.UNKNOWN="OTHER_BRAND",t.AMERICAN_EXPRESS="AMERICAN_EXPRESS",t.DINERS_CLUB="DISCOVER_DINERS",t.DISCOVER="DISCOVER",t.JCB="JCB",t.MASTERCARD="MASTERCARD",t.UNION_PAY="CHINA_UNIONPAY",t.VISA="VISA"})(Wa||(Wa={})),function(t){t.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",t.CREDIT="CREDIT",t.DEBIT="DEBIT"}(Qa||(Qa={})),function(t){t.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",t.NOT_PREPAID="NOT_PREPAID",t.PREPAID="PREPAID"}(Ja||(Ja={})),function(t){t.DEFAULT="default",t.BLACK="black",t.WHITE="white"}(yr||(yr={})),function(t){t.STATIC="static",t.FILL="fill"}(vr||(vr={})),function(t){t.LONG="long",t.SHORT="short"}(Er||(Er={})),function(t){t.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",t.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",t.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(un||(un={})),function(t){t.LIGHT="light",t.DARK="dark"}(bn||(bn={})),function(t){t.SQUARED="Squared",t.SEMIROUNDED="Semirounded",t.ROUNDED="Rounded"}(Ln||(Ln={})),function(t){t.GBP="GBP",t.USD="USD"}(Ri||(Ri={}));class Dn extends E{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,Dn.prototype)}}function ts(){return new se([ml.UNKNOWN])}!function(t){t.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",t.NOT_FOUND="NOT_FOUND",t.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",t.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",t.UNAUTHORIZED="UNAUTHORIZED",t.UNKNOWN="UNKNOWN"}(Za||(Za={}));var gl={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},yl={message:"The requested resource was not found.",type:"NOT_FOUND"},vl={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},El={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},_l={message:"Request not authorized.",type:"UNAUTHORIZED"},Al={message:"An unknown error has occurred",type:"UNKNOWN"};class $ extends E{constructor(e,n){var r=e;void 0!==n&&(r+=" (payment_method=".concat(n,")")),super(r),this.name="InternalError",Object.setPrototypeOf(this,$.prototype)}}class wi extends E{constructor(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=function(a){var{STATUS_CODE:s}=Be;switch(a){case s.UNAUTHORIZED:return _l;case s.NOT_FOUND:return yl;case s.TOO_MANY_REQUESTS:return El;case s.INTERNAL_SERVER_ERROR:return gl;case s.SERVICE_UNAVAILABLE:return vl;default:return Al}}(n);super("".concat(o.message," (message=").concat(r,"; url=").concat(e,")"),i),this.name="InternalHttpError",Object.setPrototypeOf(this,wi.prototype)}}class Ni extends E{constructor(e,n,r){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(n,"ms; url=").concat(r,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,Ni.prototype)}}class bi extends E{constructor(e,n){super("Invalid JSON received (status=".concat(n,"; url=").concat(e,")")),this.name="InternalInvalidJsonError",Object.setPrototypeOf(this,bi.prototype)}}class Li extends E{constructor(e,n,r){super("Network error during request (attempts=".concat(e,"; duration=").concat(n,"ms; url=").concat(r,")")),this.name="InternalNetworkError",Object.setPrototypeOf(this,Li.prototype)}}function ns(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Il(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g,B,R,_r,Di,$e,Ar,ln,x,_e,et,U,Cl=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ns(Object(n),!0).forEach(function(r){Il(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}({AfterpayAmountOutsideLimitsError:Sn,AfterpayInvalidPaymentRequestError:rn,AfterpayMerchantError:fr,AfterpayRequestError:Cn,AfterpayOnTokenizeListenerError:pr,AfterpayUnsupportedCurrencyError:mr,BrowserNotSupportedError:Rn,ElementNotFoundError:Ft,InvalidApplicationIdError:In,InvalidEventListenerCallbackError:an,InvalidInputStylePropertyError:jt,InvalidInputStyleValueError:Bt,InvalidOptionError:Ce,InvalidPaymentRequestError:Ze,InvalidPaymentRequestUpdateError:on,InvalidStylesError:Me,PaymentMethodAlreadyAttachedError:Xe,PaymentMethodAlreadyDestroyedError:k,PaymentMethodMissingListener:hr,PaymentMethodNotAttachedError:ae,PaymentMethodUnsupportedError:he,PlaidMissingNameError:On,PlaidUninitializedError:Pn,ScriptLoaderError:_t,SqError:E,TokenizationError:se,UnexpectedError:Y,VerifyBuyerError:Tn,WebSdkDisabledError:cr,WebSdkEmbedError:wn},{InternalError:$,InternalHttpError:wi,InternalInvalidJsonError:bi,InternalMessengerTimeoutError:lr,InternalNetworkError:Li,InternalTimeoutError:Ni,InternalValidationError:Dn}),Sl={AfterpayAmountOutsideLimitsError:Sn,AfterpayMerchantError:fr,AfterpayRequestError:Cn,AfterpayUnsupportedCurrencyError:mr,BrowserNotSupportedError:Rn,ElementNotFoundError:Ft,InvalidElementTypeError:Nn,InvalidEventListenerCallbackError:an,InvalidOptionError:Ce,InvalidPaymentRequestError:Ze,InvalidPaymentRequestUpdateError:on,PaymentMethodUnsupportedError:he,PlaidMissingNameError:On,PlaidUninitializedError:Pn,ScriptLoaderError:_t,TokenizationError:se,UnexpectedError:Y,VerifyBuyerError:Tn,WebSdkEmbedError:wn};(U=g||(g={})).AlipayPayStart="ALIPAY_PAY:START",U.AlipayPayOK="ALIPAY_PAY:OK",U.AlipayPayError="ALIPAY_PAY:ERROR",U.AttachStart="ATTACH:START",U.AttachOK="ATTACH:OK",U.AttachError="ATTACH:ERROR",U.BuildStart="BUILD:START",U.BuildOK="BUILD:OK",U.BuildError="BUILD:ERROR",U.CashAppAPICustomerStart="CASH_APP_API_CUSTOMER:START",U.CashAppAPICustomerOK="CASH_APP_API_CUSTOMER:OK",U.CashAppAPICustomerError="CASH_APP_API_CUSTOMER:ERROR",U.CashAppAuthStart="CASH_APP_AUTH:START",U.CashAppAuthOK="CASH_APP_AUTH:OK",U.CashAppAuthError="CASH_APP_AUTH:ERROR",U.FirstInteraction="FIRST_INTERACTION:OK",U.PaymentsUILoadFirstScreenStart="LOAD_FIRST_SCREEN:START",U.PaymentsUILoadFirstScreenOK="LOAD_FIRST_SCREEN:OK",U.PaymentsUITransitionToStart="TRANSITION_TO:START",U.PaymentsUITransitionToOK="TRANSITION_TO:OK",U.PaymentsUITransitionBackStart="TRANSITION_BACK:START",U.PaymentsUITransitionBackOK="TRANSITION_BACK:OK",U.GetProductInformationStart="GET_PRODUCT_INFORMATION:START",U.GetProductInformationOK="GET_PRODUCT_INFORMATION:OK",U.GetProductInformationError="GET_PRODUCT_INFORMATION:ERROR",U.InitializeStart="INITIALIZATION:START",U.InitializeOK="INITIALIZATION:OK",U.InitializeError="INITIALIZATION:ERROR",U.LoadOK="LOAD:OK",U.MainIframeOK="MAIN_IFRAME:OK",U.NonceStart="NONCE:START",U.NonceOK="NONCE:OK",U.NonceError="NONCE:ERROR",U.VerificationStart="VERIFICATION:START",U.VerificationOK="VERIFICATION:OK",U.VerificationError="VERIFICATION:ERROR",U.AchMissingRequiredOAuthParameters="ACH_MISSING_REQUIRED_OAUTH_PARAMETERS",(et=B||(B={})).ExternalSessionStart="EXTERNAL_SESSION:START",et.ExternalSessionOK="EXTERNAL_SESSION:OK",et.ExternalSessionError="EXTERNAL_SESSION:ERROR",et.ExternalSessionCancel="EXTERNAL_SESSION:CANCEL",et.ShippingAddressChangeOK="SHIPPING_ADDRESS_CHANGE:OK",et.ShippingOptionChangeOK="SHIPPING_OPTION_CHANGE:OK",et.AfterpayCreateCheckoutStart="AFTERPAY_CREATE_CHECKOUT:START",et.AfterpayCreateCheckoutOK="AFTERPAY_CREATE_CHECKOUT:OK",et.AfterpayCreateCheckoutError="AFTERPAY_CREATE_CHECKOUT:ERROR",function(t){t.Clear="CLEAR",t.ConfigUpdated="CONFIG_UPDATED",t.Configured="CONFIGURED",t.PaymentsUIConfigured="PAYMENTS_UI_CONFIGURED",t.Destroyed="DESTROYED",t.EventListenerAdded="EVENT_LISTENER_ADDED",t.Focused="FOCUSED",t.OverrideStrings="OVERRIDE_STRINGS",t.RecalculatedSize="RECALCULATED_SIZE",t.SetLocale="SET_LOCALE",t.SetError="SET_ERROR"}(R||(R={})),function(t){t.IframeMessengerTimeoutError="IFRAME_MESSENGER_TIMEOUT_ERROR"}(_r||(_r={})),(Di||(Di={})).ExperimentInteraction="EXPERIMENT_INTERACTION",function(t){t.CASH_APP_API_CUSTOMER="CASH_APP_API_CUSTOMER",t.CASH_APP_AUTH="CASH_APP_AUTH",t.GET_PRODUCT_INFORMATION="GET_PRODUCT_INFORMATION",t.LOAD="LOAD",t.MAIN_IFRAME="MAIN_IFRAME",t.NONCE="NONCE"}($e||($e={})),function(t){t.ATTACH="ATTACH",t.BUILD="BUILD",t.INITIALIZATION="INITIALIZATION"}(Ar||(Ar={})),function(t){t.START="START",t.OK="OK",t.ERROR="ERROR"}(ln||(ln={})),(_e=x||(x={})).Ach="ACH",_e.Afterpay="Afterpay",_e.Alipay="Alipay",_e.App="WebSDK",_e.ApplePay="Apple Pay",_e.Card="Card",_e.CashApp="Cash App",_e.CashAppPayV1="Cash App Pay V1",_e.GooglePay="Google Pay",_e.Masterpass="Masterpass",_e.GiftCard="Gift Card",_e.Fields="Fields",_e.PaymentRequest="Payment Request",_e.PaymentsUI="Payments UI";var At,dn={CARD_NONCE_ENDPOINT:new RegExp(A.CARD_NONCE_ENDPOINT),CASH_APP_API_CUSTOMER:new RegExp(A.CASH_APP_API_CUSTOMER),CASH_APP_AUTH_ENDPOINT:new RegExp(A.CASH_APP_AUTH_ENDPOINT),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(A.GET_PRODUCT_INFORMATION_ENDPOINT),LIBRARY_RESOURCE:new RegExp("".concat(A.ASSET_BASE_URL,"/([\\w\\d.-]*/)?square").concat(A.APPENDED_FILE_NAME,"\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(A.ASSET_URL,"/main-iframe").concat(A.APPENDED_FILE_NAME))};!function(t){t.navigation="navigation",t.fetch="fetch",t.iframe="iframe",t.script="script"}(At||(At={}));var Se,Ui,xi,Mi,ki,Hi,Ir,qt,Fi,Ol=new Set(Object.values(R)),Pl=new Set([g.InitializeOK,Di.ExperimentInteraction,_r.IframeMessengerTimeoutError]),Tl={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:"",toString:()=>""};function Rl(){if(v.windowLocation===v.windowParentLocation)return v.windowLocation;var t=v.documentReferrer;return t&&0!==t.length?(Se||(Se=document.createElement("a")),Se.href="".concat(t),{hash:Se.hash,host:Se.host,hostname:Se.hostname,href:Se.href,origin:Se.origin,pathname:Se.pathname,port:Se.port,protocol:Se.protocol,search:Se.search,toString(){return this.href}}):Tl}function rs(t,e){var n={};return Object.keys(t).forEach(r=>{n[r]="object"==typeof t[r]&&!Array.isArray(t[r])&&e[r]?rs(t[r],e[r]):e[r]||t[r]}),n}(function(t){t.ROUND="round",t.SEMIROUND="semiround"})(Ui||(Ui={})),function(t){t.MEDIUM="medium",t.SMALL="small"}(xi||(xi={})),function(t){t.DARK="dark",t.LIGHT="light"}(Mi||(Mi={})),function(t){t.FULL="full",t.STATIC="static"}(ki||(ki={})),(Fi=Hi||(Hi={})).CA="CA",Fi.GB="GB",Fi.US="US",function(t){t.en="en",t.ja="ja",t.fr="fr",t.es="es"}(Ir||(Ir={})),function(t){t.enUS="en-US",t.enIE="en-IE",t.enCA="en-CA",t.enGB="en-GB",t.enAU="en-AU",t.jaJP="ja-JP",t.frFR="fr-FR",t.frCA="fr-CA",t.esES="es-ES"}(qt||(qt={}));var ji={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus 4 pagos sin intereses",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un n\xfamero de tarjeta v\xe1lido.",cvvError:"Introduce un c\xf3digo de seguridad v\xe1lido.",expirationDateError:"Introduce una fecha de caducidad v\xe1lida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un c\xf3digo postal v\xe1lido.",GB:"Introduce un c\xf3digo postal v\xe1lido.",US:"Introduce un c\xf3digo postal v\xe1lido."}},helperText:{cardNumber:"Introduce tu n\xfamero de tarjeta",cvv:"Introduce el c\xf3digo de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el c\xf3digo postal",GB:"Introduce el c\xf3digo postal",US:"Introduce el c\xf3digo postal"}},placeholderText:{cardNumber:"N\xfamero de tarjeta",cvv:"C\xf3digo CVV",expirationDate:"MM/AA",postalCodes:{CA:"C\xf3digo postal",GB:"C\xf3digo postal",US:"C.P."}}},giftCards:{errors:{giftCardNumberError:"Introduce un n\xfamero de tarjeta regalo v\xe1lido."},helperText:{giftCardNumber:"Introduce el n\xfamero de tu tarjeta regalo"},placeholderText:{giftCardNumber:"Tarjeta regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de env\xedo que has seleccionado. Int\xe9ntalo de nuevo.",optionsError:"Se ha producido un error al procesar la opci\xf3n de env\xedo que has seleccionado. Int\xe9ntalo de nuevo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un num\xe9ro de carte valide.",cvvError:"Veuillez saisir un code de s\xe9curit\xe9 valide.",expirationDateError:"Veuillez saisir une date d\u2019expiration valide.",multipleErrors:"Corrigez les erreurs mises en \xe9vidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},helperText:{cardNumber:"Saisir votre num\xe9ro de carte",cvv:"Saisir le code de s\xe9curit\xe9",expirationDate:"Saisir la date d\u2019expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},placeholderText:{cardNumber:"Num\xe9ro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un num\xe9ro de carte-cadeau valide."},helperText:{giftCardNumber:"Saisir le num\xe9ro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte-cadeau"}},afterpay:{checkoutWidget:{title:"Vos quatre paiements sans int\xe9r\xeats",today:"Aujourd\u2019hui",weeks:"semaines"}},wallets:{callbackErrors:{contactError:"Une erreur s\u2018est produite lors du traitement du contact de livraison s\xe9lectionn\xe9. Veuillez r\xe9essayer.",optionsError:"Une erreur s\u2018est produite lors du traitement de l\u2018option d\u2018exp\xe9dition s\xe9lectionn\xe9e. Veuillez r\xe9essayer."}}}},"fr-FR":{paymentMethods:{afterpay:{checkoutWidget:{title:"Vos quatre paiements sans int\xe9r\xeats",today:"Aujourd\u2019hui",weeks:"semaines"}},cards:{errors:{cardNumberError:"Saisissez un num\xe9ro de carte valide",cvvError:"Veuillez saisir un code de s\xe9curit\xe9 valide.",expirationDateError:"Saisir une date d\u2019expiration valide",multipleErrors:"Corrigez les erreurs mises en \xe9vidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},helperText:{cardNumber:"Saisir votre num\xe9ro de carte",cvv:"Saisir le code de s\xe9curit\xe9",expirationDate:"Saisir la date d\u2019expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},placeholderText:{cardNumber:"Num\xe9ro de carte",expirationDate:"MM/AA",cvv:"CVV",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}}},giftCards:{errors:{giftCardNumberError:"Saisir un num\xe9ro de carte cadeau valide"},helperText:{giftCardNumber:"Saisir le num\xe9ro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s\u2018est produite lors du traitement du contact de livraison s\xe9lectionn\xe9. Veuillez r\xe9essayer.",optionsError:"Une erreur s\u2018est produite lors du traitement de l\u2018option d\u2018exp\xe9dition s\xe9lectionn\xe9e. Veuillez r\xe9essayer."}}}},"ja-JP":{paymentMethods:{afterpay:{checkoutWidget:{title:"\u7121\u5229\u606f\u306e4\u56de\u6255\u3044",today:"\u4eca\u65e5",weeks:"\u9031\u9593"}},cards:{errors:{cardNumberError:"\u6b63\u3057\u3044\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",cvvError:"\u6709\u52b9\u306a\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",expirationDateError:"\u6b63\u3057\u3044\u6709\u52b9\u671f\u9650\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",multipleErrors:"\u5f37\u8abf\u8868\u793a\u3055\u308c\u305f\u30a8\u30e9\u30fc\u3092\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002",postalCodeErrors:{CA:"\u6b63\u3057\u3044\u90f5\u4fbf\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",GB:"\u6709\u52b9\u306a\u90f5\u4fbf\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",US:"\u6b63\u3057\u3044ZIP\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}},helperText:{cardNumber:"\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",cvv:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",expirationDate:"\u6709\u52b9\u671f\u9650\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",postalCodes:{CA:"\u90f5\u4fbf\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",GB:"\u90f5\u4fbf\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",US:"ZIP\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}},placeholderText:{cardNumber:"\u30ab\u30fc\u30c9\u756a\u53f7",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"\u90f5\u4fbf\u756a\u53f7",GB:"\u90f5\u4fbf\u756a\u53f7",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"\u6709\u52b9\u306a\u30ae\u30d5\u30c8\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},helperText:{giftCardNumber:"\u30ae\u30d5\u30c8\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"},placeholderText:{giftCardNumber:"\u30ae\u30d5\u30c8\u30ab\u30fc\u30c9"}},wallets:{callbackErrors:{contactError:"\u9078\u629e\u3055\u308c\u305f\u914d\u9001\u4f4f\u6240\u3092\u51e6\u7406\u3059\u308b\u969b\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002",optionsError:"\u9078\u629e\u3055\u308c\u305f\u914d\u9001\u65b9\u6cd5\u3092\u51e6\u7406\u3059\u308b\u969b\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}}}}},is={en:qt.enUS,es:qt.esES,fr:qt.frFR,ja:qt.jaJP},wl=is[Ir.en];class Nl{constructor(e){this.currentLocale=wl,this.currentTranslations=ji[this.currentLocale],this.setLocale(e)}setTranslationOverrides(e){this.translationOverrides=e}setLocale(e){var n=this.getLanguageFromLocale(e),r=this.getRegionFromLocale(e),i=this.currentLocale;if(ji[e])this.currentLocale=e;else{if(!Ir[n])return{message:"Locale ".concat(e," is not supported. Language ").concat(n," and region ").concat(r," are both unsupported."),newLocale:this.currentLocale,previousLocale:i};this.currentLocale=is[n]}this.currentTranslations=ji[this.currentLocale];var o=this.getRegionFromLocale(this.currentLocale);return r&&o&&r.toLowerCase()!==o.toLowerCase()?{message:"Locale ".concat(e," is not supported. Language ").concat(n," is supported, but region ").concat(r," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:i}:{newLocale:this.currentLocale,previousLocale:i}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return this.translationOverrides?rs(this.currentTranslations,this.translationOverrides):this.currentTranslations}getLanguageFromLocale(e){return e.split("-")[0]}getRegionFromLocale(e){return e.split("-")[1]}}var tt="INVALID_VALUE",bl="SANITIZED",Ll=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),Dl=new Set(["includeInputLabels","postalCode","style"]),Ul=new Set(["includeInputLabels","style"]),xl=new Set(["lineItems","total","shippingOptions","shippingContact"]),Ml=new Set(["buttonColor","buttonSizeMode","buttonType"]),kl=new Set(["paymentRequestOptions","enableMethods","disableMethods","redirectURI","transactionId"]),Hl=new Set(["redirectURI","transactionId"]),os=new Set(["shape","size","values","width"]),Fl=ye(Ge),jl=ye(xt),Bl=ye(Mt),ql=ye(X),Gl=ye(K),Vl=ye(De),Yl=ye(qt),zl=ye(yr),Kl=ye(vr),Wl=ye(Er),Ql=ye(Ri),as=ye(xi),ss=ye(Ui),cs=ye(Mi),us=ye(ki);function ye(t){return new Set(Object.values(t))}function Bi(t){return JSON.stringify({value:t})}function Un(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};return Object.entries(t).forEach(o=>{var[a,s]=o;if(e.has(a)){var c=s;n.has(a)?c=bl:r[a]&&(c=r[a].has(s)?s:tt),i[a]=c}}),JSON.stringify(i)}function ls(t){return Un(t,kl,Hl)}function ds(t){return Un(t,os,void 0,{shape:ss,size:as,values:cs,width:us})}function qi(t,e){return null!=t.document.body&&null!==t.document.createNodeIterator(t.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:e}).nextNode()}function Gi(t,e){return Boolean(t.querySelector(e))}function Ve(t,e){return void 0!==t[e]}function pn(t,e){var n=v.windowPerformance;if(!n||"function"!=typeof n.getEntriesByType)return null;var i,o,a,s,r=(i=[...n.getEntriesByType("resource"),...n.getEntriesByType("navigation")],o=t,a=e,(s=i.filter(c=>c.initiatorType===o&&a.test(c.name)))[s.length-1]);return r?Math.round(function(i){return i.duration>0?i.duration:Math.max(Math.trunc(i.responseEnd-i.startTime),0)}(r)):null}function ps(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ps(Object(n),!0).forEach(function(r){$l(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nt,ed=A.METRICS_URL,ms=A.METRICS_V2_URL;class td{constructor(e,n){this.sdkVersion=A.VERSION,this.jsFramework="",this.applicationData=n,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1}setAvt(e){this.avt=e}logEvent(e,n,r,i,o){try{var a={origin:Rl().origin},s={innerHeight:v.windowInnerHeight,innerWidth:v.windowInnerWidth,language:v.windowNavigationLanguage},c=this.eventDuration(e,i),{event:u,eventSource:l,eventConfigurationValues:d,internalConfigurationValues:p}=e,h=this.sdkVersion,m=this.metricsSession(n,r,o),f={appLocation:a,avt:this.avt,browserData:s,event:u,eventSource:l,paymentMethodTrackingId:i,sdkVersion:h,session:m};void 0!==d&&Ol.has(u)&&(f.eventConfigurationValues=function(t,e,n){switch(t){case R.Configured:case R.ConfigUpdated:return function(r,i){switch(r){case x.Card:case x.GiftCard:return Un(i,r===x.Card?Dl:Ul);case x.GooglePay:return function(o){return Un(o,Ml,void 0,{buttonColor:zl,buttonSizeMode:Kl,buttonType:Wl})}(i);case x.PaymentRequest:return function(o){return Un(o,Ll,xl,{currencyCode:Ql})}(i);case x.PaymentsUI:return ls(i);case x.CashAppPayV1:return ds(i)}return tt}(e,n);case R.PaymentsUIConfigured:return ls(n);case R.Focused:return Bi(function(r,i){if("string"!=typeof i)return tt;switch(r){case x.Card:if(Gl.has(i))return i;break;case x.GiftCard:if(Vl.has(i))return i}return tt}(e,n));case R.SetLocale:return Bi("string"!=typeof(r=n)?tt:Yl.has(r)?r:tt);case R.EventListenerAdded:return Bi(function(r,i){if("string"!=typeof i)return tt;switch(r){case x.Ach:if(Fl.has(i))return i;break;case x.Card:if(jl.has(i))return i;break;case x.GiftCard:if(Bl.has(i))return i;break;case x.PaymentRequest:if(ql.has(i))return i}return tt}(e,n));default:return""}var r}(u,l,d)),void 0!==p&&Pl.has(j=u)&&(f.internalConfigurationValues=JSON.stringify(p)),c&&(f.duration=c),u===g.InitializeOK&&(f.jsFramework=this.getJSFrameworkValue());var P=!1;u!==g.NonceOK&&u!==R.Destroyed||(P=!0),this.postMetricsEvent(f,P)}catch(j){this.errorLogger.captureException(j)}var j}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(function(t){var e,p,n=Ve(t,"angular"),r=Gi(t.document,"[ng-version]")||Ve(t,"getAllAngularRootElements")||Ve(t,"getAngularVersion"),i=Ve(t,"bootstrap"),o=Ve(t,"Ember"),a=Ve(t,"jQuery"),s=Gi(t.document,'form[action*="paypal.com"]'),c=qi(t,function(h){return h.__k||h._component||h.__c?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),u=Gi((p=t).document,"*[data-reactroot]")||qi(p,function(m){return m._reactRootContainer?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),l=function(p){var h=Ve(p,"__NUXT__")||Ve(p,"$nuxt"),m=Ve(p,"__VUE__");return m||h?m||h:qi(p,function(f){return f.__vue__?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT})}(t),d={angular:r,angularJS:n,bootstrap:i,ember:o,jquery:a,nextJS:Ve(t,"__NEXT_DATA__")&&void 0!==(null===(e=t.__NEXT_DATA__)||void 0===e?void 0:e.buildId),paypalBuyNow:s,preact:c,react:u,vue:l};return z.fromEntries(Object.entries(d).filter(p=>{var[h,m]=p;return!0===m}))}(window))),this.jsFramework}eventDuration(e,n){var[r,i]=e.event.split(":");if(r in Ar){var o;if(r===Ar.INITIALIZATION?o=r:n&&(o="".concat(r,":").concat(n)),!o)return null;if(i===ln.START){var a=Date.now();return this.manualTelemetryStarts[o]=a,null}if(i===ln.OK||i===ln.ERROR){var s=this.manualTelemetryStarts[o];return void 0===s?null:(delete this.manualTelemetryStarts[o],Date.now()-s)}}return i!==ln.START&&r in $e?function(t){switch(t){case $e.CASH_APP_AUTH:return pn(At.fetch,dn.CASH_APP_AUTH_ENDPOINT);case $e.CASH_APP_API_CUSTOMER:return pn(At.fetch,dn.CASH_APP_API_CUSTOMER);case $e.GET_PRODUCT_INFORMATION:return pn(At.fetch,dn.GET_PRODUCT_INFORMATION_ENDPOINT);case $e.MAIN_IFRAME:return pn(At.navigation,dn.MAIN_IFRAME_RESOURCE);case $e.LOAD:return pn(At.script,dn.LIBRARY_RESOURCE);case $e.NONCE:return pn(At.fetch,dn.CARD_NONCE_ENDPOINT);default:return null}}(r):null}postMetricsEvent(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!this.disableBeacon&&v.windowNavigationBeacon&&v.documentVisibilityState?(this.metricsBuffer.push(e),n&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",()=>{"hidden"===v.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)}),this.currentInterval=window.setInterval(()=>{this.buildAndSendBeacon()},1e3))):_i(ed,{body:e}).catch(r=>{this.errorLogger.captureException(r)})}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon(ms,e)}catch(n){n instanceof TypeError&&"Illegal invocation"===n.message||this.errorLogger.captureException(n),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),_i(ms,{body:{metrics:this.metricsBuffer}}).catch(r=>{r instanceof An||this.errorLogger.captureException(r)})}this.metricsBuffer=[]}}metricsSession(e,n,r){return hs(hs({},this.applicationData),{},{instanceId:e,sessionId:n,paymentsUIInstanceId:r})}}!function(t){t.ACH="ACH",t.AFTERPAY="AFTERPAY",t.ALIPAY="ALIPAY",t.APPLE_PAY="APPLE_PAY",t.CASH_APP="CASH_APP",t.CASH_APP_PAY_V1="CASH_APP_PAY_V1",t.GOOGLE_PAY="GOOGLE_PAY"}(nt||(nt={}));var It,Ct,nd="INITIALIZE",Vi="UPDATE_SESSION",rd={[Q.CanUseWebSDK]:{false:M.Control,true:M.TreatmentA},[Q.CanUseInterac]:{false:M.Control,true:M.TreatmentA},[Q.CanUseOverrideStrings]:{false:M.Control,true:M.TreatmentA},[Q.PostalCodeLeadingSpaceExperiment]:{[M.Control]:M.Control,[M.TreatmentA]:M.TreatmentA},[Q.CanUsePlaidOAuth]:{[qe.LEGACY_IMPLEMENTATION]:qe.LEGACY_IMPLEMENTATION,[qe.PREFER_OAUTH_FLOW]:qe.PREFER_OAUTH_FLOW,[qe.ENFORCE_OAUTH_FLOW]:qe.ENFORCE_OAUTH_FLOW},[Q.CanUsePaymentsUI]:{false:M.Control,true:M.TreatmentA},[Q.PaymentsUICanUseCard]:{false:M.Control,true:M.TreatmentA},[Q.PaymentsUICanUseAchPlaid]:{false:M.Control,true:M.TreatmentA},[Q.PaymentsUICanUseApplePay]:{false:M.Control,true:M.TreatmentA},[Q.PaymentsUICanUseGooglePay]:{false:M.Control,true:M.TreatmentA},[Q.PaymentsUICanUseCashApp]:{false:M.Control,true:M.TreatmentA},[Q.PaymentsUICanUseBnplA]:{false:M.Control,true:M.TreatmentA},[Q.PaymentsUICanUseGiftCard]:{false:M.Control,true:M.TreatmentA},[Q.CanUseBNPLA]:{false:M.Control,true:M.TreatmentA},[Q.RecordErrorMetrics]:{false:M.Control,true:M.TreatmentA}};class id{constructor(e){this.featureFlagValues=e}isActive(e){return this.experimentGroup(e)!==M.Control}experimentGroup(e){return this.featureFlagValueExperimentGroup(e)}featureFlagValueExperimentGroup(e){return rd[e][this.featureFlagValues[e]]||M.Control}}(function(t){t.AFTERPAY="window.AfterPay",t.AFTERPAY_MESSAGING="window.Afterpay",t.ANALYTICS="window.Square.Analytics",t.GOOGLE="window.google.payments",t.PLAID="window.Plaid",t.CASH_APP_PAY="window.CashApp"})(It||(It={})),function(t){t.AFTERPAY="square-payments-afterpay-script",t.AFTERPAY_MESSAGING="square-payments-afterpay-messaging-script",t.ANALYTICS="square-payments-analytics-link-script",t.GOOGLE="square-payments-google-link-script",t.PLAID="square-payments-plaid-link-script",t.CASH_APP_PAY="square-payments-cash-app-pay-script"}(Ct||(Ct={}));var Cr={};function hn(t,e,n,r,i){var o=r();if(o)return Promise.resolve(o);if(Cr[e])return Cr[e];var a=document.createElement("script");return a.id=t,a.src=n,void 0!==i&&(a.type=i),Cr[e]=new Promise((s,c)=>{a.onload=()=>{var u=r();u?s(u):c(new _t(e,n))},a.onerror=()=>{c(new _t(e,n))}}),document.body.appendChild(a),Cr[e]}var Yi,sd=function(){return hn(Ct.ANALYTICS,It.ANALYTICS,A.ANALYTICS_PUBLIC_ENDPOINT,()=>{var t,e;return null===(t=window)||void 0===t||null===(e=t.Square)||void 0===e?void 0:e.Analytics})};function fs(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function gs(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){fs(o,r,i,a,s,"next",c)}function s(c){fs(o,r,i,a,s,"throw",c)}a(void 0)})}}var dd=nn.hoursToMs(2);function ys(t){var{applicationId:e,locationId:n}=t;return Yi||(Yi=sd().then(r=>new r(e,{locationId:n})))}function zi(){return zi=gs(function*(t){var e=yield ys(t);return new Promise(n=>{e.getToken(n)})}),zi.apply(this,arguments)}function Ki(){return Ki=gs(function*(t,e,n){var r=yield ys(t);return new Promise((i,o)=>{r.verifyBuyer(e,n,(a,s)=>{a?o(a):i(s)})})}),Ki.apply(this,arguments)}var Wi={getToken:function(t){return zi.apply(this,arguments)},resetLibraryCache:function(){Yi=void 0},verifyBuyer:function(t,e,n){return Ki.apply(this,arguments)}};function vs(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}var Es,Sr="LOCALE_CHANGED_EVENT";class pd extends class{constructor(e,n){this.errorLogger=e,this.messenger=n}}{constructor(e,n,r,i,o,a,s,c){super(e,n),this.session=i,this.localeStrings=a,this.paymentMethodSupportDetail=o,this.metricsHandler=r,this.eventTarget=s,this.featureFlagHandler=new id(c),this.featureFlagValues=c}addLocaleChangedListener(e){this.eventTarget.addEventListener(Sr,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(Sr,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}getLocaleString(){return this.localeStrings.getLocaleString()}setTranslationOverrides(e){this.localeStrings.setTranslationOverrides(e),this.session.setTranslationOverrides(e),this.eventTarget.dispatchEvent(Sr,this.localeStrings.getCurrentLocale()),this.messenger.sendOneWayMessage(Vi,{session:this.session.serialize()})}setLocale(e){var n=this.localeStrings.setLocale(e);if(n.previousLocale===n.newLocale)return n;var r=this.localeStrings.getCurrentLocale();return this.session.setLocale(r),this.eventTarget.dispatchEvent(Sr,r),this.messenger.sendOneWayMessage(Vi,{session:this.session.serialize()}),n}updateSession(e){var n,r=this;return(n=function*(){r.session.setSessionId(e);try{var i=yield Wi.getToken({applicationId:r.session.applicationId,locationId:r.session.locationId,websiteUrl:r.session.sourceUrl});r.session.setAnalyticsToken(i)}catch(o){r.session.locationId&&r.errorLogger.captureException(o,r.session.instanceId,r.session.sessionId)}yield r.messenger.sendOneWayMessage(Vi,{session:r.session.serialize()})},function(){var i=this,o=arguments;return new Promise(function(a,s){var c=n.apply(i,o);function u(d){vs(c,a,s,u,l,"next",d)}function l(d){vs(c,a,s,u,l,"throw",d)}u(void 0)})})()}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}setPaymentsUIInstanceId(e){this.session.setPaymentsUIInstanceId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}getPaymentsUIInstanceId(){return this.session.paymentsUIInstanceId}}function _s(){return"https://developer.squareup.com/docs/api/paymentform".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}function As(){return"https://developer.squareup.com/docs/payment-form/add-digital-wallets/apple-pay".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}!function(t){t.APPLE_PAY_BROWSER_NOT_SUPPORTED="APPLE_PAY_BROWSER_NOT_SUPPORTED",t.APPLE_PAY_DEVICE_NOT_SUPPORTED="APPLE_PAY_DEVICE_NOT_SUPPORTED",t.APPLE_PAY_NOT_REGISTERED="APPLE_PAY_NOT_REGISTERED",t.GOOGLE_PAY_BROWSER_NOT_SUPPORTED="GOOGLE_PAY_BROWSER_NOT_SUPPORTED",t.INVALID_CONFIG="INVALID_CONFIG",t.UNKNOWN="UNKNOWN",t.WALLET_NOT_REQUESTED="WALLET_NOT_REQUESTED"}(Es||(Es={}));var Qi,Oe={APPLE_PAY_BROWSER_NOT_SUPPORTED:{message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},APPLE_PAY_DEVICE_NOT_SUPPORTED:{message:"Device does not support Apple Pay.\nSee:".concat(As("#prerequisites-and-assumptions"),"."),type:"DEVICE_NOT_SUPPORTED"},APPLE_PAY_NOT_REGISTERED:{message:"No active card available in the Apple Wallet or domain not registered.",type:"NOT_REGISTERED"},GOOGLE_PAY_BROWSER_NOT_SUPPORTED:{message:"Browser does not support Google Pay. \nSee: ".concat(function(){return"https://developer.squareup.com/docs/payment-form/add-digital-wallets/google-pay".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}("#prerequsites-and-assumptions")),type:"BROWSER_NOT_SUPPORTED"},INVALID_CONFIG:{message:"Configuration is invalid.",type:"INVALID_CONFIG"},UNKNOWN:{message:"An unknown error has occurred.",type:"UNKNOWN"},WALLET_NOT_REQUESTED:{message:"Wallet is not specified in the payment request config.\nSee:".concat(_s("#paymentform-configurationfields")),type:"WALLET_NOT_REQUESTED"}};!function(t){t.COUNTRY_NOT_SUPPORTED="COUNTRY_NOT_SUPPORTED",t.APPLICATION_DISABLED="APPLICATION_DISABLED",t.MISSING_LOCATION_ID="MISSING_LOCATION_ID",t.UNVERIFIED_DOMAIN="UNVERIFIED_DOMAIN",t.NOT_ONBOARDED="NOT_ONBOARDED",t.US_AND_UK_MERCHANT_ONLY="US_AND_UK_MERCHANT_ONLY",t.US_MERCHANT_ONLY="US_MERCHANT_ONLY",t.INTERNAL_ERROR="INTERNAL_ERROR",t.DOMAIN_NOT_REGISTERED="DOMAIN_NOT_REGISTERED"}(Qi||(Qi={}));var hd={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: ".concat(_s("#paymentform-configurationfields")),type:"MISSING_LOCATION_ID"},NOT_ONBOARDED:{message:"Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method",type:"NOT_ONBOARDED"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's payment method status",type:"INTERNAL_ERROR"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: ".concat(As("#production-configuration")),type:"DOMAIN_NOT_REGISTERED"}};class Ye extends E{constructor(e,n,r){var i="".concat(e," was called with a missing or invalid parameter. '").concat(n,"' is required");r&&(i+=" and must be a(n) ".concat(r)),super("".concat(i,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,Ye.prototype)}}class Ji extends E{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,Ji.prototype)}}class Zi{constructor(){this.listeners={}}addEventListener(e,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(n)}removeEventListener(e,n){if(e in this.listeners)for(var r=this.listeners[e],i=0;i<r.length;i++)r[i]===n&&(r.splice(i,1),i--)}dispatchEvent(e,n){if(e in this.listeners)for(var r=new Ti(e,n),i=[...this.listeners[e]],o=0,a=i.length;o<a;o++)try{i[o](r)}catch(s){console.error(s)}}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}var Or,xn=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(t()+t(),"-").concat(t(),"-").concat(t(),"-").concat(t(),"-").concat(t()).concat(t()).concat(t())};!function(t){t.REQUEST_GOOGLE_PAY_CARD_NONCE="REQUEST_GOOGLE_PAY_CARD_NONCE",t.GENERATE_GOOGLE_PAY_AUTH_TOKEN="GENERATE_GOOGLE_PAY_AUTH_TOKEN"}(Or||(Or={}));class rt{constructor(e){this.eventTarget=new Zi,this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}get featureFlagHandler(){return this.context.featureFlagHandler}addEventListener(e,n){this.eventTarget.addEventListener(e,n)}hasEventListener(e){return this.eventTarget.hasEventListener(e)}removeEventListener(e,n){this.eventTarget.removeEventListener(e,n)}destroy(){return Promise.resolve()}detach(){return Promise.resolve()}dispatchEvent(e,n){this.eventTarget.dispatchEvent(e,n)}}var Mn,St,Pr={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};(function(t){t.CREATE_PLAID_LINK_SESSION="CREATE_PLAID_LINK_SESSION",t.CREATE_OAUTH_PLAID_LINK_SESSION="CREATE_OAUTH_PLAID_LINK_SESSION",t.REQUEST_ACH_BANK_NONCE="REQUEST_ACH_BANK_NONCE"})(Mn||(Mn={})),function(t){t.SUCCESS="SUCCESS",t.CANCEL="CANCEL"}(St||(St={}));class it{constructor(e){this.id=xn(),this.context=e}request(e,n){return this.context.messenger.request(e,{featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession(),body:n})}initializeMessageBus(e){var n=this,r=function(a,s){n.context.messenger.onMessage({listener(c){s(c)},messageType:"".concat(a,":").concat(n.id)})};for(var[i,o]of Object.entries(e))r(i,o)}}function Is(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.redirectURI)throw new Ce("redirectURI missing");if(!t.transactionId)throw new Ce("transactionId missing");if(e){if(!t.totalTransactionAmount)throw new Ce("totalTransactionAmount required");if(!Number.isInteger(t.totalTransactionAmount.amount)||t.totalTransactionAmount.amount<=0)throw new Ce("totalTransactionAmount.amount must be a positive integer")}}function kn(t,e){var n=t;return t instanceof E||(n=new E,e.captureException(t)),{errors:[n],status:oe.ERROR}}function Cs(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function Tr(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){Cs(o,r,i,a,s,"next",c)}function s(c){Cs(o,r,i,a,s,"throw",c)}a(void 0)})}}var Xi,Ss,Pe,ce,Os,$i,ot,Ps,md=["US"],fd=["auth"],gd=new Set(["en","es"]),Ts=new Set(["ITEM_ERROR"]);class yd extends rt{constructor(e,n,r){super(n),this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1,this.isDestroyed=!1,this.Plaid=e,this.paymentMessenger=new it(this.context);try{!function(i){if(i&&i.length>0){var o;try{o=new URL(i)}catch{throw new xe("redirectURI",i,"Must be a valid URI")}if([...o.searchParams.values()].length>0)throw new xe("redirectURI",i,"URI must not contain query parameters");return!0}throw new xe("redirectURI","".concat(i),"Must be a valid URI")}(r?.redirectURI)}catch(i){if(this.mustUseOAuth)throw i;console.warn(i.message)}try{!function(i){if(i&&i.length>0){if(i.length>50)throw new xe("transactionId",i,"String must be between 1 and 50 characters");return!0}throw new xe("transactionId","".concat(i),"String must be between 1 and 50 characters")}(r?.transactionId)}catch(i){if(this.mustUseOAuth)throw i;console.warn(i.message)}}tokenize(e){var n=this;return Tr(function*(){try{if(n.isDestroyed)throw new k(_.ACH);if(n.tokenizeInProgress)throw new se([Pr]);if(!e||!e.accountHolderName)throw new On;if(!n.hasEventListener(Ge.ON_TOKENIZATION)){var r="Add event listener for '".concat(Ge.ON_TOKENIZATION,"' before calling tokenize.");if(n.mustUseOAuth)throw new se([{message:r,type:"INVALID_CONFIGURATION"}]);console.warn("".concat(r," This will result in an error when using the Plaid OAuth flow."))}var i;n.tokenizeInProgress=!0,n.preferOAuth||n.mustUseOAuth?i=yield n.createOAuthPlaidLinkSession():(console.warn("Using deprecated Plaid Link session without OAuth, please initialize ACH with 'redirectURI' and 'transactionId', and provide an event listener for \"".concat(Ge.ON_TOKENIZATION,'".')),i=yield n.createPlaidLinkSession());var o=yield n.openPlaidLink(i.plaidLinkToken);if(o.status===St.SUCCESS&&o.publicToken&&o.selectedBankAccountId){var a=yield n.requestAchBankNonce(e.accountHolderName,o.publicToken,o.selectedBankAccountId,i.gringottsSessionToken);return n.dispatchEvent(Ge.ON_TOKENIZATION,{tokenResult:a}),a}var s={status:oe.CANCEL};return n.dispatchEvent(Ge.ON_TOKENIZATION,{tokenResult:s}),s}catch(c){throw n.dispatchEvent(Ge.ON_TOKENIZATION,{error:c}),c}})()}destroy(){return this.isDestroyed=!0,this.metricsHandler.logEvent(R.Destroyed),this.handler&&(this.handler.exit({force:!0}),this.handler.destroy(),this.deleteHandler()),Promise.resolve()}addEventListener(e,n){this.metricsHandler.logEvent(R.EventListenerAdded,e),super.addEventListener(e,n)}removeEventListener(e,n){super.removeEventListener(e,n)}get preferOAuth(){return Boolean(qe.PREFER_OAUTH_FLOW===this.featureFlagHandler.experimentGroup(Q.CanUsePlaidOAuth))}get mustUseOAuth(){return qe.ENFORCE_OAUTH_FLOW===this.featureFlagHandler.experimentGroup(Q.CanUsePlaidOAuth)}openPlaidLink(e){var n=this.errorLogger,r=this.session,i=this.metricsHandler;this.handleFirstInteraction();var o=new Promise((a,s)=>{var c=v.windowNavigationLanguage.split("-")[0];gd.has(c)||(c="en"),this.plaidHandler=this.Plaid.create({clientName:"Square, Inc.",countryCodes:md,env:A.PLAID_LINK_ENV,language:c,onEvent:(u,l)=>{u!==Ge.ERROR||Ts.has(l.error_type)||n.captureException(new $("PlaidErrorEvent: ".concat(JSON.stringify(l)),_.ACH),r.instanceId,r.sessionId),super.dispatchEvent(u,l)},onExit:(u,l)=>{u&&(i.logEvent(B.ExternalSessionError),Ts.has(u.error_type)||n.captureException(new $("PlaidErrorOnExit: ".concat(JSON.stringify(u),", Metadata: ").concat(l)),r.instanceId,r.sessionId)),this.tokenizeInProgress=!1,this.deleteHandler(),a({status:St.CANCEL})},onSuccess(u,l){if(!l||!l.accounts||!l.accounts[0]){i.logEvent(B.ExternalSessionError);var d=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(l)));return n.captureException(d,r.instanceId,r.sessionId),void s(d)}i.logEvent(B.ExternalSessionOK),a({publicToken:u,selectedBankAccountId:l.accounts[0].id,status:St.SUCCESS})},product:fd,token:e})});return i.logEvent(B.ExternalSessionStart),this.plaidHandler.open(),o}createPlaidLinkSession(){var e=this;return Tr(function*(){var n={createPlaidLinkSessionRequest:{clientId:e.session.applicationId}};try{return yield e.paymentMessenger.request(Mn.CREATE_PLAID_LINK_SESSION,n)}catch(r){throw e.tokenizeInProgress=!1,r}})()}createOAuthPlaidLinkSession(){var e=this;return Tr(function*(){var n=e.session;if(!n.locationId)throw new Y("locationId not defined when creating OAuth Plaid Link Session");var r=A.PLAID_OAUTH_REDIRECT_URI,i=v.windowNavigationLanguage.slice(0,2),o={createOAuthPlaidLinkSessionRequest:{clientId:n.applicationId,locationId:n.locationId,redirectUri:r,languageCode:i}};try{return yield e.paymentMessenger.request(Mn.CREATE_OAUTH_PLAID_LINK_SESSION,o)}catch(a){throw e.tokenizeInProgress=!1,a}})()}requestAchBankNonce(e,n,r,i){var o=this;return Tr(function*(){var a={accountHolderName:e,gringottsSessionToken:i,plaidPublicToken:n,selectedPlaidBankAccountId:r},s=o.session,c={bankNonceRequest:{clientId:s.applicationId,paymentMethodTrackingId:o.context.getPaymentMethodTrackingId(),plaidLinkData:a,sessionId:s.sessionId,websdkVersion:A.VERSION,websiteUrl:s.sourceUrl}};try{var u=yield o.paymentMessenger.request(Mn.REQUEST_ACH_BANK_NONCE,c);return o.deleteHandler(),o.tokenizeInProgress=!1,yield o.context.updateSession(u.sessionId),o.context.setPaymentMethodTrackingId(u.paymentMethodTrackingId),o.wasFirstInteractionCalled=!1,{details:{bankAccount:u.accountDetails,method:_.ACH},status:oe.OK,token:u.bankNonce}}catch(l){throw o.deleteHandler(),o.tokenizeInProgress=!1,l instanceof se?l:new se([hl.UNKNOWN])}})()}get plaidHandler(){if(!this.handler){var e=new $("The plaid handler was not properly created.",_.ACH);throw this.errorLogger.captureException(e,this.session.instanceId,this.session.sessionId),new Pn}return this.handler}set plaidHandler(e){this.handler=e}deleteHandler(){delete this.handler}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(g.FirstInteraction))}}function Rs(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}!function(t){t.REQUEST_ALIPAY_PAY="REQUEST_ALIPAY_PAY"}(Xi||(Xi={}));class vd extends rt{constructor(e,n){if(super(e),this.paymentMethodMessenger=new it(this.context),!this.session.locationId)throw new Ce("locationId must be provided for Alipay");if(this.locationId=this.session.locationId,Is(n,!0),this.redirectUri=n.redirectURI,this.totalTransactionAmount=n.totalTransactionAmount,n.transactionId.length>64)throw new Ce("transactionId too long. Should be less than ".concat(64," characters."));this.transactionId=n.transactionId}tokenize(){var e,n=this;return(e=function*(){try{var r=yield n.fetchRedirectActionForm();return n.redirect(r),new Promise(()=>{})}catch(i){return kn(i,n.context.errorLogger)}},function(){var r=this,i=arguments;return new Promise(function(o,a){var s=e.apply(r,i);function c(l){Rs(s,o,a,c,u,"next",l)}function u(l){Rs(s,o,a,c,u,"throw",l)}c(void 0)})})()}fetchRedirectActionForm(){return this.paymentMethodMessenger.request(Xi.REQUEST_ALIPAY_PAY,{client_id:this.session.applicationId,location_id:this.locationId,redirect_uri:this.redirectUri,total_transaction_amount:{amount:this.totalTransactionAmount.amount,currency_code:this.totalTransactionAmount.currencyCode},transaction_id:this.transactionId})}redirect(e){var n="alipay_".concat(this.transactionId),r=document.createElement("form");if(r.setAttribute("id",n),r.setAttribute("action",e.redirect_url),r.setAttribute("method",e.method),r.setAttribute("style","display:none"),e.parameters.length>0){var i=JSON.parse(e.parameters);Object.keys(i).forEach(o=>{var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",o),a.setAttribute("value",i[o]),r.appendChild(a)})}v.documentBody.appendChild(r),v.submitForm(r)}}(Pe=Ss||(Ss={})).UNKNOWN="unknown",Pe.AMERICAN_EXPRESS="americanExpress",Pe.DISCOVER="discover",Pe.DISCOVER_DINERS="discoverDiners",Pe.JCB="JCB",Pe.MASTER_CARD="masterCard",Pe.UNION_PAY="unionPay",Pe.VISA="visa",Pe.SQUARE_GIFT_CARD_V2="squareGiftCardV2",Pe.INTERAC="interac",Pe.SQUARE_CAPITAL_CARD="squareCapitalCard",Pe.EFTPOS="eftpos",(ot=ce||(ce={})).CARD_BRAND_CHANGED="cardBrandChanged",ot.ERROR_CLASS_ADDED="errorClassAdded",ot.ERROR_CLASS_REMOVED="errorClassRemoved",ot.FOCUS_CLASS_ADDED="focusClassAdded",ot.FOCUS_CLASS_REMOVED="focusClassRemoved",ot.POSTAL_CODE_CHANGED="postalCodeChanged",ot.SET_POSTAL_COUNTRY="setPostalCountry",ot.ESCAPE="escape",ot.SUBMIT="submit",($i=Os||(Os={})).ERROR="error",$i.FOCUS="focus",$i.UNKNOWN="unknown",(Ps||(Ps={})).THIRD_PARTY_GIFT_CARD="thirdPartyGiftCard";class at{constructor(e){this.options=e}format(e){for(var n=e.split(""),r="",i=0;n.length>0;)r+=this.options.delimiterPositions.includes(i)?this.options.delimiter:n.shift(),i+=1;return r}}class ze{constructor(e){this.options=e}format(e){var n=e;return void 0!==this.options.regexp&&void 0!==this.options.replacement&&(n=e.replace(this.options.regexp,this.options.replacement)),n.slice(0,this.options.maxLength)}}class eo{getName(){return"LuhnValdator"}isValid(e){var n=String(e).replace(/\D/g,"");if(!n)return!1;for(var r=0,i=!1,o=n.length-1;o>=0;o--){var a=Number.parseInt(n.charAt(o),10);r+=i?eo.luhnDigits[a]:a,i=!i}return r%10==0}}eo.luhnDigits=[0,2,4,6,8,1,3,5,7,9];var st=new RegExp(/\D/g);new ze({maxLength:15,regexp:st,replacement:""}),new ze({maxLength:19,regexp:st,replacement:""}),new ze({maxLength:14,regexp:st,replacement:""}),new ze({maxLength:16,regexp:st,replacement:""}),new ze({maxLength:16,regexp:st,replacement:""}),new ze({maxLength:16,regexp:st,replacement:""}),new ze({maxLength:16,regexp:st,replacement:""}),new ze({maxLength:19,regexp:st,replacement:""}),new ze({maxLength:16,regexp:st,replacement:""}),new ze({maxLength:255,regexp:new RegExp(/[^\dA-Za-z]/g),replacement:""}),new at({delimiter:" ",delimiterPositions:[4,11]}),new at({delimiter:" ",delimiterPositions:[4,9,14]}),new at({delimiter:" ",delimiterPositions:[4,11]}),new at({delimiter:" ",delimiterPositions:[4,9,14]}),new at({delimiter:" ",delimiterPositions:[4,9,14]}),new at({delimiter:" ",delimiterPositions:[4,9,14]}),new at({delimiter:" ",delimiterPositions:[4,9,14]}),new at({delimiter:" ",delimiterPositions:[4,9,14]}),new at({delimiter:" ",delimiterPositions:[4,9,14]});var Hn="sq-focus",Fn="sq-error",jn=".".concat(Hn),ct=".".concat(Fn),to="::placeholder";new $("IFrame does not exist");var Ed=["top","right","bottom","left"],_d=/^\d+\/\d+$/,Ad=/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,Id=/^-\d*\.?\d+em$/,Cd=/^-\d*\.?\d+pt$/,Sd=/^-\d*\.?\d+px$/,Od=/^\d*\.?\d+em$/,Pd=/^\d*\.?\d+%$/,Td=/^\d*\.?\d+pt$/,Rd=/^\d*\.?\d+px$/,wd=/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,Nd=/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,bd=/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/,Ld=/\s(?![^(]*\))/,ws=new Set(["screen","all","print","speech"]),Ns=new Set(["and"]),Dd=new Set(["not","only"]),Ud=new Set(["portrait","landscape"]),xd=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),Md=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),kd=new Set([100,200,300,400,500,600,700,800,900]),Hd=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),Fd=new Set(["normal"]),jd=new Set(["smaller","larger"]),Bd=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","square sans text","tahoma","times","times new roman","trebuchet ms","verdana"]),qd=new Set(["none","antialiased","subpixel-antialiased"]),Gd=new Set(["grayscale","auto"]),Vd=new Set(["none"]);function Yd(t){return null!=t&&t.split(/, ?(?![^(]*\))/).every(e=>function(n){if(null==n)return!1;if("none"===n)return!0;var r=n.split(/ (?![^(]*\))/),i=0;if("inset"===r[0]&&(r.shift(),i++),"inset"===r[r.length-1]){if(i>0)return!1;r.pop()}for(var o=0;o<2;o++){var a=r.shift();if(void 0===a||!Zd(a))return!1}switch(r.length){case 0:return!0;case 1:return Rr(r[0])||no(r[0]);case 2:return no(r[0])&&(Rr(r[1])||bs(r[1]));case 3:return no(r[0])&&bs(r[1])&&Rr(r[2]);default:return!1}}(e))}function zd(t){return["border-box","content-box"].includes(t)}function Kd(t){return t.split(" ").every(e=>{return n=e,0===Number(n)||ut(n)||lt(n);var n})}function Wd(t){var e=t.split(" ");return!(0===e.length||e.length>4)&&e.every(Qd)}function Qd(t){return 0===Number(t)||ut(t)||lt(t)}function Jd(t){return 0===Number(t)||ut(t)||lt(t)||Ls(t)||Ds(t)}function Zd(t){return 0===Number(t)||ro(t)||io(t)}function bs(t){return 0===Number(t)||ro(t)||io(t)}function no(t){return 0===Number(t)||ut(t)||lt(t)}function Rr(t){return null!=t&&(Md.has(t.toLowerCase())||Ad.test(t)||function(e){return Nd.test(e)}(t)||function(e){return bd.test(e)}(t))}function Xd(t){return null!=t&&(xd.has(t.toLowerCase())||jd.has(t.toLowerCase())||ut(t)||oo(t)||lt(t)||wr(t))}function $d(t){return null!==t&&t.split(", ").every(e=>{return n=e.toLowerCase().trim().replace(/["']+/g,""),Bd.has(n);var n})}function ep(t){var e=Number(t);return Number.isNaN(e)?Hd.has(t.toLowerCase()):kd.has(e)}function tp(t){return"normal"===t||io(t)||oo(e=t)||Cd.test(e)||ro(t);var e}function np(t){var e=Number(t);return!Number.isNaN(e)&&e>=0||Fd.has(t)||lt(t)||ut(t)||oo(t)||wr(t)}function rp(t){return qd.has(t)}function ip(t){return Gd.has(t)}function op(t){return Vd.has(t)}function ap(t){if(null===t)return!1;var e=t.toString().split(" ");return!(e.length>4)&&e.every(n=>{return ut(r=n)||lt(r)||wr(r)||0===Number(r);var r})}function sp(t){if(!t.startsWith("(")||!t.endsWith(")"))return!1;var e=t.slice(1,-1),[n,r]=e.split(/: */);switch(n){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return ut(r)||lt(r)||wr(r);case"resolution":case"min-resolution":case"max-resolution":return wd.test(r);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return _d.test(r);case"color":case"color-index":case"monochrome":return void 0===r;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(i){return Number(i)>=0}(r);case"orientation":return function(i){return Ud.has(i)}(r);default:return!1}}function ro(t){return ut(t)||Ls(t)}function ut(t){return Rd.test(t)}function Ls(t){return Sd.test(t)}function io(t){return lt(t)||Ds(t)}function lt(t){return Od.test(t)}function Ds(t){return Id.test(t)}function oo(t){return Td.test(t)}function wr(t){return Pd.test(t)}var cp=function(t,e){var n=(i=>{switch(i){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return Rr;case"-webkit-box-shadow":case"box-shadow":return Yd;case"box-sizing":return zd;case"font-family":return $d;case"font-size":return Xd;case"font-weight":return ep;case"letter-spacing":return tp;case"line-height":return np;case"padding":return ap;case"-webkit-font-smoothing":return rp;case"-moz-osx-font-smoothing":return ip;case"display":return op;case"border-radius":return Kd;case"border-width":return Wd;case"top":case"bottom":case"left":case"right":return Jd;case"width":return function(o){return o};default:return}})(t);return n&&n(e)||["unset","inherit","revert","initial"].includes(e)?e:""},Us=function(t){return!!(e=t).startsWith("@media")&&e.slice(7,e.length).split(/, */).every(n=>{var r=n.split(Ld);if(0===r.length)return!1;var i=0;if(!r[0].startsWith("(")){var o=0;if(Dd.has(r[0])&&(o=1),r.length===o+1)return ws.has(r[o]);if(!ws.has(r[o])||!Ns.has(r[o+1]))return!1;i=2+o}if((r.length-i)%2==0)return!1;for(var[a,s]of Object.entries(r.slice(i)))if(!(Number(a)%2==0?sp(s):Ns.has(s)))return!1;return!0});var e};function xs(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n.length>0&&!n.includes(t))throw new jt(t);var o=z.cssProperty(t),a=cp(o,e);if(0===a.length)throw new Bt(t,e);return r&&(a+=" !important"),z.formatCSSKeyValuePair(o,a)}function up(t,e,n){var r=[],i=[],o=new Set(t.excludeProperties||[]);for(var[a,s]of Object.entries(e))if(!o.has(a)){var c=s||"";try{r.push(xs(a,c,n))}catch(u){i.push(u)}}if(i.length>0)throw new Me(i);return t.toSelectors.reduce(function(u,l){return Object.assign({},u,{[l]:r})},{})}function lp(t,e,n){var r={},i=[];if(t.forEach(function(o){var{property:a,setAsImportant:s,toProperty:c,toSelectors:u,transformPropertyValue:l}=o,d=e[a];if(d){var p=l?l(d):d;try{var h=xs(c||a,p,c?[...n,c]:n,s);u.forEach(m=>{r[m]||(r[m]=[]),r[m].push(h)})}catch(m){i.push(m)}}}),i.length>0)throw new Me(i);return r}var Ms=function(t,e){var n=e.split(" ");switch(n.length){case 1:return n[0];case 2:switch(t){case"top":case"bottom":return n[0];default:return n[1]}case 3:switch(t){case"top":return n[0];case"bottom":return n[2];default:return n[1]}case 4:switch(t){case"top":return n[0];case"right":return n[1];case"bottom":return n[2];case"left":return n[3];default:return""}default:return""}},hp=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],a=[...Object.keys(n.selectorMappings),...Object.keys(n.selectorPropertyMappings||{})],s=new Set(a),c=new Set(Object.values(r));Object.keys(e).forEach(ee=>{c.has(ee)||function pp(t,e){return!e&&Us(t)}(ee,i)||o.push(new cn(ee))});var u={};function l(ee){for(var[He,Tt]of Object.entries(ee))u[He]||(u[He]=[]),u[He].push(...Tt)}for(var d of[...s]){var p,h=e[d],m=n.allowedAttributes[d]||[],f=n.selectorMappings[d]||[],P=(null==n||null===(p=n.selectorPropertyMappings)||void 0===p?void 0:p[d])||[];if(h){try{l(up(f,h,m))}catch(ee){ee instanceof Me&&o.push(...ee.errors)}try{l(lp(P,h,m))}catch(ee){ee instanceof Me&&o.push(...ee.errors)}}}if(Object.keys(e).filter(ee=>!s.has(ee)&&Us(ee)).forEach(ee=>{try{var He=t(e[ee],n,r,!0);u[ee]=[He]}catch(Tt){o.push(...Tt.errors)}}),o.length>0)throw new Me(o);return function dp(t){var e=[];for(var[n,r]of Object.entries(t))r&&r.length>0&&e.push("\n      ".concat(n," { ").concat(r.join(" ")," }\n      "));return e.join("")}(u)},ao="sq-card-iframe-container",so="sq-card-wrapper",co="sq-card-component",ks="sq-card-message",Nr="sq-card-message-error",br="sq-card-message-no-error",Lr="sq-visible",Dr=".".concat(so),mp=".".concat(co),Ur=".".concat(ao),fp="".concat(Dr).concat(jn),gp="".concat(Dr).concat(ct),yp="".concat(Dr," ").concat(mp),uo="".concat(Dr," ").concat(Ur),vp="".concat(fp," ").concat(Ur),Ep="".concat(gp," ").concat(Ur),Gt="input",Bn="form",lo=".sq-background-text",po=".sq-visible-background-text",Fs=".sq-card-message-error::before",js=".sq-card-message-no-error::before",Vt="".concat(Ur).concat("::before"),xr="".concat(Bn).concat(jn),ho="".concat(Bn).concat(ct),_p=("".concat(xr," ").concat(Gt),"".concat(Gt).concat(ct),"".concat(xr," ").concat(Gt).concat(to),"".concat(ho," ").concat(Gt).concat(ct).concat(to),"".concat(Bn," ").concat(Gt).concat(to),"".concat(Bn," ").concat(lo)),Bs=("".concat(_p," ").concat(po),"".concat(xr," ").concat("label"),"".concat(ho," ").concat(Gt).concat(ct," ~ ").concat("label"),"".concat(xr," ").concat(lo," ").concat(po),"".concat(ho," ").concat(Gt).concat(ct," ~ ").concat(lo," ").concat(po),"".concat(Bn," ").concat("#card-number-wrapper"),["borderWidth"]);function Ap(t){var e=["".concat(t).concat(ct," ").concat(Vt),"".concat(t).concat(jn," ").concat(Vt)];return Ed.map(n=>{return{property:"borderWidth",toProperty:n,toSelectors:e,transformPropertyValue:(r=n,function(i){var o=Ms(r,i);return"0"===o[0]?o:"-".concat(o)})};var r})}function qs(t,e){return hp(t,(r="#".concat(e),{allowedAttributes:{[N.CARD_COMPONENT]:fl,[N.CARD_COMPONENT_FOCUS]:Xa,[N.CARD_COMPONENT_ERROR]:Xa,[N.CARD_INPUT_HELPER_TEXT]:$a,[N.CARD_INPUT_HELPER_ICON]:es,[N.CARD_INPUT_ERROR_TEXT]:$a,[N.CARD_INPUT_ERROR_ICON]:es},selectorMappings:{[N.CARD_COMPONENT]:{toSelectors:["".concat(r).concat(uo)]},[N.CARD_COMPONENT_FOCUS]:{excludeProperties:Bs,toSelectors:["".concat(r).concat(vp)]},[N.CARD_COMPONENT_ERROR]:{excludeProperties:Bs,toSelectors:["".concat(r).concat(Ep)]},[N.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(r," ").concat(".sq-card-message-no-error")]},[N.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(r," ").concat(js)]},[N.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(r," ").concat(".sq-card-message-error")]},[N.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(r," ").concat(Fs)]}},selectorPropertyMappings:{[N.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(r).concat(uo)]}],[N.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(r," ").concat(Vt),"".concat(r).concat(yp)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(r).concat(uo)],transformPropertyValue:i=>{return o=i,a=["left","right"].map(s=>{var c=Ms(s,o);return"0"===c&&(c="0px"),c}).join(" + "),"calc(100% - (".concat(a,"))");var o,a}},...Ap(r)],[N.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(r).concat(ct," ").concat(Vt)]},{property:"borderWidth",toSelectors:["".concat(r).concat(ct," ").concat(Vt)]}],[N.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(r).concat(jn," ").concat(Vt)]},{property:"borderWidth",toSelectors:["".concat(r).concat(jn," ").concat(Vt)]}],[N.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(r," ").concat(Fs)]}],[N.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(r," ").concat(js)]}]}}),N);var r}var mo="background-text";"sq-".concat(mo),"sq-hidden-".concat(mo),"sq-visible-".concat(mo),"0".repeat(24),"0".repeat(4),"0".repeat(4);var Ot,Ip=[jt,Bt,cn,Me,Xe,Y],Gs=[ae,cn,jt,Bt,Me];!function(t){t.ANALYTICS_TOKEN="_analyticsToken",t.LOCALE="_locale",t.SESSION_ID="_sessionId",t.TRANSLATION_OVERRIDES="_translationOverrides",t.PAYMENTS_UI_INSTANCE_ID="_paymentsUIInstanceId"}(Ot||(Ot={}));class Cp{constructor(e){var{applePayMerchantIdentifier:n,cashAppPayMerchantIdentifier:r,applicationId:i,avt:o,hostname:a,locationId:s,instanceId:c,sessionId:u,sourceUrl:l,locale:d,paymentsUIInstanceId:p}=e;this.applicationId=i,this.locationId=s,this._sessionId=u,this.instanceId=c,this.applePayMerchantIdentifier=n,this.cashAppPayMerchantIdentifier=r,this.hostname=a,this.sourceUrl=l,this._locale=d,this.avt=o,this._paymentsUIInstanceId=p}setSessionId(e){this.setAttribute(Ot.SESSION_ID,e)}setTranslationOverrides(e){this.setAttribute(Ot.TRANSLATION_OVERRIDES,e)}setLocale(e){this.setAttribute(Ot.LOCALE,e)}setPaymentsUIInstanceId(e){this.setAttribute(Ot.PAYMENTS_UI_INSTANCE_ID,e)}get paymentsUIInstanceId(){return this._paymentsUIInstanceId}get sessionId(){return this._sessionId}setAnalyticsToken(e){this.setAttribute(Ot.ANALYTICS_TOKEN,e)}get analyticsToken(){return this._analyticsToken}serialize(){return this.serialized||(this.serialized={applePayMerchantIdentifier:this.applePayMerchantIdentifier||"",cashAppPayMerchantIdentifier:this.cashAppPayMerchantIdentifier||"",applicationId:this.applicationId,avt:this.avt,hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,sessionId:this._sessionId,sourceUrl:this.sourceUrl},this._analyticsToken&&(this.serialized.analyticsToken=this._analyticsToken),this._translationOverrides&&(this.serialized.translationOverrides=this._translationOverrides),this._paymentsUIInstanceId&&(this.serialized.paymentsUIInstanceId=this._paymentsUIInstanceId)),this.serialized}setAttribute(e,n){(this.isValueString(n)||e===Ot.TRANSLATION_OVERRIDES)&&(this[e]=n),this.serialized=void 0}isValueString(e){return"string"==typeof e}}var dt,Vs=[se,ae],fo=function(t,e){var n=document.createElement("iframe");return new Promise((r,i)=>{n.onerror=o=>{i(o)},n.onload=()=>{r(n)},Object.entries(t).forEach(o=>{var[a,s]=o;n.setAttribute(a,s)}),e?e.appendChild(n):document.body.appendChild(n)})},Ys=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)};!function(t){t.CONFIGURE="configure",t.DESTROY="destroy",t.LOAD_CARDS_FORM="loadCardsForm",t.REQUEST_CARD_NONCE_IF_VALID_FORM="requestCardNonceIfValidForm",t.SET_FOCUS="setFocus",t.CLEAR="clear",t.SET_ERROR="setError"}(dt||(dt={}));var Sp=new Set(["DIV","SPAN"]),Op=new Set(["DIV","SPAN"]),Pp=new Set(["DIV","SPAN","BUTTON"]);function go(t,e){var n;if("string"==typeof t){var r=document.querySelector(t);if(!r)throw new Ft(t);n=r}else{if(!(t instanceof HTMLElement))throw new Nn(t,e);if(n=t,!document.contains(n))throw new Ft(n)}if(!e.has(n.nodeName))throw new Nn(n,e);return n}function yo(t){return go(t,Sp)}function vo(t){return go(t,Pp)}var zs={addStyleElement:function(t,e,n,r){if(zs.hasExistingStyleElement(e))n&&n();else{var i=document.createElement("link");n&&(i.onload=n),r&&(i.onerror=o=>{r(new Error("Failed to load stylesheet at ".concat(t,". The onerror callback was invoked.")))}),i.href=t,i.rel="stylesheet",i.type="text/css",i.id=e,document.head.appendChild(i)}},hasExistingStyleElement:function(t){return Boolean(document.getElementById(t))}},qn=zs;function Ks(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ws(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ks(Object(n),!0).forEach(function(r){Tp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ks(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qs(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function pt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){Qs(o,r,i,a,s,"next",c)}function s(c){Qs(o,r,i,a,s,"throw",c)}a(void 0)})}}var Js="emptyMessage",Rp=[K.CARD_NUMBER,K.EXPIRATION_DATE,K.CVV,K.POSTAL_CODE];function Zs(t){return"".concat("single-card-wrapper","-").concat(t)}function Xs(t,e){var i,n=(i=e,"".concat("sq-single-card-custom-styles","-").concat(i)),r=document.getElementById(n);null===r&&((r=document.createElement("style")).id=n,document.head.appendChild(r)),r.innerHTML=qs(t,Zs(e))}var Gn,wp=class extends rt{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.postalCountry=Hi.US,this.attached=!1,this.destroyed=!1,this.id=xn(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new it(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(e.includeInputLabels),this.initializeMessageBus(),this.errorList=new Set,this.updateCardDetailText=this.updateCardDetailText.bind(this),this.context.addLocaleChangedListener(this.updateCardDetailText),this.validateOptions(e),this.initialOptions=e,this.stylesLoadedPromise=new Promise((n,r)=>{this.resolveStylePromise=n,this.rejectStylePromise=r})}configure(){var t=arguments,e=this;return pt(function*(){var n=t.length>0&&void 0!==t[0]?t[0]:{};if(e.destroyed)throw new k(_.CARD);if(!e.attached)throw new ae(_.CARD);e.validateOptions(n),e.metricsHandler.logEvent(R.ConfigUpdated,n),void 0!==n.includeInputLabels&&(e.inputLabelsIncluded=Boolean(n.includeInputLabels),e.onResize()),void 0!==n.style&&Xs(n.style,e.id);try{return yield e.paymentMessenger.request(dt.CONFIGURE,{includeInputLabels:e.inputLabelsIncluded,postalCode:n.postalCode,style:n.style,type:_.CARD}),Promise.resolve()}catch(r){throw z.isInstanceOf(r,Gs)?r:(e.errorLogger.captureException(r,e.session.instanceId,e.session.sessionId),new Y("configuring the Card Element"))}})()}destroy(){var t=this;return pt(function*(){if(t.destroyed)throw new k(_.CARD);if(t.attachPromise)try{yield t.attachPromise}catch{}t.destroyed=!0,t.attached=!1,t.context.removeLocaleChangedListener(t.updateCardDetailText),t.metricsHandler.logEvent(R.Destroyed);var e=yield t.paymentMessenger.request(dt.DESTROY);return t.element&&(Ys(t.element),window.removeEventListener("resize",t.onResize.bind(t))),e})()}attach(t){var e=this;return pt(function*(){if(e.destroyed)throw new k(_.CARD);if(e.attached)throw new Xe(_.CARD);var n;e.attached=!0,e.metricsHandler.logEvent(g.AttachStart),e.metricsHandler.logEvent(R.Configured,e.initialOptions);try{n=yo(t)}catch(r){throw e.metricsHandler.logEvent(g.AttachError),r}try{return e.attachPromise=e.buildElementOnIframe(n),yield e.attachPromise,e.attachPromise=void 0,e.destroyed?Promise.reject(new k(_.CARD)):(e.element=n,window.addEventListener("resize",e.onResize.bind(e)),e.showCardElement(),e.onResize(),e.metricsHandler.logEvent(g.AttachOK),Promise.resolve())}catch(r){throw e.attached=!1,e.metricsHandler.logEvent(g.AttachError),z.isInstanceOf(r,Ip)?r:(e.errorLogger.captureException(r,e.session.instanceId,e.session.sessionId),new Y("attaching the Card Element"))}})()}focus(t){var e=this;return pt(function*(){if(e.destroyed)throw new k(_.CARD);if(!e.attached)throw new ae(_.CARD);if(!Object.values(K).includes(t))throw new sn(t);e.metricsHandler.logEvent(R.Focused,t);try{return yield e.paymentMessenger.request(dt.SET_FOCUS,{field:t})}catch(n){e.errorLogger.captureException(n,e.session.instanceId,e.session.sessionId)}return!1})()}clear(){var t=this;return pt(function*(){if(t.destroyed)throw new k(_.CARD);if(!t.attached)throw new ae(_.CARD);try{return yield t.paymentMessenger.request(dt.CLEAR)}catch(e){t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId)}return t.metricsHandler.logEvent(R.Clear),!1})()}addEventListener(t,e){if(this.destroyed)throw new k(_.CARD);this.metricsHandler.logEvent(R.EventListenerAdded,t),super.addEventListener(t,e)}removeEventListener(t,e){if(this.destroyed)throw new k(_.CARD);super.removeEventListener(t,e)}tokenize(){var t=this;return pt(function*(){if(t.destroyed)throw new k(_.CARD);if(!t.attached)throw new ae(_.CARD);if(t.tokenizeInProcess)throw new se([Pr]);t.tokenizeInProcess=!0;try{var e=yield t.paymentMessenger.request(dt.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:_.CARD});return t.tokenizeInProcess=!1,t.context.setPaymentMethodTrackingId(e.paymentMethodTrackingId),yield t.context.updateSession(e.sessionId),function(n){var{card:r,billingContact:i,cardNonce:o}=n;return{details:{card:r,method:_.CARD,billing:i},status:oe.OK,token:o}}(e)}catch(n){if(t.tokenizeInProcess=!1,n instanceof Dn)return{errors:n.errors,status:oe.INVALID};throw z.isInstanceOf(n,Vs)?n:(t.errorLogger.captureException(n,t.session.instanceId,t.session.sessionId),ts())}})()}recalculateSize(){if(this.destroyed)throw new k(_.CARD);if(!this.attached)throw new ae(_.CARD);this.metricsHandler.logEvent(R.RecalculatedSize),this.onResize()}setError(t){var e=this;return pt(function*(){if(e.destroyed)throw new k(_.CARD);if(!e.attached)throw new ae(_.CARD);if(!Object.values(K).includes(t))throw new sn(t);e.metricsHandler.logEvent(R.SetError,t);try{return yield e.paymentMessenger.request(dt.SET_ERROR,{field:t})}catch(n){e.errorLogger.captureException(n,e.session.instanceId,e.session.sessionId)}return!1})()}buildElementOnIframe(t){var e=this;return pt(function*(){yield e.buildCardElement(t),yield e.paymentMessenger.request(dt.LOAD_CARDS_FORM,{configuration:Ws(Ws({},e.initialOptions),{},{type:_.CARD}),iframeName:e.iframeName}),yield e.stylesLoadedPromise})()}validateOptions(t){var e={includeInputLabels:n=>"boolean"==typeof n,postalCode:n=>"string"==typeof n,style:n=>"object"==typeof n};Object.entries(t).forEach(n=>{var[r,i]=n;if(void 0===e[r])throw new gr(r);if(e[r]&&!e[r](i))throw new xe(r,i)})}buildErrorMessage(t){switch(t){case K.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError;case K.CVV:return this.context.getLocaleString().paymentMethods.cards.errors.cvvError;case K.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError;case K.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry];default:return""}}buildHelperMessage(t){switch(t){case K.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber;case K.CVV:return this.context.getLocaleString().paymentMethods.cards.helperText.cvv;case K.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate;case K.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry];default:return""}}updateCardDetailText(){var t,e,n;this.cardDetail&&(0===this.errorList.size?(t=null!==(n=this.focusedInput)&&void 0!==n?n:Js,e=this.buildHelperMessage(t),this.cardDetail.classList.remove(Nr),this.cardDetail.classList.add(br)):(t=Rp.find(r=>this.errorList.has(r))||Js,e=this.buildErrorMessage(t),this.cardDetail.classList.add(Nr),this.cardDetail.classList.remove(br)),this.cardDetail.textContent!==e&&(this.cardDetail.textContent=e),e.length>0?this.cardDetail.classList.add(Lr):this.cardDetail.classList.remove(Lr))}addErrorMessage(t){this.errorList.add(t),this.updateCardDetailText()}removeErrorMessage(t){this.errorList.has(t)&&(this.errorList.delete(t),this.updateCardDetailText())}addFocusMessage(t){this.focusedInput=t,this.updateCardDetailText()}removeFocusMessage(t){this.focusedInput===t&&(this.focusedInput=null),setTimeout(()=>{null===this.focusedInput&&this.updateCardDetailText()},50)}removeFocusClass(){setTimeout(()=>{var t;this.focusedInput||null===(t=this.wrapperElement)||void 0===t||t.classList.remove(Hn)},50)}removeErrorClass(){var t;0===this.errorList.size&&(null===(t=this.wrapperElement)||void 0===t||t.classList.remove(Fn))}handleInputEvent(t){var e,n,{data:r}=t,i=r.payload.body;switch(i.eventType){case xt.ERROR_CLASS_ADDED:this.addErrorMessage(i.field),null===(e=this.wrapperElement)||void 0===e||e.classList.add(Fn);break;case xt.ERROR_CLASS_REMOVED:this.removeErrorMessage(i.field),this.removeErrorClass();break;case xt.FOCUS_CLASS_ADDED:this.addFocusMessage(i.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Hn);break;case xt.FOCUS_CLASS_REMOVED:this.removeFocusMessage(i.field),this.removeFocusClass()}super.dispatchEvent(i.eventType,i)}handleSetPostalCountry(t){var{data:e}=t;this.postalCountry=e.payload.body.postalCountry}initializeMessageBus(){var t=this.handleInputEvent.bind(this),e=this.handleSetPostalCountry.bind(this);this.paymentMessenger.initializeMessageBus({[ce.SET_POSTAL_COUNTRY]:e,[ce.FOCUS_CLASS_ADDED]:t,[ce.FOCUS_CLASS_REMOVED]:t,[ce.ERROR_CLASS_ADDED]:t,[ce.ERROR_CLASS_REMOVED]:t,[ce.CARD_BRAND_CHANGED]:t,[ce.POSTAL_CODE_CHANGED]:t,[ce.SUBMIT]:t,[ce.ESCAPE]:t})}buildCardIframe(t){return fo({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:A.SINGLE_CARD_IFRAME,width:"100%"},t)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}buildCardElement(t){var e=this;return pt(function*(){var n;e.wrapperElement=document.createElement("div"),e.wrapperElement.id=Zs(e.id),e.wrapperElement.classList.add(so),e.hideCardElement(),e.cardDetail=document.createElement("span"),e.cardDetail.classList.add(ks),t.appendChild(e.wrapperElement),e.iframeContainer=document.createElement("div"),e.iframeContainer.classList.add(ao),e.wrapperElement.appendChild(e.iframeContainer),e.iframe=yield e.buildCardIframe(e.iframeContainer),e.iframe.classList.add(co),e.wrapperElement.appendChild(e.cardDetail),qn.addStyleElement(A.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",e.resolveStylePromise,e.rejectStylePromise),null!==(n=e.initialOptions)&&void 0!==n&&n.style&&Xs(e.initialOptions.style,e.id)})()}onResize(t){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,!this.currentResizeTimeout)){var e=n=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var r=this.inputLabelsIncluded?62:48;n<=482&&(r=2*r+1),this.iframeContainer.style.height="".concat(Math.round(r),"px"),this.iframe.height="".concat(Math.round(r),"px")}};e(this.lastResizeWidth||0),this.currentResizeTimeout=window.setTimeout(()=>{e(this.lastResizeWidth||0),this.currentResizeTimeout=void 0},100)}}};function Np(t){return{detail:"Received an error in redirectURI coming back from Cash App",message:"Received an error in redirect from Cash App: ".concat(t),type:"UNKNOWN"}}!function(t){t.REQUEST_CASH_APP_AUTH="REQUEST_CASH_APP_AUTH",t.REQUEST_CASH_APP_CUSTOMER="REQUEST_CASH_APP_CUSTOMER",t.REQUEST_CASH_APP_CREATE_WALLET_TOKEN="REQUEST_CASH_APP_CREATE_WALLET_TOKEN"}(Gn||(Gn={}));var Mr=["state","code","access_token"],Up=new Set(["iPhone Simulator","iPod Simulator","iPhone","iPod"]),Vn={CASH_APP_OAUTH_PARAMS:Mr,extractCashAppParamsFromURI:function(t,e){var n=new URL(t),r=0,i=[];Mr.forEach(a=>{n.searchParams.get(a)&&(r++,i.push(a),n.searchParams.delete(a))});var o=n.searchParams.get("error");return o&&n.searchParams.delete("error"),!o&&r>0&&r!==Mr.length&&e.captureException(new $("redirectURI: removed [".concat(i.toString(),"] but not all of Cash App OAuth params [").concat(Mr.toString(),"]"))),n.toString()},findAndRemoveQueryParams:function(t,e){var n={};if(!window.URLSearchParams)return n;var r=new URLSearchParams(t),i=e.length,o=0;if(e.forEach(u=>{n[u]=r.get(u),n[u]&&o++}),i===o){var a=new URLSearchParams(t);e.forEach(u=>{a.delete(u)});var s="?".concat(a.toString()),c=v.windowHash;c&&(s+="".concat(c)),v.replaceWindowState(s)}return n},isIOS:function(){return Up.has(window.navigator.platform)||/iPhone|iPod/.test(navigator.userAgent)&&"ontouchend"in document}};class kr extends E{constructor(){super("Cash Client: QR Code Image URL is not valid"),this.name="InvalidQrCodeUrlError",Object.setPrototypeOf(this,kr.prototype)}}function $s(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function ec(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){$s(o,r,i,a,s,"next",c)}function s(c){$s(o,r,i,a,s,"throw",c)}a(void 0)})}}class xp{constructor(){this.stylesLoadedPromise=new Promise((e,n)=>{this.resolveStylePromise=e,this.rejectStylePromise=n}),qn.addStyleElement(A.CASH_APP_STYLES,"sq-cash-app-styles",this.resolveStylePromise,this.rejectStylePromise)}createCashAppButton(e){var n=this;return ec(function*(){yield n.stylesLoadedPromise;var i=document.createElement("button"),o=document.createElement("img");return o.setAttribute("src","data:image/svg+xml,%3Csvg width='143' height='22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M13.027 2c2.008 0 3.012 0 4.092.342a4.247 4.247 0 012.54 2.539C20 5.96 20 6.965 20 8.973v6.054c0 2.008 0 3.012-.342 4.092a4.247 4.247 0 01-2.539 2.54C16.04 22 15.035 22 13.027 22H6.973c-2.008 0-3.012 0-4.092-.342A4.247 4.247 0 01.34 19.12C0 18.04 0 17.035 0 15.027V8.973c0-2.008 0-3.012.342-4.092A4.248 4.248 0 012.88 2.34C3.96 2 4.965 2 6.973 2h6.054z' fill='%2300D64F'/%3E%3Cg clip-path='url(%23clip0)'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.411 8.757c.967 0 1.894.391 2.5.929a.38.38 0 00.525-.01l.72-.732a.376.376 0 00-.017-.547 5.695 5.695 0 00-1.931-1.086l.226-1.076a.377.377 0 00-.37-.455h-1.392a.377.377 0 00-.369.299l-.204.957C8.25 7.128 6.68 8.05 6.68 9.946c0 1.64 1.298 2.344 2.668 2.83 1.297.487 1.982.667 1.982 1.352 0 .703-.684 1.117-1.694 1.117-.92 0-1.885-.303-2.633-1.04a.376.376 0 00-.528-.002l-.774.764a.38.38 0 00.002.542c.604.586 1.368 1.01 2.24 1.248l-.212.997a.378.378 0 00.366.456l1.395.01a.377.377 0 00.372-.3l.201-.958c2.216-.137 3.572-1.341 3.572-3.104 0-1.622-1.351-2.307-2.992-2.866-.937-.343-1.748-.577-1.748-1.28 0-.684.757-.955 1.514-.955z' fill='%23fff'/%3E%3C/g%3E%3Cpath d='M37.316 8.99l.942-.592c.296-.192.365-.436.156-.715-1.167-1.585-2.858-2.352-4.775-2.352-3.572 0-6.03 2.631-6.03 6.43 0 3.834 2.458 6.466 6.083 6.466 2.091 0 3.677-.89 4.792-2.458.192-.296.122-.54-.174-.714l-.959-.558c-.278-.157-.522-.104-.714.157-.662.924-1.603 1.499-2.928 1.499-2.283 0-3.694-1.795-3.694-4.392 0-2.561 1.394-4.356 3.66-4.356 1.202 0 2.195.47 2.91 1.429.209.261.453.33.731.156zm8.91 9.01h1.045c.331 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.75 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.238.174-3.242.558-3.242 2.806 0 1.812 1.308 2.84 3.19 2.84 1.272 0 2.073-.453 2.63-1.185v.488c0 .314.193.488.524.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.651 2.248l-.505.592c-.209.262-.209.523.052.75.924.749 2.179 1.167 3.643 1.167 2.422 0 3.955-1.185 3.955-3.102 0-1.812-1.394-2.44-3.59-2.823-1.028-.174-2.056-.314-2.056-1.046 0-.662.732-.906 1.569-.906.906 0 1.742.297 2.335.715.261.209.523.209.732-.053l.488-.575c.226-.261.226-.522-.053-.731-.784-.593-1.934-1.098-3.415-1.098-1.987 0-3.73.854-3.73 2.875 0 1.934 1.639 2.492 3.329 2.788 1.603.28 2.265.418 2.265 1.116 0 .766-.732 1.08-1.707 1.08-.872 0-1.813-.227-2.562-.802-.279-.209-.54-.209-.75.053zM59.76 18h1.167c.331 0 .523-.192.523-.523v-4.67c0-1.394.906-2.23 2.091-2.23 1.255 0 1.569.888 1.569 1.864v5.036c0 .331.191.523.522.523H66.8c.331 0 .523-.192.523-.523v-5.542c0-1.969-1.133-3.345-3.067-3.345-1.22 0-2.214.54-2.806 1.359V6.08c0-.33-.192-.523-.523-.523H59.76c-.332 0-.523.192-.523.523v11.397c0 .331.191.523.523.523zm23.533 0h1.498c.384 0 .558-.244.419-.61L80.992 5.976c-.104-.297-.296-.419-.592-.419h-1.865c-.296 0-.488.122-.592.419L73.708 17.39c-.14.366.035.61.418.61h1.412c.296 0 .505-.14.592-.418l.907-2.667h4.757l.906 2.667c.087.279.296.418.593.418zM79.44 7.579l1.76 5.402h-3.59l1.83-5.402zm9.05 1.22h-1.167c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.69 1.394 2.841 1.394 2.51 0 4.13-2.091 4.13-4.827 0-2.719-1.62-4.792-4.13-4.792-1.133 0-2.196.435-2.84 1.376v-.644c0-.332-.192-.523-.523-.523zm.523 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.282 2.893-1.551 0-2.37-1.29-2.37-2.893zm10.544-4.583H98.39c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.691 1.394 2.841 1.394 2.509 0 4.13-2.091 4.13-4.827 0-2.719-1.621-4.792-4.13-4.792-1.133 0-2.196.435-2.841 1.376v-.644c0-.332-.191-.523-.522-.523zm.522 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.283 2.893-1.551 0-2.37-1.29-2.37-2.893zm16.199.122h2.962c2.841 0 4.462-1.569 4.462-3.973 0-2.388-1.638-3.974-4.462-3.974h-4.757c-.331 0-.523.192-.523.523v11.397c0 .331.192.523.523.523h1.272c.331 0 .523-.192.523-.523v-3.973zm2.945-2.109h-2.945V7.666h2.945c1.377 0 2.126.662 2.126 1.847 0 1.203-.749 1.882-2.126 1.882zM130.979 18h1.045c.332 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.749 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.237.174-3.241.558-3.241 2.806 0 1.812 1.307 2.84 3.189 2.84 1.272 0 2.073-.453 2.631-1.185v.488c0 .314.192.488.523.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.588 6.238l-.21.785c-.087.33.018.575.332.644.244.053.557.087.941.087 1.533 0 2.387-.644 3.311-3.084l3.311-8.713c.139-.366-.035-.61-.419-.61h-1.272c-.296 0-.488.14-.592.418l-2.057 5.977-2.073-5.977c-.105-.279-.297-.418-.593-.418h-1.394c-.383 0-.54.244-.401.61l3.311 8.452c-.418 1.115-.749 1.498-1.411 1.498-.105 0-.227 0-.331-.035-.209-.052-.366.053-.453.366z' fill='%23".concat(e.theme===bn.DARK?"fff":"000","'/%3E%3C/svg%3E")),i.classList.add("sq-cash-button",function(a){switch(a){case Ln.ROUNDED:return"sq-cash-button-rounded";case Ln.SEMIROUNDED:return"sq-cash-button-semi-rounded";default:return"sq-cash-button-squared"}}(e.shape),e.theme===bn.DARK?"sq-cash-button-dark":"sq-cash-button-light"),i.appendChild(o),i})()}createQrCodeContainer(e){var n=this;return ec(function*(){if(yield n.stylesLoadedPromise,!z.isValidUrl(e))throw new kr;var r=new URL(e);r.searchParams.set("rounded","0");var i=document.createElement("div");i.classList.add("sq-cash-qr-container");var o=document.createElement("div");o.classList.add("col-left");var a=document.createElement("div");a.classList.add("col-right");var s=document.createElement("div");s.classList.add("sq-cash-qr-instruction"),s.innerHTML="<div><h3>Cash App Pay</h3><span>Scan the QR Code to check out</span></div>";var c=document.createElement("div"),u=document.createElement("img");c.classList.add("sq-cash-qr-guide"),u.setAttribute("src","data:image/svg+xml,%3Csvg width='133' height='109' viewBox='0 0 133 109' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0)'%3E%3Crect x='6.51207' y='2.51207' width='122.976' height='125.976' rx='14.9276' fill='%2300B843' stroke='black' stroke-width='4.97585'/%3E%3Cg clip-path='url(%23clip1)'%3E%3Cpath d='M59.7669 79.5683C60.3043 79.5683 60.6028 79.2399 60.6028 78.6727V78.1054C64.7527 77.8069 67.1112 75.0602 67.1112 71.7164C67.1112 67.5964 63.5883 66.1037 60.6028 65.3275V59.5953C61.7373 59.8341 62.633 60.3118 63.4391 61.1179C63.8272 61.506 64.2451 61.5956 64.693 61.297L65.8872 60.5506C66.3947 60.2521 66.5141 59.7744 66.126 59.3266C64.693 57.595 62.6927 56.6695 60.6028 56.4306V55.6843C60.6028 55.2066 60.3043 54.9677 59.7669 54.9677C59.2295 54.9677 58.9011 55.2961 58.9011 55.8634V56.3709C55.1692 56.5202 52.4524 58.7892 52.4524 62.4315C52.4524 66.7008 56.244 68.104 58.9011 68.7309V75.0005C57.5277 74.8512 56.1544 74.284 55.1095 72.8509C54.7512 72.3434 54.393 72.224 53.8854 72.5524L52.4822 73.4182C51.9747 73.7466 51.8553 74.1646 52.1837 74.6423C53.6764 76.6724 56.0051 77.9263 58.9011 78.1353V78.8518C58.9011 79.2996 59.2295 79.5683 59.7669 79.5683ZM56.035 62.133C56.035 60.4312 57.3486 59.5953 58.9011 59.4759V64.9095C57.2889 64.4617 56.035 63.775 56.035 62.133ZM63.6182 72.0449C63.6182 73.7167 62.5434 74.8811 60.6028 75.0602V69.1489C62.4837 69.6863 63.6182 70.3431 63.6182 72.0449Z' fill='white'/%3E%3Cpath d='M84.4025 67.1785C84.4025 61.4761 82.4619 56.1022 76.8491 56.1022C71.2065 56.1022 69.2958 61.4761 69.2958 67.1785C69.2958 72.8509 71.2065 78.195 76.8491 78.195C82.4619 78.195 84.4025 72.8509 84.4025 67.1785ZM80.372 67.1486C80.372 71.5672 79.5361 74.9408 76.8491 74.9408C74.1025 74.9408 73.2964 71.5672 73.2964 67.1486C73.2964 62.7301 74.1025 59.3863 76.8491 59.3863C79.5361 59.3863 80.372 62.7301 80.372 67.1486Z' fill='white'/%3E%3C/g%3E%3Cg filter='url(%23filter0_d)'%3E%3Ccircle cx='21.7048' cy='28.7714' r='21.7048' fill='%2300D64F'/%3E%3C/g%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.6143 24.2473C15.5832 24.6287 15.5824 25.1239 15.5824 25.8616V26.8927H13.6492V25.8616V25.8224C13.6492 25.134 13.6492 24.5594 13.6875 24.0899C13.7275 23.6003 13.814 23.1407 14.0355 22.706C14.3753 22.0391 14.9175 21.4969 15.5844 21.1571C16.0191 20.9356 16.4787 20.8491 16.9683 20.8091C17.4378 20.7708 18.0123 20.7708 18.7007 20.7708L18.7008 20.7708L18.74 20.7708H19.7711V22.704H18.74C18.0023 22.704 17.5071 22.7048 17.1258 22.7359C16.7557 22.7662 16.5788 22.8201 16.4621 22.8796C16.1589 23.0341 15.9125 23.2805 15.758 23.5836C15.6985 23.7004 15.6446 23.8773 15.6143 24.2473ZM24.239 22.704C24.9768 22.704 25.472 22.7048 25.8533 22.7359C26.2233 22.7662 26.4003 22.8201 26.517 22.8796C26.8201 23.0341 27.0666 23.2805 27.221 23.5836C27.2805 23.7004 27.3345 23.8773 27.3647 24.2473C27.3959 24.6287 27.3966 25.1239 27.3966 25.8616V26.8927H29.3299V25.8616L29.3299 25.8224V25.8223V25.8223V25.8223C29.3299 25.1339 29.3299 24.5593 29.2915 24.0899C29.2515 23.6003 29.165 23.1407 28.9436 22.706C28.6038 22.0391 28.0616 21.4969 27.3947 21.1571C26.96 20.9356 26.5003 20.8491 26.0107 20.8091C25.5413 20.7708 24.9667 20.7708 24.2782 20.7708H24.239H23.208V22.704H24.239ZM27.3966 31.3606C27.3966 32.0984 27.3959 32.5935 27.3647 32.9749C27.3345 33.3449 27.2805 33.5219 27.221 33.6386C27.0666 33.9417 26.8201 34.1882 26.517 34.3426C26.4003 34.4021 26.2233 34.4561 25.8533 34.4863C25.472 34.5175 24.9768 34.5182 24.239 34.5182H23.208V36.4514H24.239L24.2782 36.4514H24.2784H24.2784H24.2784C24.9667 36.4515 25.5413 36.4515 26.0107 36.4131C26.5003 36.3731 26.96 36.2866 27.3947 36.0651C28.0616 35.7253 28.6038 35.1831 28.9436 34.5162C29.165 34.0816 29.2515 33.6219 29.2915 33.1323C29.3299 32.6629 29.3299 32.0883 29.3299 31.3999V31.3999V31.3998V31.3998L29.3299 31.3606V30.3295H27.3966V31.3606ZM18.74 34.5182C18.0023 34.5182 17.5071 34.5175 17.1258 34.4863C16.7557 34.4561 16.5788 34.4021 16.4621 34.3426C16.1589 34.1882 15.9125 33.9417 15.758 33.6386C15.6986 33.5219 15.6446 33.3449 15.6143 32.9749C15.5832 32.5935 15.5824 32.0984 15.5824 31.3606L15.5824 30.3295H13.6492V31.3606V31.3998V31.3999C13.6492 32.0883 13.6492 32.6629 13.6875 33.1323C13.7275 33.6219 13.814 34.0816 14.0355 34.5162C14.3753 35.1831 14.9175 35.7253 15.5844 36.0651C16.0191 36.2866 16.4787 36.3731 16.9683 36.4131C17.4378 36.4515 18.0124 36.4515 18.7008 36.4514H18.7008L18.74 36.4514H19.7711V34.5182L18.74 34.5182Z' fill='white'/%3E%3Cpath d='M35.4841 2.48792C56.4982 2.48792 83.1989 2.48792 104.213 2.48792V4.97658C103.975 4.97854 103.824 4.98566 103.693 5.0117C102.953 5.15894 102.375 5.73757 102.227 6.47776C102.192 6.65801 102.192 6.87476 102.192 7.30828C102.192 7.36349 102.192 7.41522 102.192 7.46377C102.191 7.84292 102.188 8.06738 102.173 8.26281C101.932 11.4847 99.3708 14.0459 96.1488 14.2873C95.9051 14.3056 95.6164 14.3056 95.0388 14.3056H44.6583C44.0807 14.3056 43.7919 14.3056 43.5483 14.2873C40.3263 14.0459 37.7652 11.4847 37.5238 8.26281C37.5091 8.06738 37.5062 7.84292 37.5054 7.46377L37.5055 7.30828C37.5055 6.87476 37.5055 6.65801 37.4697 6.47776C37.3224 5.73757 36.7438 5.15894 36.0036 5.0117C35.8727 4.98566 35.7225 4.97854 35.4841 4.97658V2.48792Z' fill='black'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_d' x='-2.01905' y='6.05713' width='47.4476' height='47.4476' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='1.00952'/%3E%3CfeGaussianBlur stdDeviation='1.00952'/%3E%3CfeColorMatrix type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0'/%3E%3CfeBlend mode='normal' in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3CclipPath id='clip0'%3E%3Crect width='133' height='109' fill='white'/%3E%3C/clipPath%3E%3CclipPath id='clip1'%3E%3Crect x='11.5378' y='4.97597' width='116.622' height='252.524' rx='12.4396' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E"),c.appendChild(u),o.appendChild(s),o.appendChild(c);var l=document.createElement("img");return l.classList.add("sq-cash-qr-code"),l.setAttribute("src",r.toString()),a.appendChild(l),i.appendChild(o),i.appendChild(a),i})()}}function tc(t,e,n){return{details:{cashApp:{cashtag:t,transactionId:e},method:_.CASH_APP},status:oe.OK,token:n}}function nc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nc(Object(n),!0).forEach(function(r){Mp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nc(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ic(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function Hr(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){ic(o,r,i,a,s,"next",c)}function s(c){ic(o,r,i,a,s,"throw",c)}a(void 0)})}}var Eo="sq-cash-app-redirect-payment-method-tracking-id";class kp extends rt{constructor(e,n){if(super(e),this.preloadedQRImage=new Image,this.authTimeoutId=-1,this.elements={button:null,qrCode:null},this.isCashAppNativePlatform=v.isAndroid()||Vn.isIOS(),this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new it(this.context),this.cashAppClient=new xp,!this.session.locationId)throw new Ce("locationId must be provided for Cash App");if(this.locationId=this.session.locationId,Is(n),n.transactionId.length>50)throw new Ce("transactionId too long. Should be less than ".concat(50," characters."));var r=Vn.extractCashAppParamsFromURI(n.redirectURI,e.errorLogger);this.fetchAuthURLs(this.locationId,r,n.transactionId,n.totalTransactionAmount)}get willRedirect(){return this.isCashAppNativePlatform}destroy(){return this.metricsHandler.logEvent(R.Destroyed),window.clearTimeout(this.authTimeoutId),Promise.resolve()}attachAll(e,n){var r=this;return Hr(function*(){r.metricsHandler.logEvent(g.AttachStart);try{if(e.button){var i=yield r.cashAppClient.createCashAppButton(Object.assign({shape:Ln.ROUNDED,theme:bn.DARK},n?.button));r.elements.button=r.validateAndQuerySelector(e.button),r.elements.button.appendChild(i)}return r.elements.qrCode=r.validateAndQuerySelector(e.qrCode),r.metricsHandler.logEvent(g.AttachOK),Promise.resolve()}catch(o){throw r.metricsHandler.logEvent(g.AttachError),o}})()}tokenize(){var e=this;return Hr(function*(){e.handleFirstInteraction();var{qrCode:n}=e.elements;if(!n)throw new ae(_.CASH_APP);try{var r,i=yield Ei.timeout(()=>e.fetchAuthURLsPromise,nn.minutesToMs(1),new $("Precondition failed",_.CASH_APP));if(i.error)throw i.error;if(!e.transactionId)throw new $("expected transactionId to exist at tokenization",_.CASH_APP);if(e.willRedirect){var o={paymentMethodTrackingId:e.context.getPaymentMethodTrackingId(),transactionId:e.transactionId};return e.context.getSession().paymentsUIInstanceId&&(o=rc(rc({},o),{},{paymentsUIInstanceId:e.context.getPaymentsUIInstanceId()})),function(t){window.localStorage&&window.localStorage.setItem(t.key,JSON.stringify(t.value))}({key:Eo,value:o}),v.redirectTo(i.redirectURL),new Promise(()=>{})}var a=yield e.cashAppClient.createQrCodeContainer(i.qrURL);n.appendChild(a);var{token:s,cashtag:c,paymentMethodTrackingId:u,sessionId:l}=yield e.paymentMethodMessenger.request(Gn.REQUEST_CASH_APP_CREATE_WALLET_TOKEN,{expiresAt:Date.now()+nn.secondsToMs(i.expiresIn),requestBody:{analytics_token:null!==(r=e.session.analyticsToken)&&void 0!==r?r:"",client_id:e.session.applicationId,location_id:e.locationId,payment_method_tracking_id:e.context.getPaymentMethodTrackingId(),session_id:e.session.sessionId,transaction_id:e.transactionId,websdk_version:A.VERSION,website_url:e.session.sourceUrl}});return yield e.context.updateSession(l),e.context.setPaymentMethodTrackingId(u),tc(c,e.transactionId,s)}catch(d){return d instanceof kr&&e.errorLogger.captureException(d),kn(d,e.errorLogger)}})()}getRedirectResult(){var e=this;return Hr(function*(){var n,{error:r}=Vn.findAndRemoveQueryParams(window.location.search,["error"]);if(r){var i=new se([Np(r)]);return e.errorLogger.captureException(i),kn(i,e.errorLogger)}var o,a,s,c,u,{state:l,code:d,access_token:p}=Vn.findAndRemoveQueryParams(window.location.search,Vn.CASH_APP_OAUTH_PARAMS);if(!l||!d||!p)return null;try{var h=function(j){var J=j.split(":");if(J.length<3)throw new $("Invalid transaction ID: could not separate");return J}(a=function(j){var{transaction_id:J}=JSON.parse(j);if(void 0===J)throw new $("Malformed state in redirect query params: ".concat(j));return J}(l));o=h[0],s=h[1]}catch(j){return kn(j,e.errorLogger)}var m=function(t){if(window.localStorage){var e,n=window.localStorage.getItem(t);if(!n)return null;try{e=JSON.parse(n)}catch{return null}return{key:t,value:e}}return null}(Eo);null!==m&&a===(null===(n=m.value)||void 0===n?void 0:n.transactionId)&&(c=m.value.paymentMethodTrackingId,u=m.value.paymentsUIInstanceId),function(t){window.localStorage&&window.localStorage.removeItem(t)}(Eo);var f=j=>{e.context.metricsHandler.metricsLogger.logEvent({event:j,eventSource:e.context.metricsHandler.eventSource},e.session.instanceId,o,c,u)};f(g.NonceStart);try{var P=yield e.messenger.request(Gn.REQUEST_CASH_APP_CUSTOMER,{session:Object.assign({},e.session,{paymentMethodTrackingId:c,sessionId:o}),body:p}),b=e.generateWalletToken(o,d,a,c);return f(g.NonceOK),tc(P,s,b)}catch(j){return f(g.NonceError),kn(j,e.errorLogger)}})()}validateAndQuerySelector(e){if("string"!=typeof e)throw new TypeError("selector should be a string: ".concat(e));var n=document.querySelector(e);if(null===n)throw new Ft(e);return n}fetchAuthURLs(e,n,r,i){var o=this;this.fetchAuthURLsPromise=Hr(function*(){var s={expiresIn:-1,qrURL:"",redirectURL:""},c=1e3,d={client_id:o.session.applicationId,location_id:e,redirect_uri:o.willRedirect?n:void 0,total_transaction_amount:i?{amount:i.amount,currency_code:i.currencyCode}:void 0,transaction_id:r};try{var{expires_in:p,qr_url:h,redirect_url:m,transaction_id:f}=yield o.paymentMethodMessenger.request(Gn.REQUEST_CASH_APP_AUTH,d);o.transactionId=f,s.expiresIn=p,s.qrURL=h,s.redirectURL=m,c=Math.max(nn.secondsToMs(p)-nn.minutesToMs(1),nn.minutesToMs(1)),o.willRedirect||(o.preloadedQRImage.src=h),s.expiresIn<2147483647?o.authTimeoutId=window.setTimeout(()=>{o.errorLogger.captureException(new $("Cash App Auth URLS expired unexpectedly with expiry of ".concat(c,"ms")),o.session.instanceId,o.session.sessionId)},c):o.errorLogger.captureException(new $("Cash App Auth URLS expires_in larger than 32 bit integer ".concat(s.expiresIn,"ms")),o.session.instanceId,o.session.sessionId)}catch(P){s.error=P}return s})()}generateWalletToken(e,n,r){return"wnon:".concat(window.btoa(JSON.stringify({analytics_token:this.session.analyticsToken,client_id:this.session.applicationId,entry_method:"REDIRECT",location_id:this.locationId,payment_method_tracking_id:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",session_id:e,tender:{brand:"CASH_APP",preauth_idempotency_key:n,transaction_id:r},websdk_version:A.VERSION,website_url:this.session.sourceUrl})))}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(g.FirstInteraction))}}"0".repeat(24);var ht,Hp=[jt,Bt,cn,Me,Xe,Y];function oc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ac(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oc(Object(n),!0).forEach(function(r){Fp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sc(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function mt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){sc(o,r,i,a,s,"next",c)}function s(c){sc(o,r,i,a,s,"throw",c)}a(void 0)})}}!function(t){t.CLEAR="giftCardClear",t.CONFIGURE="giftCardConfigure",t.DESTROY="giftCardDestroy",t.LOAD_GIFT_CARDS_FORM="loadGiftCardsForm",t.REQUEST_CARD_NONCE_IF_VALID_FORM="giftCardRequestCardNonceIfValidForm",t.SET_FOCUS="giftCardSetFocus",t.SET_ERROR="giftCardSetError"}(ht||(ht={}));var cc=[De.GIFT_CARD_NUMBER];class jp extends rt{constructor(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.attached=!1,this.destroyed=!1,this.id=xn(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new it(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(n?.includeInputLabels),this.initializeMessageBus(),this.validateOptions(n),this.initialOptions=n||{},this.errorList=new Set,this.stylesLoadedPromise=new Promise((r,i)=>{this.resolveStylePromise=r,this.rejectStylePromise=i})}attach(e){var n=this;return mt(function*(){if(n.destroyed)throw new k(_.GIFT_CARD);if(n.attached)throw new Xe(_.GIFT_CARD);var r;n.attached=!0,n.metricsHandler.logEvent(g.AttachStart),n.metricsHandler.logEvent(R.Configured,n.initialOptions);try{r=yo(e)}catch(i){throw n.metricsHandler.logEvent(g.AttachError),i}try{return n.attachPromise=n.buildElementOnIframe(r),yield n.attachPromise,n.attachPromise=void 0,n.destroyed?Promise.reject(new k(_.GIFT_CARD)):(n.element=r,window.addEventListener("resize",n.onResize.bind(n)),n.showCardElement(),n.onResize(),n.metricsHandler.logEvent(g.AttachOK),Promise.resolve())}catch(i){throw n.attached=!1,n.metricsHandler.logEvent(g.AttachError),z.isInstanceOf(i,Hp)?i:(n.errorLogger.captureException(i,n.session.instanceId,n.session.sessionId),new Y("attaching the Gift Card Element"))}})()}configure(e){var n=this;return mt(function*(){if(n.destroyed)throw new k(_.GIFT_CARD);if(!n.attached)throw new ae(_.GIFT_CARD);n.validateOptions(e),void 0!==e?.includeInputLabels&&(n.inputLabelsIncluded=Boolean(e?.includeInputLabels),n.onResize()),void 0!==e.style&&lc(e.style,n.id),n.metricsHandler.logEvent(R.ConfigUpdated,e);try{return void(yield n.paymentMessenger.request(ht.CONFIGURE,{includeInputLabels:n.inputLabelsIncluded,style:e.style,type:_.GIFT_CARD}))}catch(r){throw z.isInstanceOf(r,Gs)?r:(n.errorLogger.captureException(r,n.session.instanceId,n.session.sessionId),new Y("configuring the Gift Card Element"))}})()}destroy(){var e=this;return mt(function*(){if(e.destroyed)throw new k(_.GIFT_CARD);if(e.attachPromise)try{yield e.attachPromise}catch{}e.destroyed=!0,e.attached=!1,e.metricsHandler.logEvent(R.Destroyed);var n=yield e.paymentMessenger.request(ht.DESTROY);return e.element&&(Ys(e.element),window.removeEventListener("resize",e.onResize.bind(e))),n})()}focus(e){var n=this;return mt(function*(){if(n.destroyed)throw new k(_.GIFT_CARD);if(!n.attached)throw new ae(_.GIFT_CARD);if(!Object.values(De).includes(e))throw new sn(e);n.metricsHandler.logEvent(R.Focused,e);try{return yield n.paymentMessenger.request(ht.SET_FOCUS,{field:e})}catch(r){n.errorLogger.captureException(r,n.session.instanceId,n.session.sessionId)}return!1})()}clear(){var e=this;return mt(function*(){if(e.destroyed)throw new k(_.GIFT_CARD);if(!e.attached)throw new ae(_.GIFT_CARD);try{return yield e.paymentMessenger.request(ht.CLEAR)}catch(n){e.errorLogger.captureException(n,e.session.instanceId,e.session.sessionId)}return e.metricsHandler.logEvent(R.Clear),!1})()}addEventListener(e,n){if(this.destroyed)throw new k(_.GIFT_CARD);this.metricsHandler.logEvent(R.EventListenerAdded,e),super.addEventListener(e,n)}removeEventListener(e,n){if(this.destroyed)throw new k(_.GIFT_CARD);super.removeEventListener(e,n)}tokenize(){var e=this;return mt(function*(){if(e.destroyed)throw new k(_.GIFT_CARD);if(!e.attached)throw new ae(_.GIFT_CARD);if(e.tokenizeInProcess)throw new se([Pr]);e.tokenizeInProcess=!0;try{var n=yield e.paymentMessenger.request(ht.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:_.GIFT_CARD});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(n.paymentMethodTrackingId),yield e.context.updateSession(n.sessionId),function(r){var{card:i,cardNonce:o}=r;return{details:{giftCard:i,method:_.GIFT_CARD},status:oe.OK,token:o}}(n)}catch(r){if(e.tokenizeInProcess=!1,r instanceof Dn)return{errors:r.errors,status:oe.INVALID};throw z.isInstanceOf(r,Vs)?r:(e.errorLogger.captureException(r,e.session.instanceId,e.session.sessionId),ts())}})()}setError(e){var n=this;return mt(function*(){if(n.destroyed)throw new k(_.GIFT_CARD);if(!n.attached)throw new ae(_.GIFT_CARD);if(!Object.values(De).includes(e))throw new sn(e);n.metricsHandler.logEvent(R.SetError,e);try{return yield n.paymentMessenger.request(ht.SET_ERROR,{field:e})}catch(r){n.errorLogger.captureException(r,n.session.instanceId,n.session.sessionId)}return!1})()}buildElementOnIframe(e){var n=this;return mt(function*(){yield n.buildCardElement(e),yield n.paymentMessenger.request(ht.LOAD_GIFT_CARDS_FORM,{configuration:ac(ac({},n.initialOptions),{},{type:_.GIFT_CARD}),iframeName:n.iframeName}),yield n.stylesLoadedPromise})()}validateOptions(e){var n={includeInputLabels:r=>"boolean"==typeof r,style:r=>"object"==typeof r};Object.entries(e).forEach(r=>{var[i,o]=r;if(void 0===n[i])throw new gr(i);if(n[i]&&!n[i](o))throw new xe(i,o)})}buildCardElement(e){var n=this;return mt(function*(){var r;n.wrapperElement=document.createElement("div"),n.wrapperElement.id=uc(n.id),n.wrapperElement.classList.add(so),n.hideCardElement(),n.cardDetail=document.createElement("span"),n.cardDetail.classList.add(ks),e.appendChild(n.wrapperElement),n.iframeContainer=document.createElement("div"),n.iframeContainer.classList.add(ao),n.wrapperElement.appendChild(n.iframeContainer),n.iframe=yield n.buildCardIframe(n.iframeContainer),n.iframe.classList.add(co),n.wrapperElement.appendChild(n.cardDetail),qn.addStyleElement(A.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",n.resolveStylePromise,n.rejectStylePromise),null!==(r=n.initialOptions)&&void 0!==r&&r.style&&lc(n.initialOptions.style,n.id)})()}buildCardIframe(e){return fo({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:A.GIFT_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&!this.currentResizeTimeout){var n=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var r=this.inputLabelsIncluded?62:48;this.iframe.style.height="".concat(r+=2,"px"),this.iframeContainer.style.height="".concat(Math.round(r),"px")}};n(),this.currentResizeTimeout=window.setTimeout(()=>{n(),this.currentResizeTimeout=void 0},100)}}updateCardDetailText(){var e,n,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:"emptyMessage",n=this.buildHelperMessage(e),this.cardDetail.classList.remove(Nr),this.cardDetail.classList.add(br)):(e=cc.find(i=>this.errorList.has(i))||cc[0],n=this.buildErrorMessage(e),this.cardDetail.classList.add(Nr),this.cardDetail.classList.remove(br)),this.cardDetail.textContent!==n&&(this.cardDetail.textContent=n),n.length>0?this.cardDetail.classList.add(Lr):this.cardDetail.classList.remove(Lr))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout(()=>{null===this.focusedInput&&this.updateCardDetailText()},50)}handleInputEvent(e){var n,r,{data:i}=e,o=i.payload.body;switch(o.eventType){case Mt.ERROR_CLASS_ADDED:this.addErrorMessage(o.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Fn);break;case Mt.ERROR_CLASS_REMOVED:this.removeErrorMessage(o.field),this.removeErrorClass();break;case Mt.FOCUS_CLASS_ADDED:this.addFocusMessage(o.field),null===(r=this.wrapperElement)||void 0===r||r.classList.add(Hn);break;case Mt.FOCUS_CLASS_REMOVED:this.removeFocusMessage(o.field),this.removeFocusClass()}super.dispatchEvent(o.eventType,o)}removeFocusClass(){setTimeout(()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Hn)},50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Fn))}initializeMessageBus(){var e=this.handleInputEvent.bind(this);this.paymentMessenger.initializeMessageBus({[ce.FOCUS_CLASS_ADDED]:e,[ce.FOCUS_CLASS_REMOVED]:e,[ce.ERROR_CLASS_ADDED]:e,[ce.ERROR_CLASS_REMOVED]:e,[ce.CARD_BRAND_CHANGED]:e,[ce.SUBMIT]:e,[ce.ESCAPE]:e})}buildErrorMessage(e){return e===De.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError:""}buildHelperMessage(e){return e===De.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber:""}}function uc(t){return"".concat("gift-card-wrapper","-").concat(t)}function lc(t,e){var i,n=(i=e,"".concat("sq-gift-card-custom-styles","-").concat(i)),r=document.getElementById(n);null===r&&((r=document.createElement("style")).id=n,document.head.appendChild(r)),r.innerHTML=qs(t,uc(e))}class Fr extends E{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,Fr.prototype)}}function dc(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}class Bp extends Zi{constructor(){super(),this.listeners={},this.listeners={}}dispatchEvent(e,n,r){var i,o=this;return(i=function*(){if(e in o.listeners)for(var a=new Ti(e,n),s=[...o.listeners[e]],c=function*(d,p){var h=void 0;try{h=s[d](a)}catch(f){throw new an(e,f.message)}var m=void 0;if(h instanceof Promise)try{m=yield Ei.timeout(()=>h,3e4,new Fr(e))}catch(f){throw f instanceof Fr?f:new an(e,f.message)}else m=h;r&&r(m)},u=0,l=s.length;u<l;u++)yield*c(u)},function(){var a=this,s=arguments;return new Promise(function(c,u){var l=i.apply(a,s);function d(h){dc(l,c,u,d,p,"next",h)}function p(h){dc(l,c,u,d,p,"throw",h)}d(void 0)})})()}}function Pt(t,e){if("object"!=typeof t)return{isValid:!1,missingFields:[]};var n=[];return{isValid:Object.entries(e).map(r=>{var[i,o]=r;if("object"==typeof o){var{isValid:a,missingFields:s}=Pt("object"==typeof t[i]?t[i]:{},e[i]);return s.forEach(c=>{var[u,l]=c;n.push(["".concat(i,".").concat(u),l])}),a}return i in t&&typeof t[i]===o||(n.push([i,o]),!1)}).every(r=>r),missingFields:n}}function Yt(t,e,n){if(!Array.isArray(t))return{isValid:!1,missingFields:[[e,"Array"]]};var r=t.reduce((i,o)=>{var a=Pt({[e]:o},{[e]:n}),s=z.fromEntries(a.missingFields);return{isValid:i.isValid&&a.isValid,missingFieldsMap:Object.assign({},i.missingFieldsMap,s)}},{isValid:!0,missingFieldsMap:{}});return{isValid:r.isValid,missingFields:Object.entries(r.missingFieldsMap)}}var mn,_o,Yn={amount:"string",label:"string"},qp={amount:"string",id:"string",label:"string"},pc={amount:"string",label:"string"},Gp={};function fn(t,e){var{lineItems:n,taxLineItems:r,discounts:i,shippingLineItems:o}=t,a=!1,s=[],c=n,u=r,l=o,d=hc(i);return void 0===e||void 0===n&&void 0===r&&void 0===o&&void 0===d||(c||(c=e.lineItems),u||(u=e.taxLineItems),d||(d=hc(e.discounts)),l||(l=e.shippingLineItems)),[c,u,d,l].forEach(p=>{void 0!==p&&(a=!0,s.push(...p))}),a?s:void 0}function hc(t){return void 0===t?t:t.map(e=>Object.assign({},e,{amount:"-".concat(e.amount)}))}function mc(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function Ao(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){mc(o,r,i,a,s,"next",c)}function s(c){mc(o,r,i,a,s,"throw",c)}a(void 0)})}}function fc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.UPDATE="update"}(mn||(mn={}));class jr{constructor(e,n,r){this.eventTarget=new Bp,this.metricsBuffer=[],this.localeStrings=n,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._shippingLineItems=e.shippingLineItems,this._taxLineItems=e.taxLineItems,this._discounts=e.discounts,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this._pickupContact=e.pickupContact,this.updateLock=r;var{isValid:i,missingFields:o}=gc(this);if(!i)throw new Ze(o)}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get pickupContact(){return this._pickupContact}get shippingLineItems(){return this._shippingLineItems}get taxLineItems(){return this._taxLineItems}get discounts(){return this._discounts}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}update(e){var n=function(a){for(var s=1;s<arguments.length;s++){var c=null!=arguments[s]?arguments[s]:{};s%2?fc(Object(c),!0).forEach(function(u){Vp(a,u,c[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):fc(Object(c)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(c,u))})}return a}({countryCode:this.countryCode,currencyCode:this.currencyCode,lineItems:this.lineItems,shippingLineItems:this.shippingLineItems,taxLineItems:this.taxLineItems,discounts:this.discounts,pickupContact:this.pickupContact,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingOptions:this.shippingOptions,total:this.total},e),r=new jr(n,this.localeStrings,this.updateLock),{isValid:i,missingFields:o}=gc(r);if(!i)throw new Ze(o);return!this.updateLock.isLocked&&(void 0!==e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),void 0!==e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),e.countryCode&&(this._countryCode=e.countryCode),e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.shippingLineItems&&(this._shippingLineItems=e.shippingLineItems),e.taxLineItems&&(this._taxLineItems=e.taxLineItems),e.discounts&&(this._discounts=e.discounts),e.total&&(this._total=e.total),e.pickupContact&&(this._pickupContact=e.pickupContact),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),this.eventTarget.dispatchEvent(mn.UPDATE,r),this.logMetrics(R.ConfigUpdated,n),!0)}addEventListener(e,n){switch(z.enumValues(X).includes(e)&&this.logMetrics(R.EventListenerAdded,e),e){case X.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(n);break;case X.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(n);break;case mn.UPDATE:this.updateEventListener(n);break;case Ue.AFTERPAY_SHIPPING_ADDRESS_CHANGED:this.afterpayShippingContactEventListener(n);break;case Ue.AFTERPAY_SHIPPING_OPTION_CHANGED:this.afterpayShippingOptionEventListener(n);break;default:throw new Ye("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,n,r){return this.eventTarget.dispatchEvent(e,n,i=>{if(z.enumValues(Ue).includes(e)){var o=function(s){if(void 0!==s.error)return{isValid:!0,missingFields:[]};if(void 0!==s.shippingErrors)return{isValid:!0,missingFields:[]};if(void 0===s.shippingOptions)return{isValid:!1,missingFields:[["paymentRequestUpdate.shippingOptions","array"]]};var c=Yt(s.shippingOptions,"shippingOptions",{id:"string",label:"string",amount:"string",total:"object"});if(!c.isValid)return c;for(var u of s.shippingOptions)if(!(c=Pt({"shippingOptions.total":u.total},{"shippingOptions.total":pc})).isValid||void 0!==u.taxLineItems&&!(c=Yt(u.taxLineItems,"shippingOptions.taxLineItems",Yn)).isValid)return c;return{isValid:!0,missingFields:[]}}(i);if(!o.isValid)throw new on(o.missingFields);r(i)}else{var a=function(s){var{lineItems:c,discounts:u,taxLineItems:l,shippingLineItems:d,shippingErrors:p,shippingOptions:h,error:m,total:f}=s;if(c){var P=Yt(c,"lineItem",Yn);if(!P.isValid)return P}if(u){var b=Yt(u,"discounts",Yn);if(!b.isValid)return b}if(l){var j=Yt(l,"taxLineItems",Yn);if(!j.isValid)return j}if(d){var J=Yt(d,"shippingLineItems",Yn);if(!J.isValid)return J}if(h){var ee=Yt(h,"shippingOption",qp);if(!ee.isValid)return ee}if(f){var He=Pt({total:f},{total:pc});if(!He.isValid)return He}if(m&&"string"!=typeof m)return{isValid:!1,missingFields:[["error","string"]]};if(p){var Tt=Pt(p,Gp);if(!Tt.isValid)return Tt}return{isValid:!0,missingFields:[]}}(i);if(!a.isValid)throw new on(a.missingFields);r(i)}})}hasEventListener(e){return this.eventTarget.hasEventListener(e)}setPaymentMetricsHandler(e){this.paymentMetricsHandler=e,this.metricsBuffer.length>0&&(this.metricsBuffer.forEach(n=>{var[r,i]=n;e.logEvent(r,i)}),this.metricsBuffer=[])}shippingContactEventListener(e){var r,n=this;this.eventTarget.addEventListener(X.SHIPPING_CONTACT_CHANGED,(r=Ao(function*(i){var{contactOrOption:o}=i.detail;try{return yield e(o)}catch(a){return console.error("ShippingContactUpdateError",a),{error:n.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}),function(i){return r.apply(this,arguments)}))}shippingOptionEventListener(e){var r,n=this;this.eventTarget.addEventListener(X.SHIPPING_OPTION_CHANGED,(r=Ao(function*(i){var{contactOrOption:o}=i.detail;try{return yield e(o)}catch(a){return console.error("ShippingOptionUpdateError",a),{error:n.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}),function(i){return r.apply(this,arguments)}))}afterpayShippingContactEventListener(e){var r,n=this;this.eventTarget.addEventListener(Ue.AFTERPAY_SHIPPING_ADDRESS_CHANGED,(r=Ao(function*(i){var{contactOrOption:o}=i.detail;try{return yield e(o)}catch(a){return console.error("AfterpayShippingContactUpdateError",a),{error:n.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}),function(i){return r.apply(this,arguments)}))}afterpayShippingOptionEventListener(e){this.eventTarget.addEventListener(Ue.AFTERPAY_SHIPPING_OPTION_CHANGED,n=>{e(n.detail.contactOrOption)})}updateEventListener(e){this.eventTarget.addEventListener(mn.UPDATE,n=>{e(n.detail)})}logMetrics(e,n){void 0!==this.paymentMetricsHandler?this.paymentMetricsHandler.logEvent(e,n):this.metricsBuffer.push([e,n])}}function Io(t){return Boolean(t.shippingOptions&&t.shippingOptions.length>0)}function gc(t){return Pt(t,{countryCode:"string",currencyCode:"string",total:{amount:"string",label:"string"}})}class Yp{constructor(){this.lockSet=new Set}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}get isLocked(){return this.lockSet.size>0}}class Co extends E{constructor(){super("Method is not enabled for this app."),this.name="MethodNotAvailableError",Object.setPrototypeOf(this,Co.prototype)}}!function(t){t.REQUEST_HYDRATION="REQUEST_HYDRATION"}(_o||(_o={}));var zp=function(t){var e=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new URL(A.IFRAME_SRC);return Object.entries(n).forEach(i=>{var[o,a]=i;r.searchParams.set(o,a)}),r.toString()}(t);return fo({frameborder:"0",height:"0",scrolling:"no",src:e,style:"border: none !important; display: block !important; visibility: hidden !important",width:"0"})};class Qp extends class{constructor(e={}){this.logDevelopmentErrors=!1,this.messageListeners={},this.channel=new class{constructor(n){this.receiveMessage=r=>{switch(r.data){case this.messageWithName(Ta):this.handleConnecting(r);break;case this.messageWithName(Pa):this.handleConnected();break;case this.messageWithName(Ra):this.close();break;case this.messageWithName(wa):break;default:this.handleMessage(r)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=n?`:${n}`:""}close(){this.port&&(this.postMessage(this.messageWithName(Ra)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(n){if(this.connected)throw new Ut("message channel is already connected");if(n){if(void 0===n.origin)throw new Ut("message channel remote.origin must be defined");if(null===n.window)throw new Ut("message channel remote.window cannot be null");let r=new MessageChannel;this.setupPort(r.port1),n.window.postMessage(this.messageWithName(Ta),n.origin,[r.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(n){this.errorHandler=n}set onmessage(n){this.listeners.push(n)}postMessage(n){this.port&&this.connected?this.port.postMessage(n):this.messageBuffer.push(n)}handleConnecting(n){if(this.connected)throw new Ut("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),this.setupPort(n.ports[0]),this.postMessage(this.messageWithName(Pa)),this.connectionEstablished()}handleConnected(){if(this.connected)throw new Ut("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(n){this.listeners.forEach(r=>{r(n)})}setupPort(n){this.port=n,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=r=>{this.postMessage(this.messageWithName(wa)),this.errorHandler&&this.errorHandler(new Ut("message channel failed to deserialize message"),r)}}messageWithName(n){return n+this.name}}(e.name),this.channel.onmessage=this.handleMessage.bind(this),this.payloadSerializer=e.payloadSerializer,this.errorSerializer=e.errorSerializer,void 0!==e.logDevelopmentErrors&&(this.logDevelopmentErrors=e.logDevelopmentErrors)}setErrorHandler(e){this.errorHandler=e,this.channel.setErrorHandler(e)}sendOneWayMessage(e,n){let r=n;return void 0!==n&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(n)),this.message({id:this.uniqueId(),mustAcknowledge:!1,mustRespond:!1,payload:r,type:e})}sendMessage(e,n){let r=n;return void 0!==n&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(n)),this.message({id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}request(e,n){let r=n;return void 0!==n&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(n)),this.message({id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!0,payload:r,type:e})}respond(e,n){let r=`${e.type}:${Le.OK}`,i=n;return void 0!==this.payloadSerializer&&(i=this.payloadSerializer.serialize(n)),this.postResponse(r,e,i)}reject(e,n){let r=`${e.type}:${Le.ERROR}`,i=n;return void 0!==this.errorSerializer&&(i=this.errorSerializer.serialize(n)),this.postResponse(r,e,i)}onMessage(e,n){let r=n||this.uniqueId();return this.addMessageEventListener(e,r),r}connect(e,n){this.iframeID=n,this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){let n=this.messageListeners[e.data.type];e.data.type&&"undefined"!==e.data.type?n?(e.data.mustAcknowledge&&this.acknowledge(e.data),Object.values(n).forEach(r=>{r.forEach(i=>{i(e)})})):this.logDevelopmentErrors&&console.error(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `):void 0!==this.errorHandler&&this.errorHandler(new mi("Received a messenger message with an undefined type"),e)}logMessengerTimeout(e){let n=new fi(e.type,e.id,this.iframeID);this.errorHandler&&this.errorHandler(n,new MessageEvent(e.type,{data:e}))}handleMessageContract(e){let n=this.errorSerializer,r=this.payloadSerializer;if(!e.mustAcknowledge)return new Promise(s=>{s({})});let i,o=()=>{[Le.ACK,Le.OK,Le.ERROR].forEach(s=>{delete this.messageListeners[`${e.type}:${s}`][i]})},a=window.setTimeout(()=>{this.logMessengerTimeout(e)},1e4);return new Promise((s,c)=>{i=this.onMessage({listener(){clearTimeout(a),e.mustRespond||(o(),s({}))},messageType:`${e.type}:${Le.ACK}`}),this.onMessage({listener(u){o();let{payload:l}=u.data;if(void 0!==r){let d=r.deserialize(l);s(d)}else s(l)},messageType:`${e.type}:${Le.OK}`},i),this.onMessage({listener(u){o();let{payload:l}=u.data;if(void 0!==n){let d=n.deserialize(l);c(d)}else c(l)},messageType:`${e.type}:${Le.ERROR}`},i)})}acknowledge(e){return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,type:`${e.type}:${Le.ACK}`})}postResponse(e,n,r){return this.message({id:n.id,mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}message(e){let n=this.handleMessageContract(e);return(!e.type||"undefined"===e.type)&&void 0!==this.errorHandler&&this.errorHandler(new mi("attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),n}addMessageEventListener(e,n){let{messageType:r,listener:i}=e;this.messageListeners[r]=this.messageListeners[r]||{},this.messageListeners[r][n]=this.messageListeners[r][n]||[],this.messageListeners[r][n].push(i)}uniqueId(){return Date.now().toString()+Math.floor(8e3*Math.random())}}{constructor(e){super({name:e,errorSerializer:{serialize:n=>n instanceof E?function(t){return{_isSerializedError:!0,errors:t.errors,message:t.message,name:t.name}}(n):n,deserialize:n=>n instanceof Error?n:function(t){var e=new(Cl[t.name]||E);return e.fromSerializedError(t),e}(n)}})}setErrorLogger(e,n){this.setErrorHandler(function(r,i){var o,a,s,c,u,l;void 0!==i&&(o=null===(s=i.data.payload)||void 0===s||null===(c=s.session)||void 0===c?void 0:c.instanceId,a=null===(u=i.data.payload)||void 0===u||null===(l=u.session)||void 0===l?void 0:l.sessionId),r instanceof fi?n.logEvent({event:_r.IframeMessengerTimeoutError,eventSource:x.App,internalConfigurationValues:r.message},o,a):e.captureException(r,o,a)})}}function yc(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function vc(){return(vc=function Jp(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){yc(o,r,i,a,s,"next",c)}function s(c){yc(o,r,i,a,s,"throw",c)}a(void 0)})}}(function*(t,e,n,r,i){var o=new Qp(i);return o.setErrorLogger(e,n),o.connect({origin:A.ASSET_URL,window:t.contentWindow},t.id),yield o.sendMessage(nd,r),o})).apply(this,arguments)}var Zp={build:function(t,e,n,r,i){return vc.apply(this,arguments)}};function Ec(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function _c(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){Ec(o,r,i,a,s,"next",c)}function s(c){Ec(o,r,i,a,s,"throw",c)}a(void 0)})}}function Ac(){return(Ac=_c(function*(t,e,n,r){var{applicationId:i,locationId:o,hostname:a,sourceUrl:s}=t;e.logEvent({event:g.InitializeStart,eventSource:x.App});var c,u,l=r.getCurrentLocale();try{c=yield zp({applicationId:i,hostname:a})}catch(J){throw e.logEvent({event:g.InitializeError,eventSource:x.App}),n.captureException(J),J instanceof $?new Y("initializing the payment method"):J}try{u=yield Zp.build(c,n,e,{applicationId:i,hostname:a,locale:l,locationId:o})}catch(J){throw e.logEvent({event:g.InitializeError,eventSource:x.App}),n.captureException(J),J instanceof $?new Y("initializing the payment method"):J}try{var{avt:d,sessionId:p,applePartnerInternalMerchantIdentifier:h,cashAppPayMerchantIdentifier:m,instanceId:f,paymentMethodSupportDetail:P,featureFlagValues:b}=yield u.request(_o.REQUEST_HYDRATION,{body:{applicationId:i,hostname:a,locationId:o}});e.setAvt(d);var j=new Cp({applePayMerchantIdentifier:h,cashAppPayMerchantIdentifier:m,applicationId:i,avt:d,hostname:a,instanceId:f,locale:l,locationId:o,sessionId:p,sourceUrl:s});return e.logEvent({event:g.InitializeOK,eventSource:x.App,internalConfigurationValues:b},f,p),{featureFlagValues:b,localeStrings:r,messenger:u,paymentMethodSupportDetail:P,session:j}}catch(J){throw e.logEvent({event:g.InitializeError,eventSource:x.App}),J instanceof $?new Y("initializing the payment method"):J}})).apply(this,arguments)}function Ic(){return(Ic=_c(function*(t,e,n){var{applicationId:r,locationId:i,sourceUrl:o}=t.serialize();try{var a=yield Wi.getToken({applicationId:r,locationId:i,websiteUrl:o});t.setAnalyticsToken(a)}catch(s){s instanceof _t&&e.captureException(s,t.instanceId,t.sessionId),n&&window.clearInterval(n)}})).apply(this,arguments)}var Br,qr={initializeAnalytics:function(t,e,n){return Ic.apply(this,arguments)},initializePayment:function(t,e,n,r){return Ac.apply(this,arguments)},validateVerificationDetails:function(t,e){var n=[];return t.billingContact&&"object"==typeof t.billingContact||n.push(new Ye(e,"details.billingContact","object")),t.intent&&"string"==typeof t.intent&&["CHARGE","STORE"].includes(t.intent)||n.push(new Ye(e,"details.intent","string")),"CHARGE"===t.intent&&(t.amount&&"string"==typeof t.amount||n.push(new Ye(e,"details.amount","string")),t.currencyCode&&"string"==typeof t.currencyCode||n.push(new Ye(e,"details.currencyCode","string"))),n}};!function(t){t.REQUEST_APPLE_PAY_CARD_NONCE="REQUEST_APPLE_PAY_CARD_NONCE",t.REQUEST_APPLE_PAY_MERCHANT_VALIDITY="REQUEST_APPLE_PAY_MERCHANT_VALIDITY"}(Br||(Br={}));var Gr,Xp={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function Cc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cc(Object(n),!0).forEach(function(r){$p(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cc(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.PENDING="pending",t.FINAL="final"}(Gr||(Gr={}));var eh={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},th=["visa","masterCard","jcb","discover","amex"];function So(t){return{amount:t.amount,label:t.label,type:t.pending?Gr.PENDING:Gr.FINAL}}function Oc(t){return{amount:t.amount,detail:"",identifier:t.id,label:t.label}}function Pc(t,e){return e?So(e):t}function Oo(t,e){return e?e.map(So):t}function Tc(t,e){return e?e.map(Oc):t}function Po(){for(var t=3;t>0&&!window.ApplePaySession.supportsVersion(t);)t--;return t}function nh(t){var{addressLines:e,locality:n,administrativeArea:r,postalCode:i,countryCode:o,givenName:a,familyName:s,emailAddress:c,phoneNumber:u}=t;return{addressLines:e,city:n,countryCode:o&&o.toUpperCase(),email:c,familyName:s,givenName:a,phone:u,postalCode:i,state:r}}function To(t){var{amount:e,identifier:n,label:r}=t;return{amount:e,id:n,label:r}}function Ro(t,e,n){return{errors:(r=t,i=[],r.error&&i.push(new window.ApplePayError("addressUnserviceable","postalAddress",r.error)),r.shippingErrors&&Object.entries(r.shippingErrors).forEach(o=>{var[a,s]=o;i.push(new window.ApplePayError("shippingContactInvalid",eh[a]||"postalAddress",s))}),i),newLineItems:Oo(e.lineItems,fn(t,n)),newShippingMethods:Tc(e.shippingMethods,t.shippingOptions),newTotal:Pc(e.total,t.total)};var r,i}function Rc(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function zn(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){Rc(o,r,i,a,s,"next",c)}function s(c){Rc(o,r,i,a,s,"throw",c)}a(void 0)})}}class ah extends rt{constructor(e,n,r){if(super(n),this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.isDestroyed=!1,this.paymentMethodMessenger=new it(this.context),this.paymentRequestLockController=r,this.req=e,void 0===window.ApplePaySession)throw new he(Oe.APPLE_PAY_BROWSER_NOT_SUPPORTED);if(!window.ApplePaySession.canMakePayments())throw new he(Oe.APPLE_PAY_DEVICE_NOT_SUPPORTED);this.validateConfiguration()}tokenize(){var e=this;return zn(function*(){if(e.handleFirstInteraction(),e.isDestroyed)throw new k(_.APPLE_PAY);if(e.sessionInProgress)throw new se([Pr]);e.applePayPaymentRequest=function(d,p){var h=[...th];null!=p&&p.isActive(Q.CanUseInterac)&&h.push("interac");var m,f={countryCode:d.countryCode,currencyCode:d.currencyCode,lineItems:Oo([],fn(d)),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:Tc([],d.shippingOptions),supportedNetworks:h,total:So(d.total)};return d.shippingContact&&(f.shippingContact={addressLines:(m=d.shippingContact).addressLines,administrativeArea:m.state,country:Xp[m.countryCode],countryCode:m.countryCode,emailAddress:m.email,familyName:m.familyName,givenName:m.givenName,locality:m.city,phoneNumber:m.phone,postalCode:m.postalCode}),d.requestBillingContact&&(f.requiredShippingContactFields=["email","name","phone"]),d.requestShippingContact&&(f.requiredShippingContactFields=["postalAddress","name","email","phone"]),f}(e.req,e.featureFlagHandler),e.applePaySession=new window.ApplePaySession(Po(),e.applePayPaymentRequest);var n=e.shippingContactChanged.bind(e);e.applePaySession.onshippingcontactselected=d=>{n(d.shippingContact,e.applePayPaymentRequest)};var r=e.shippingOptionChanged.bind(e);e.applePaySession.onshippingmethodselected=d=>{r(d.shippingMethod,e.applePayPaymentRequest)};var i=new Promise(d=>{e.applePaySession.oncancel=()=>{e.metricsHandler.logEvent(B.ExternalSessionCancel),e.deleteApplePaySession(),d({status:St.CANCEL})}}),o=new Promise((d,p)=>{var h;e.applePaySession.onvalidatemerchant=(h=zn(function*(m){try{var f=yield e.requestApplePayMerchantValidity(m.validationURL,e.applePayPaymentRequest);d(f)}catch(P){p(P)}}),function(m){return h.apply(this,arguments)})}),a=new Promise((d,p)=>{var h;e.applePaySession.onpaymentauthorized=(h=zn(function*(m){try{var f=yield e.requestApplePayCardNonce(m);e.deleteApplePaySession(),d(f)}catch(P){e.deleteApplePaySession(),p(P)}}),function(m){return h.apply(this,arguments)})});e.sessionInProgress=!0,e.paymentRequestLockController.lock(e),e.metricsHandler.logEvent(B.ExternalSessionStart),e.applePaySession.begin();try{var s=yield o;e.applePaySession.completeMerchantValidation(s);var{status:c,token:u,details:l}=yield Promise.race([a,i]);return e.metricsHandler.logEvent(B.ExternalSessionOK),c===St.SUCCESS?{details:l,status:oe.OK,token:u}:{status:oe.CANCEL}}catch(d){throw e.metricsHandler.logEvent(B.ExternalSessionError),d}})()}destroy(){return this.metricsHandler.logEvent(R.Destroyed),this.isDestroyed=!0,this.sessionHandler&&(this.sessionHandler.abort(),this.deleteApplePaySession()),Promise.resolve()}validateConfiguration(){var e=this.session;if(!e.applePayMerchantIdentifier)throw new he(Oe.INVALID_CONFIG,"applePayMerchantIdentifier");if(!e.locationId)throw new he(Oe.INVALID_CONFIG,"locationId")}requestApplePayCardNonce(e){var n=this;return zn(function*(){var r={applepayData:e.payment},i=n.session,o=n.selectedShippingMethod||n.getDefaultShippingMethod();try{var a=yield n.paymentMethodMessenger.request(Br.REQUEST_APPLE_PAY_CARD_NONCE,r);return n.applePaySession.completePayment(window.ApplePaySession.STATUS_SUCCESS),n.context.setPaymentMethodTrackingId(a.paymentMethodTrackingId),n.wasFirstInteractionCalled=!1,yield n.context.updateSession(a.sessionId),function(s,c){var{card:u,cardNonce:l,shippingContact:d,billingContact:p}=s,h={details:{card:u,method:_.APPLE_PAY},status:St.SUCCESS,token:l};if(d){var m={contact:d};c&&(m.option=To(c)),h.details.shipping=m}return p&&(h.details.card&&(h.details.card.billing=p),h.details.billing=p),h}(a,o)}catch(s){throw n.applePaySession.completePayment(window.ApplePaySession.STATUS_FAILURE),s instanceof se||n.errorLogger.captureException(s,i.instanceId,i.sessionId),s}})()}requestApplePayMerchantValidity(e,n){var r=this;return zn(function*(){var i,a=r.session,s={clientId:a.applicationId,locationId:a.locationId,merchantName:n&&n.total?n.total.label:null,sourceUrl:a.sourceUrl,validationUrl:e};try{i=yield r.paymentMethodMessenger.request(Br.REQUEST_APPLE_PAY_MERCHANT_VALIDITY,s)}catch(c){throw r.applePaySession.abort(),r.deleteApplePaySession(),c}try{return JSON.parse(i.session)}catch(c){throw r.applePaySession.abort(),r.deleteApplePaySession(),r.errorLogger.captureException(new $(c.message,_.APPLE_PAY),r.session.instanceId,r.session.sessionId),new Y("parsing Apple Pay merchant validity")}})()}shippingContactChanged(e,n){var r=Po()>=3?this.updateApplePayShippingContactV3(n):this.updateApplePayShippingContactLegacy(n);this.req.hasEventListener(X.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent(X.SHIPPING_CONTACT_CHANGED,{contactOrOption:nh(e)},i=>{this.handleShippingContactUpdate(r,i)}):this.handleShippingContactUpdate(r)}handleShippingContactUpdate(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null===(n=r.shippingOptions)||void 0===n?void 0:n[0],o=this.getDefaultShippingMethod();void 0===i&&null!==o&&(i=To(o)),void 0!==i&&this.req.hasEventListener(X.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=Oc(i),this.req.dispatchEvent(X.SHIPPING_OPTION_CHANGED,{contactOrOption:i},a=>{e(Object.assign({},r,a))})):e(r)}shippingOptionChanged(e,n){this.selectedShippingMethod=e;var r=Po()>=3?this.updateApplePayShippingMethodV3(n):this.updateApplePayShippingMethodLegacy(n);this.req.hasEventListener(X.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent(X.SHIPPING_OPTION_CHANGED,{contactOrOption:To(e)},r):r()}updateApplePayPaymentRequest(e){e.newTotal&&(this.applePayPaymentRequest.total=e.newTotal),e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),e.newShippingMethods&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){var n=this;return function(){var i=Ro(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e,n.req);n.updateApplePayPaymentRequest(i),n.metricsHandler.logEvent(B.ShippingAddressChangeOK),n.applePaySession.completeShippingContactSelection(i)}}updateApplePayShippingContactLegacy(e){var n=this;return function(){var i=function rh(t,e,n){var r=Ro(t,e,n);return Sc({status:window.ApplePaySession.STATUS_SUCCESS},r)}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e,n.req);n.updateApplePayPaymentRequest(i),n.metricsHandler.logEvent(B.ShippingAddressChangeOK),n.applePaySession.completeShippingContactSelection(i.status,i.newShippingMethods,i.newTotal,i.newLineItems)}}updateApplePayShippingMethodV3(e){var n=this;return function(){var i=function ih(t,e,n){return{newLineItems:Oo(e.lineItems,fn(t,n)),newTotal:Pc(e.total,t.total)}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e,n.req);n.updateApplePayPaymentRequest(i),n.metricsHandler.logEvent(B.ShippingOptionChangeOK),n.applePaySession.completeShippingMethodSelection(i)}}updateApplePayShippingMethodLegacy(e){var n=this;return function(){var i=function oh(t,e,n){var r=Ro(t,e,n);return Sc({status:window.ApplePaySession.STATUS_SUCCESS},r)}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e,n.req);n.updateApplePayPaymentRequest(i),n.metricsHandler.logEvent(B.ShippingOptionChangeOK),n.applePaySession.completeShippingMethodSelection(i.status,i.newTotal,i.newLineItems)}}getDefaultShippingMethod(){var e=this.applePayPaymentRequest.shippingMethods;return e&&e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}get applePaySession(){if(!this.sessionHandler){var e="Apple Pay Session is expected to exist when it does not.";throw this.errorLogger.captureException(new $(e,"Apple Pay"),this.session.instanceId,this.session.sessionId),new Y(e)}return this.sessionHandler}set applePaySession(e){this.sessionHandler=e}deleteApplePaySession(){delete this.sessionHandler,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent(g.FirstInteraction),this.wasFirstInteractionCalled=!0)}}function sh(t,e){return Intl.NumberFormat(v.windowNavigationLanguage,{currency:e,style:"currency"}).format(Number.parseFloat(t))}var ch=["PAN_ONLY","CRYPTOGRAM_3DS"],uh=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"];function wc(t){return{label:t.label,price:t.amount,status:t.pending?H.Estimated:H.Final,type:"LINE_ITEM"}}function Nc(t,e){var n=e??t;return n?n.map(r=>wc(r)):[]}function lh(t,e){return e.map(n=>{return{description:sh((i=n).amount,t),id:i.id,label:i.label};var i})}function bc(t,e,n,r){var i=r??n;if(i&&i.length>0){var o={shippingOptions:lh(t,i)};return i.some(a=>a?.id===e)&&(o.defaultSelectedOptionId=e),o}}function Lc(t,e){return e?.find(n=>n.id===t)}function Dc(t,e,n,r,i,o){var{countryCode:a,currencyCode:s,total:c,lineItems:u,taxLineItems:l,discounts:d,requestBillingContact:p,requestShippingContact:h,shippingOptions:m}=e,f=Io(e),P=Boolean(h||f),b=Object.assign({},t,{emailRequired:Boolean(p),merchantInfo:i,shippingAddressRequired:P,shippingOptionRequired:f,transactionInfo:{countryCode:a,currencyCode:s,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:r}});if(u&&u.length>0&&(b.transactionInfo.displayItems=Nc([],fn({lineItems:u,taxLineItems:l,discounts:d},e))),P&&(b.shippingAddressParameters={phoneNumberRequired:!0}),f){var j=bc(s,o,[],m);j&&(b.shippingOptionParameters=j)}return n.length>0&&(b.callbackIntents=n),b}function Uc(t,e){var n=[];return t.error&&n.push({intent:e,message:t.error,reason:un.SHIPPING_ADDRESS_UNSERVICEABLE}),t.shippingErrors&&Object.entries(t.shippingErrors).forEach(r=>{var[i,o]=r;n.push({intent:e,message:"".concat(i,": ").concat(o),reason:un.SHIPPING_ADDRESS_INVALID})}),n}function xc(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function gn(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){xc(o,r,i,a,s,"next",c)}function s(c){xc(o,r,i,a,s,"throw",c)}a(void 0)})}}var Kn,Mc,kc,Vr,dh=["#google"];class ph extends rt{constructor(e,n,r,i,o){var a,p,h,m,f,P;super(r),this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.isDestroyed=!1,this.validateConfiguration(),this.paymentRequestLockController=o,this.req=n,this.merchantInfo=i,this.element=null,this.paymentMethodMessenger=new it(r),Io(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(a=this.req.shippingOptions)||void 0===a?void 0:a[0].id),this.callbackIntents=(h=this.handlers,m=[],f=Io(p=this.req)&&h.includes(X.SHIPPING_OPTION_CHANGED),P=p.requestShippingContact&&h.includes(X.SHIPPING_CONTACT_CHANGED),f?m.push(q.SHIPPING_ADDRESS,q.SHIPPING_OPTION):P&&m.push(q.SHIPPING_ADDRESS),(!v.isAndroid()||f||P)&&m.push(q.PAYMENT_AUTHORIZATION),m);var s,c,u,l,d=function(p,h,m){var f={environment:A.GOOGLE_PAY_ENV,merchantInfo:m},P=p.includes(q.SHIPPING_OPTION)||p.includes(q.SHIPPING_ADDRESS);if(!v.isAndroid()||P){var b={onPaymentAuthorized:()=>({transactionState:re.SUCCESS})};P&&(b.onPaymentDataChanged=h),f.paymentDataCallbacks=b}return f}(this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(d),this.isReadyToPayRequest=(s=this.session.applicationId,c=this.req.requestBillingContact,l=[...uh],null!=(u=this.featureFlagHandler)&&u.isActive(Q.CanUseInterac)&&l.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:ch,allowedCardNetworks:l,billingAddressParameters:{format:c?te.FULL:te.MIN,phoneNumberRequired:Boolean(c)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:s},type:Te.PAYMENT_GATEWAY},type:V.CARD}],apiVersion:2,apiVersionMinor:0})}attach(e,n){var r=this;return gn(function*(){var i,o,a;if(r.isDestroyed)throw new k(_.GOOGLE_PAY);var s=null!==(i=n?.buttonColor)&&void 0!==i?i:yr.DEFAULT,c=null!==(o=n?.buttonSizeMode)&&void 0!==o?o:vr.STATIC,u=null!==(a=n?.buttonType)&&void 0!==a?a:Er.LONG;r.metricsHandler.logEvent(g.AttachStart),r.metricsHandler.logEvent(R.Configured,n);try{r.element=vo(e)}catch(d){throw r.metricsHandler.logEvent(g.AttachError),d}r.isReadyToPay=yield r.checkIfReadyToPay(g.AttachError);try{var l=r.googlePayClient.createButton({buttonColor:s,buttonSizeMode:c,buttonType:u,onClick:()=>{}});return r.element.appendChild(l),r.metricsHandler.logEvent(g.AttachOK),Promise.resolve()}catch(d){throw r.errorLogger.captureException(d),r.metricsHandler.logEvent(g.AttachError),new he(Oe.UNKNOWN,d)}})()}destroy(){return this.metricsHandler.logEvent(R.Destroyed),this.isDestroyed=!0,this.element&&(this.element.innerHTML=""),Promise.resolve()}tokenize(){var e=this;return gn(function*(){if(e.handleFirstInteraction(),e.isDestroyed)throw new k(_.GOOGLE_PAY);var n;e.metricsHandler.logEvent(B.ExternalSessionStart),e.isReadyToPay=e.isReadyToPay||(yield e.checkIfReadyToPay(B.ExternalSessionError)),e.paymentRequestLockController.lock(e);try{n=yield e.loadPaymentData(),delete e.googlePayTokenDeferred,e.metricsHandler.logEvent(B.ExternalSessionOK)}catch(o){if(delete e.googlePayTokenDeferred,e.paymentRequestLockController.unlock(e),"CANCELED"===o.statusCode)return e.metricsHandler.logEvent(B.ExternalSessionCancel),{status:oe.CANCEL};throw e.metricsHandler.logEvent(B.ExternalSessionError),o instanceof Error?(e.errorLogger.captureException(o),o):(e.errorLogger.captureException(new $(JSON.stringify(o),_.GOOGLE_PAY)),new Y("tokenizing Google Pay."))}var{token:r,details:i}=yield e.requestGooglePayCardNonce(n);return{details:i,status:oe.OK,token:r}})()}validateConfiguration(){var e=dh.join(", ");if(document.querySelectorAll(e).length>0)throw new Oi(_.GOOGLE_PAY,e)}checkIfReadyToPay(e){var n=this;return gn(function*(){var r;try{r=yield n.googlePayClient.isReadyToPay(n.isReadyToPayRequest)}catch(a){n.errorLogger.captureException(new $('Calling googlePayClient.isReadyToPay threw "'.concat(a,'"'))),r={result:!1}}var i=Boolean(r.result);if(!i)throw e&&n.metricsHandler.logEvent(e),new he(Oe.GOOGLE_PAY_BROWSER_NOT_SUPPORTED);return n.googlePayClient.prefetchPaymentData(Dc(n.isReadyToPayRequest,n.req,n.callbackIntents,n.callbackIntents.length>0?H.Unknown:H.Final,n.merchantInfo,n.selectedShippingOptionId)),i})()}get handlers(){var e=[];return this.req.hasEventListener(X.SHIPPING_OPTION_CHANGED)&&e.push(X.SHIPPING_OPTION_CHANGED),this.req.hasEventListener(X.SHIPPING_CONTACT_CHANGED)&&e.push(X.SHIPPING_CONTACT_CHANGED),e}loadPaymentData(){return this.googlePayTokenDeferred||(this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(Dc(this.isReadyToPayRequest,this.req,this.callbackIntents,H.Final,this.merchantInfo,this.selectedShippingOptionId))),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case q.INITIALIZE:case q.SHIPPING_ADDRESS:return this.onPaymentDataChangedShippingAddress(e);case q.SHIPPING_OPTION:return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new $("Unknown callbackTrigger: ".concat(e.callbackTrigger))),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var n=this;return gn(function*(){var r;n.selectedShippingOptionId=null===(r=e.shippingOptionData)||void 0===r?void 0:r.id;var{updatedOptionRequest:i,optionErrors:o}=yield n.dispatchShippingOptionChanged(n.selectedShippingOptionId,n.shippingOptions);return n.paymentDataChangedComplete(i,o)})()}dispatchShippingOptionChanged(e,n){var r={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes(X.SHIPPING_OPTION_CHANGED))return Promise.resolve(r);var i=Lc(e,n);return i?this.isDestroyed?Promise.resolve({optionErrors:[{intent:q.SHIPPING_OPTION,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:un.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise(o=>{this.req.dispatchEvent(X.SHIPPING_OPTION_CHANGED,{contactOrOption:i},function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o({optionErrors:Uc(a,q.SHIPPING_OPTION),updatedOptionRequest:a})})}):Promise.resolve(r)}onPaymentDataChangedShippingAddress(e){var n=this;return gn(function*(){var{updatedContactRequest:r,contactErrors:i}=yield n.dispatchShippingContactChanged(e);if(void 0===n.req.shippingOptions||0===n.req.shippingOptions.length)return n.paymentDataChangedComplete(r,i);var o,a=n.shippingOptions;void 0!==r.shippingOptions?(a=r.shippingOptions,n.selectedShippingOptionId=r.shippingOptions[0].id):n.selectedShippingOptionId=null===(o=n.shippingOptions)||void 0===o?void 0:o[0].id;var{updatedOptionRequest:s,optionErrors:c}=yield n.dispatchShippingOptionChanged(n.selectedShippingOptionId,a),u=Object.assign({},r,s),l=[...i,...c];return n.paymentDataChangedComplete(u,l)})()}dispatchShippingContactChanged(e){var n={contactErrors:[],updatedContactRequest:{}};return new Promise(r=>{var i;void 0!==e.shippingAddress&&this.handlers.includes(X.SHIPPING_CONTACT_CHANGED)?this.isDestroyed?r({contactErrors:[{intent:q.SHIPPING_ADDRESS,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:un.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):this.req.dispatchEvent(X.SHIPPING_CONTACT_CHANGED,{contactOrOption:(i=e.shippingAddress,{city:i.locality,countryCode:i.countryCode,postalCode:i.postalCode,state:i.administrativeArea})},function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r({contactErrors:Uc(o,q.SHIPPING_ADDRESS),updatedContactRequest:o})}):r(n)})}paymentDataChangedComplete(e,n){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var r=function(i,o,a,s){var c,{total:u,countryCode:l,currencyCode:d}=o,p=a,h=wc(null!==(c=i.total)&&void 0!==c?c:u),f=Object.assign({},{countryCode:l,currencyCode:d},{totalPrice:h.price,totalPriceLabel:h.label,totalPriceStatus:h.status}),P=Nc(fn(o),fn(i,o));P.length>0&&(f.displayItems=P);var b={newTransactionInfo:f},j=bc(d,s,p,i.shippingOptions);return j&&(b.newShippingOptionParameters=j),b}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return n.length>0&&(r.error=n[0]),r}requestGooglePayCardNonce(e){var n=this;return gn(function*(){var r=n.session,i=Lc(n.selectedShippingOptionId,n.shippingOptions);try{var o=yield n.paymentMethodMessenger.request(Or.REQUEST_GOOGLE_PAY_CARD_NONCE,e);return n.context.setPaymentMethodTrackingId(o.paymentMethodTrackingId),yield n.context.updateSession(o.sessionId),n.wasFirstInteractionCalled=!1,n.paymentRequestLockController.unlock(n),function(a,s){var{card:c,cardNonce:u,shippingContact:l,billingContact:d}=a,p={details:{card:c,method:_.GOOGLE_PAY},token:u};return l&&(p.details.shipping={contact:l},s&&(p.details.shipping.option=s)),d&&(p.details.card&&(p.details.card.billing=d),p.details.billing=d),p}(o,i)}catch(a){throw n.paymentRequestLockController.unlock(n),a instanceof se||n.errorLogger.captureException(a,r.instanceId,r.sessionId),a}})()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(g.FirstInteraction))}}(function(t){t.SHIPPING_ADDRESS_UNRECOGNIZED="SHIPPING_ADDRESS_UNRECOGNIZED",t.SHIPPING_ADDRESS_UNSUPPORTED="SHIPPING_ADDRESS_UNSUPPORTED",t.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE"})(Kn||(Kn={})),function(t){t.BADGE="badge",t.LOCKUP="lockup"}(Mc||(Mc={})),function(t){t.BLACK="black",t.WHITE="white",t.MINT="mint"}(kc||(kc={})),function(t){t.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN="REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN",t.REQUEST_AFTERPAY_CHECKOUT_HANDLER="REQUEST_AFTERPAY_CHECKOUT_HANDLER"}(Vr||(Vr={}));var Hc="sq-afterpay-styles",hh={[Je.BLACK]:{[ge.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg",[ge.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg",[ge.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg"},[Je.MINT]:{[ge.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg",[ge.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg",[ge.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg"}},mh={[Je.BLACK]:{[ge.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg",[ge.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg",[ge.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg"},[Je.MINT]:{[ge.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg",[ge.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg",[ge.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg"}},fh=new Set(["US","CA","AU","NZ"]);function Fc(t,e){var n=0;return t.forEach(r=>{n+=z.paymentRequestAmountToMoneyAmount(r,e)}),z.moneyAmountToPaymentRequestAmount(n,e)}function wo(t,e){return Fc(t.map(n=>n.amount),e)}var Eh=function(t){if(t.requestShippingContact&&void 0!==t.lineItems&&t.lineItems.length>0){var e=wo(t.lineItems,t.currencyCode);return t.discounts&&(e=Fc([e,(n=t.discounts,r=t.currencyCode,"-".concat(wo(n,r)))],t.currencyCode)),{amount:e,currency:t.currencyCode}}var n,r;return{amount:t.total.amount,currency:t.currencyCode}},Ah=function(t){var e,n,r=[];return[t.address1,t.address2].forEach(i=>{void 0!==i&&r.push(i)}),t.name&&([e,n]=t.name.split(/\s(?=\S+$)/)),{givenName:e,familyName:n,city:t.suburb,state:t.state,postalCode:t.postcode,countryCode:t.countryCode,phone:t.phoneNumber,addressLines:r}},Ih=function(t){return{amount:t.shippingAmount.amount,id:t.id,label:t.name}};function jc(t){var e=t.split("-")[1];return fh.has(e)}var Bc,qc=function(t){return jc(t)?"afterpay-brand.svg":"clearpay-brand.svg"},Ph=[se];!function(t){t.UNKNOWN="UNKNOWN",t.UNAUTHORIZED="UNAUTHORIZED",t.TRANSACTION_LIMIT="TRANSACTION_LIMIT",t.UNSUPPORTED_CURRENCY="UNSUPPORTED_CURRENCY"}(Bc||(Bc={}));var Th=[Cn,Sn];function Gc(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}var Rh=[25,50,75,100];class wh{constructor(e,n){this.attached=!1,this.req=e,this.stylesLoadedPromise=new Promise((i,o)=>{this.resolveStylePromise=i,this.rejectStylePromise=o}),this.context=n,this.locale=this.context.getSession().locale,this.currencyCode=this.req.currencyCode;var r=this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.weeks;this.PERIOD_TEXT=[this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.today,"2 ".concat(r),"4 ".concat(r),"6 ".concat(r)],n.addLocaleChangedListener(()=>{this.locale=this.context.getSession().locale,this.update()}),e.addEventListener(mn.UPDATE,()=>{this.update()})}attach(e,n){var r,i=this;return(r=function*(){i.element=e,qn.addStyleElement(A.AFTERPAY_STYLES,Hc,i.resolveStylePromise,i.rejectStylePromise);try{yield i.stylesLoadedPromise}catch{throw new Y("attaching the Afterpay Checkout Widget")}var o=i.buildAmounts().map(u=>z.moneyAmountToInternationalizedCurrency(u,i.currencyCode,i.locale)),a=!1;n&&n.includeBranding&&(a=!0);var s=qc(i.locale),c='\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(a?'<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(A.STATIC_ASSET(s),'"/>\n              </div>'):"",'\n        <p class="sq-ap__checkout-title">').concat(i.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title,'</p>\n        <div class="sq-ap__payment-container">\n          ').concat(o.map((u,l)=>{return'\n              <div id="ap-payment-container-'.concat(l,'" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat((d=l,p=12,h=2*Math.PI*6,m=h*Rh[d]/100,'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24," ").concat(24,'" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(p,'"\n          cx="').concat(p,'"\n          cy="').concat(p,'"\n          fill="white"\n        />\n        <circle\n          r="').concat(6,'"\n          cx="').concat(p,'"\n          cy="').concat(p,'"\n          fill="none"\n          stroke="').concat("#B2FCE4",'"\n          stroke-width="').concat(p,'"\n          stroke-dasharray="').concat(m," ").concat(h,'"\n          transform="rotate(-90) translate(-').concat(24,')"\n        />\n        <circle\n          r="').concat(p,'"\n          cx="').concat(p,'"\n          cy="').concat(p,'"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ')),'\n                </div>\n                <p id="ap-payment-amount-').concat(l,'" class="sq-ap__amount">').concat(u,'</p>\n                <p class="sq-ap__period">').concat(i.PERIOD_TEXT[l],"</p>\n              </div>\n            ");var d,p,h,m}).join(""),"\n        </div>\n      </div>\n    ");i.element.insertAdjacentHTML("afterbegin",c),i.attached=!0},function(){var o=this,a=arguments;return new Promise(function(s,c){var u=r.apply(o,a);function l(p){Gc(u,s,c,l,d,"next",p)}function d(p){Gc(u,s,c,l,d,"throw",p)}l(void 0)})})()}update(){if(this.attached&&this.element){var e=document.getElementById("ap-wordmark-image");if(e){var n=qc(this.locale);e.src=A.STATIC_ASSET(n)}this.buildAmounts().map(r=>z.moneyAmountToInternationalizedCurrency(r,this.currencyCode,this.locale)).forEach((r,i)=>{var o,a=null===(o=this.element)||void 0===o?void 0:o.querySelector("#ap-payment-amount-".concat(i));a&&(a.innerHTML=r)})}}buildAmounts(){var e=z.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),n=e/4;switch(e%4){case 0:return Yr(n,0);case 1:return Yr(n,1);case 2:return Yr(n,-2);case 3:return Yr(n,-1);default:return[]}}}function Yr(t,e){var n=Array.from({length:3}).fill(Math.round(t));return n.push(t+e),n}function Vc(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function ke(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){Vc(o,r,i,a,s,"next",c)}function s(c){Vc(o,r,i,a,s,"throw",c)}a(void 0)})}}var yn,No,Nh=new Set(["en_US","en_CA","fr_CA","en_AU","en_NZ","en_GB","fr_FR","es_ES","it_IT"]),Yc=new Set(["AUD","GBP","USD","CAD","EUR"]),bh={[Je.BLACK]:"#000",[Je.MINT]:"#b2fce4"};class Lh extends rt{constructor(e,n,r,i,o){if(super(i),this.onTokenizeCallbacks=[],this.tokenizationBuffer=[],this.isDestroyed=!1,this.isAttached=!1,this.wasFirstInteractionCalled=!1,this.onTokenizeHandlerAdded=!1,this.transferOptions={},this.buyNowOption=!1,this.afterpayLibrary=e,this.afterpayMessagingLibrary=n,this.req=r,this.paymentRequestLockController=o,this.paymentMessenger=new it(this.context),this.total=this.totalMoney(),!this.session.locationId)throw new he(Oe.INVALID_CONFIG,"locationId");this.locationID=this.session.locationId,this.req.addEventListener("update",()=>{this.checkoutToken=void 0,this.element&&this.initializeAfterpayPopup(this.element),this.total=this.totalMoney()}),this.stylesLoadedPromise=new Promise((a,s)=>{this.resolveStylePromise=a,this.rejectStylePromise=s})}attach(e,n){var r=this;return ke(function*(){if(r.isDestroyed)throw new k("Afterpay");if(r.element)throw new Xe("Afterpay");var i,o;r.metricsHandler.logEvent(g.AttachStart),r.metricsHandler.logEvent(R.Configured,n);try{i=vo(e)}catch(d){throw r.metricsHandler.logEvent(g.AttachError),d}if(!n||!n.useCustomButton){qn.addStyleElement(A.AFTERPAY_STYLES,Hc,r.resolveStylePromise,r.rejectStylePromise);try{yield r.stylesLoadedPromise}catch{throw new Y("attaching Afterpay")}var a=n?.buttonColor||Je.BLACK,s=n?.buttonType||ge.BuyNowWithAfterpay,c=function(t,e){return jc(e)?hh[t]:mh[t]}(a,r.session.locale);if(!c)throw new xe("buttonColor",a);var u=c[s];if(!u)throw new xe("buttonType",s);var l='\n        <button\n          type="button"\n          class="sq-ap__button"\n          style="\n            background-color: '.concat(bh[a],";\n            background-image: url(").concat(A.STATIC_ASSET(u),');\n          "\n        ></button>\n      ');i.insertAdjacentHTML("afterbegin",l)}return r.buyNowOption=n?.finalCtaButtonType===Si.BUY_NOW,r.initializeAfterpayPopup(i),r.metricsHandler.logEvent(g.AttachOK),r.element=i,r.isAttached=!0,r.onTokenizeHandlerAdded&&(null===(o=r.element)||void 0===o||o.addEventListener("click",ke(function*(){yield r.openPaymentModal()}))),Promise.resolve()})()}attachMessaging(e,n){if(this.isDestroyed)throw new k("Afterpay");return go(e,Op),this.afterpayMessagingLibrary.createPlacements({targetSelector:e,attributes:{amount:Number(this.req.total.amount),badgeTheme:n?.badgeTheme,currency:this.req.currencyCode,locale:this.session.locale,modalLinkStyle:n?.modalLinkStyle,modalTheme:n?.modalTheme,size:n?.size}}),Promise.resolve()}attachCheckoutWidget(e,n){var r=this;return ke(function*(){if(!Yc.has(r.req.currencyCode))throw new rn("Currency is not supported by Afterpay. Valid currencies are: ".concat([...Yc].join(", ")));var i=new wh(r.req,r.context),o=vo(e);yield i.attach(o,n)})()}displayInformationModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=z.convertLocaleToUnderscore(this.session.locale);Nh.has(n)||(n="en_US"),this.afterpayMessagingLibrary.launchModal(Object.assign({},e,{locale:n}))}onTokenize(e){var n,r=this;if(this.isDestroyed)throw new k("Afterpay");this.onTokenizeCallbacks.push(e),1===this.onTokenizeCallbacks.length&&(this.tokenizationBuffer.forEach(i=>{var{result:o,error:a}=i;this.emitTokenizationResult(o,a)}),this.tokenizationBuffer=[]),this.onTokenizeHandlerAdded||void 0===this.element||null===(n=this.element)||void 0===n||n.addEventListener("click",ke(function*(){yield r.openPaymentModal()})),this.onTokenizeHandlerAdded=!0}tokenize(){var e=this;return ke(function*(){if(!e.isAttached)throw new ae("Afterpay");if(e.isDestroyed)throw new k("Afterpay");if(e.onTokenizeHandlerAdded)throw new pr;var n,r,i=new Promise((o,a)=>{n=o,r=a});return e.onTokenizeCallbacks=[function(o,a){void 0===a?void 0!==o?n(o):r(new se([pl.UNKNOWN])):r(a)}],yield e.openPaymentModal(),i})()}destroy(){return this.isDestroyed=!0,this.afterpayLibrary.close(),this.element&&(this.element.innerHTML=""),this.tokenizationBuffer=[],this.onTokenizeCallbacks=[],Promise.resolve()}internalSetCheckoutToken(){var e=this;return ke(function*(){try{var n=yield e.paymentMessenger.request(Vr.REQUEST_AFTERPAY_CHECKOUT_HANDLER,e.buildCheckoutPayload());return e.checkoutToken=n.token,e.checkoutToken}catch(i){var r=i;throw z.isInstanceOf(i,[...Th,Ze,rn])||(e.errorLogger.captureException(i,e.session.instanceId,e.session.sessionId),r=new Y("tokenizing with Afterpay")),r}})()}commenceCheckout(e){var n=this;return ke(function*(){if(n.wasFirstInteractionCalled||(n.wasFirstInteractionCalled=!0,n.metricsHandler.logEvent(g.FirstInteraction)),n.metricsHandler.logEvent(B.ExternalSessionStart),n.paymentRequestLockController.lock(n),void 0===n.checkoutToken)try{var r=yield n.internalSetCheckoutToken();e.resolve(r)}catch(i){n.paymentRequestLockController.unlock(n),n.metricsHandler.logEvent(B.ExternalSessionError),n.emitTokenizationResult(void 0,i),e.reject(i.message)}else e.resolve(n.checkoutToken)})()}completeCheckout(e){var n=this;return ke(function*(){try{if("SUCCESS"===(s=e).status&&void 0!==s.orderToken){var r,i=yield n.paymentMessenger.request(Vr.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN,n.buildInstantWalletTokenPayload(e.orderToken,n.total));n.context.updateSession(i.sessionID),n.metricsHandler.logEvent(B.ExternalSessionOK);var o={details:{method:_.AFTERPAY_CLEARPAY,shipping:{contact:{email:null==i||null===(r=i.afterpayData)||void 0===r?void 0:r.email}}},status:oe.OK,token:i.token};null!=i&&i.billingContact&&(o.details.billing=i?.billingContact),null!=i&&i.shippingContact&&(o.details.shipping={contact:i?.shippingContact}),n.emitTokenizationResult(o)}else n.metricsHandler.logEvent(B.ExternalSessionCancel),n.emitTokenizationResult({status:oe.CANCEL})}catch(s){var a=s;n.metricsHandler.logEvent(B.ExternalSessionError),z.isInstanceOf(s,Ph)||(n.errorLogger.captureException(s,n.session.instanceId,n.session.sessionId),a=new Y("tokenizing Afterpay")),n.emitTokenizationResult(void 0,a)}var s;n.paymentRequestLockController.unlock(n)})()}onShippingOptionChange(e){this.metricsHandler.logEvent(B.ShippingOptionChangeOK),this.total.amount=z.paymentRequestAmountToMoneyAmount(e.orderAmount.amount,this.req.currencyCode),this.req.dispatchEvent(Ue.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:Ih(e)},n=>{})}onShippingAddressChange(e,n){if(!this.req.hasEventListener(Ue.AFTERPAY_SHIPPING_ADDRESS_CHANGED))return this.emitTokenizationResult(void 0,new hr("PaymentRequest",Ue.AFTERPAY_SHIPPING_ADDRESS_CHANGED)),n.reject(Kn.SERVICE_UNAVAILABLE),void this.afterpayLibrary.close();var r=this.req;this.metricsHandler.logEvent(B.ShippingAddressChangeOK),this.req.dispatchEvent(Ue.AFTERPAY_SHIPPING_ADDRESS_CHANGED,{contactOrOption:Ah(e)},i=>{if(i.error)n.reject(Kn.SHIPPING_ADDRESS_UNSUPPORTED);else if(i.shippingErrors)n.reject(Kn.SHIPPING_ADDRESS_UNRECOGNIZED);else{var o=function(t,e){return t.shippingOptions.map(n=>({description:"",id:n.id,name:n.label,shippingAmount:{amount:n.amount,currency:e.currencyCode},orderAmount:{amount:n.total.amount,currency:e.currencyCode},taxAmount:{amount:wo(n.taxLineItems||[],e.currencyCode),currency:e.currencyCode}}))}(i,r);n.resolve(o)}})}emitTokenizationResult(e,n){0===this.onTokenizeCallbacks.length?this.tokenizationBuffer.push({result:e,error:n}):this.onTokenizeCallbacks.forEach(r=>{r(e,n)})}buildInstantWalletTokenPayload(e,n){return{paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),analyticsToken:this.session.analyticsToken,afterpayData:{afterpayToken:e,buyerAmount:n},clientID:this.session.applicationId,locationID:this.locationID,sessionID:this.session.sessionId,websdkVersion:A.VERSION,websiteURL:this.session.sourceUrl,requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact}}buildCheckoutPayload(){var e,n={applicationID:this.session.applicationId,discounts:[],locationID:this.locationID,popupOriginUrl:this.session.sourceUrl,amount:Eh(this.req)};if(this.req.lineItems&&(n.items=function(t,e){return t.map(n=>({name:n.label,quantity:1,sku:n.id,price:{amount:n.amount,currency:e},imageUrl:n.imageUrl,pageUrl:n.productUrl}))}(this.req.lineItems,this.req.currencyCode)),this.req.discounts&&(n.discounts=function(t,e){return t.map(n=>({displayName:n.label,amount:{amount:n.amount,currency:e}}))}(this.req.discounts,this.req.currencyCode)),this.req.requestShippingContact)e=this.req.shippingContact;else{if(void 0===this.req.pickupContact)throw new rn("Pickup contact is required when not requesting the shipping contact");e=this.req.pickupContact}if(void 0!==e){var r=function(t){return function Ch(t,e){return Pt({[e]:t},{[e]:{city:"string",countryCode:"string",addressLines:"object",postalCode:"string",state:"string",givenName:"string",familyName:"string"}})}(t,"shippingContact")}(e);if(!r.isValid)throw new Ze(r.missingFields);n.shipping=function(t){return{area1:t.city,countryCode:t.countryCode,line1:t.addressLines[0],line2:t.addressLines[1],name:"".concat(t.givenName," ").concat(t.familyName),phoneNumber:t.phone,postcode:t.postalCode,region:t.state}}(e)}return n}totalMoney(){return{amount:z.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),currency:this.req.currencyCode}}openPaymentModal(){var e=this;return ke(function*(){e.afterpayLibrary.open();var n=yield new Promise((r,i)=>{e.commenceCheckout({resolve:r,reject:i})});e.afterpayLibrary.transfer(Object.assign({token:n},e.transferOptions))})()}initializeAfterpayPopup(e){var n=this.commenceCheckout.bind(this),r=this.completeCheckout.bind(this),i=document.createElement("div");i.id="sq-afterpay-dummy-element-".concat(xn()),i.style.visibility="hidden",e.appendChild(i),this.transferOptions={buyNow:this.buyNowOption,shippingOptionRequired:this.req.requestShippingContact};var o,a,s={countryCode:this.req.countryCode,onCommenceCheckout:(a=ke(function*(c){yield n(c)}),function(c){return a.apply(this,arguments)}),onComplete:(o=ke(function*(c){var{data:u}=c;yield r(u)}),function(c){return o.apply(this,arguments)}),target:"#".concat(i.id),shippingOptionRequired:this.req.requestShippingContact};this.req.requestShippingContact?(s.onShippingAddressChange=this.onShippingAddressChange.bind(this),s.onShippingOptionChange=this.onShippingOptionChange.bind(this)):this.transferOptions.pickup=!0,this.afterpayLibrary.initializeForPopup(s),e.removeChild(i)}}class bo extends E{constructor(e){var n=e.map(r=>{var[i,o]=r;return'expected property: "'.concat(i,'" of type "').concat(o,'"')}).join("\n");super("\n".concat(n)),this.name="InvalidCashAppPayV1OptionsFieldTypes",Object.setPrototypeOf(this,bo.prototype)}}class Lo extends E{constructor(e){var n=e.map(r=>{var[i,o]=r;return'accepted property: "'.concat(i,'" values are "').concat(o,'"')}).join("\n");super("\n".concat(n)),this.name="InvalidCashAppPayV1OptionsFieldValues",Object.setPrototypeOf(this,Lo.prototype)}}class Do extends E{constructor(){super("A grant was not returned from CashApp and is required for tokenization"),this.name="CashAppPayGrantIsUndefinedError",Object.setPrototypeOf(this,Do.prototype)}}!function(t){t.CUSTOMER_INTERACTION="CUSTOMER_INTERACTION",t.CUSTOMER_REQUEST_APPROVED="CUSTOMER_REQUEST_APPROVED",t.CUSTOMER_REQUEST_DECLINED="CUSTOMER_REQUEST_DECLINED",t.CUSTOMER_REQUEST_FAILED="CUSTOMER_REQUEST_FAILED"}(yn||(yn={}));class Uo extends E{constructor(e){super(e),this.name="CashAppPayInvalidPaymentRequestError",Object.setPrototypeOf(this,Uo.prototype)}}class xo extends E{constructor(){super("A redirect url is always required for requests. This must also be a secure link. See here: https://developers.cash.app/docs/pay-kit-technical-reference"),this.name="CashAppPayMissingRedirectUrlError",Object.setPrototypeOf(this,xo.prototype)}}function zc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kc(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function Mo(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){Kc(o,r,i,a,s,"next",c)}function s(c){Kc(o,r,i,a,s,"throw",c)}a(void 0)})}}!function(t){t.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN="REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN"}(No||(No={}));var Wc=new Set(["USD"]);class Uh extends rt{constructor(e,n,r,i,o){if(super(i),this.attached=!1,this.destroyed=!1,this.cashAppPayElementId="cash_app_pay_v1_element",this.eventBuffer=[],this.CashAppPayInstance=e,this.req=n,this.context=i,this.paymentRequestLockController=o,this.element=void 0,this.options=r,this.paymentMessenger=new it(this.context),!this.session.locationId)throw new he(Oe.INVALID_CONFIG,"locationId");if(this.locationId=this.session.locationId,!this.session.cashAppPayMerchantIdentifier)throw new he(Oe.INVALID_CONFIG,"merchantId");if(this.scopeId=this.session.cashAppPayMerchantIdentifier,!Wc.has(this.req.currencyCode))throw new Uo("".concat(this.req.currencyCode," is not supported by CashAppPay. Valid currencies are: ").concat([...Wc].join(", ")));if(!r.redirectURL)throw new xo;var a=this.createCustomerRequestDetails();this.customerRequestCreated=e.customerRequest(a),this.CashAppPayInstance.addEventListener(yn.CUSTOMER_REQUEST_APPROVED,s=>this.customerRequestApprovedEvent(s)),this.CashAppPayInstance.addEventListener(yn.CUSTOMER_REQUEST_DECLINED,s=>this.customerRequestDeclinedEvent(s)),this.CashAppPayInstance.addEventListener(yn.CUSTOMER_REQUEST_FAILED,s=>this.customerRequestFailedEvent(s)),this.CashAppPayInstance.addEventListener(yn.CUSTOMER_INTERACTION,()=>this.registerExternalEventStart())}attach(e,n){var r=this;return Mo(function*(){if(r.destroyed)throw new k("Cash App Pay");if(r.attached)throw new Xe("Cash App Pay");var i=function(c){if(void 0===c)return{isValid:!0,missingFields:[]};var u={};return Object.keys(c).forEach(function(l){os.has(l)&&(u[l]="string")}),Pt(c,u)}(n);if(!i.isValid)throw new bo(i.missingFields);var o=function(c){var u=[],l=!0;if(void 0===c)return{isValid:l,missingFields:u};var d={shape:ss,size:as,values:cs,width:us},p=JSON.parse(ds(c));return Object.entries(p).forEach(function(h){var[m,f]=h;f===tt&&(l=!1,u.push([m,[...d[m]].join(",")]))}),{isValid:l,missingFields:u}}(n);if(!o.isValid)throw new Lo(o.missingFields);r.metricsHandler.logEvent(g.AttachStart),n&&r.metricsHandler.logEvent(R.Configured,n),r.attached=!0,r.element=yo(e);try{var a=document.createElement("div");a.id=r.cashAppPayElementId,r.element.appendChild(a);var s="#".concat(r.cashAppPayElementId);yield r.CashAppPayInstance.render(s,{button:n}),r.metricsHandler.logEvent(g.AttachOK)}catch(c){throw r.metricsHandler.logEvent(g.AttachError),r.attached=!1,c}return Promise.resolve()})()}destroy(){if(this.destroyed)throw new k("Cash App Pay");if(!this.attached)throw new ae("Cash App Pay");return this.destroyed=!0,this.metricsHandler.logEvent(R.Destroyed),this.element&&(this.element.innerHTML=""),Promise.resolve(!0)}addEventListener(e,n){this.metricsHandler.logEvent(R.EventListenerAdded,e),super.addEventListener(e,n),this.eventBuffer.length>0&&(this.eventBuffer.forEach(r=>super.dispatchEvent(r.type,r.detail)),this.eventBuffer=[])}removeEventListener(e,n){super.removeEventListener(e,n)}createCustomerRequestDetails(){var{amount:e}=this.req.total,n=function(r){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?zc(Object(o),!0).forEach(function(a){Dh(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):zc(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}({actions:{payment:{amount:{currency:this.req.currencyCode,value:z.paymentRequestAmountToMoneyAmount(e,this.req.currencyCode)},scopeId:this.scopeId}}},this.options);return n}dispatchOnTokenizationEvent(e){super.hasEventListener("ontokenization")?super.dispatchEvent("ontokenization",{tokenResult:e}):this.eventBuffer.push(new Ti("ontokenization",{tokenResult:e}))}customerRequestApprovedEvent(e){var n=this;return Mo(function*(){var r=yield n.createNonce(e);n.dispatchOnTokenizationEvent(r)})()}customerRequestDeclinedEvent(e){var n={status:oe.CANCEL};this.metricsHandler.logEvent(B.ExternalSessionCancel),this.dispatchOnTokenizationEvent(n)}customerRequestFailedEvent(e){var n={status:oe.ERROR,errors:[new Y("tokenizing Cash App Pay")]};this.metricsHandler.logEvent(B.ExternalSessionError),this.dispatchOnTokenizationEvent(n)}createNonce(e){var n=this;return Mo(function*(){var{customerProfile:r,grants:i,referenceId:o}=e,a=r.cashtag,s=i.payment,c=n.req.total.amount,u=n.req.currencyCode;try{if(!s)throw new Do;var l=yield n.paymentMessenger.request(No.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN,n.buildInstantWalletTokenPayload({amount:c,currency:u},a,s,o));return n.context.updateSession(l.sessionID),n.metricsHandler.logEvent(B.ExternalSessionOK),{details:{method:"Cash App Pay"},status:oe.OK,token:l.token}}catch(p){var d=p;return n.metricsHandler.logEvent(B.ExternalSessionError),z.isInstanceOf(p,[se])||(n.errorLogger.captureException(p,n.session.instanceId,n.session.sessionId),d=new Y("tokenizing CashAppPay")),{status:oe.ERROR,errors:[d]}}})()}buildInstantWalletTokenPayload(e,n,r,i){return{paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),analyticsToken:this.session.analyticsToken,clientID:this.session.applicationId,locationID:this.locationId,sessionID:this.session.sessionId,websdkVersion:A.VERSION,websiteURL:this.session.sourceUrl,requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact,applicationId:this.session.applicationId,cashAppPayData:{referenceId:i,grantId:r.grantId,cashtag:n,totalAmount:{amount:e.amount,currency:e.currency}}}}registerExternalEventStart(){this.metricsHandler.logEvent(B.ExternalSessionStart)}}function Qc(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function Ae(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(c){Qc(o,r,i,a,s,"next",c)}function s(c){Qc(o,r,i,a,s,"throw",c)}a(void 0)})}}function zt(t,e){var{paymentMethodSupportDetail:n,metricsHandler:r}=e,i=e.getSession();if(!i.locationId||0===i.locationId.length)throw new he(Oe.INVALID_CONFIG,"locationId");if(n&&n[t]&&!n[t].IsSupported){var{UnsupportedReasonType:o}=n[t],a=Oe.UNKNOWN;throw o&&o in Qi&&(a=hd[o]),r.logEvent(g.BuildError),new he(a)}}function zr(t,e){if(!(t instanceof jr))throw e.metricsHandler.logEvent(g.BuildError),new Ze([["paymentRequest","PaymentRequest"]])}function Jc(){return(Jc=Ae(function*(t,e){return{authJwt:(yield t.request(Or.GENERATE_GOOGLE_PAY_AUTH_TOKEN,{session:e})).token,merchantId:A.GOOGLE_PAY_MERCHANT_ID}})).apply(this,arguments)}class Fh{constructor(e,n,r){this.localeStrings=new Nl(navigator.language),this.paymentOptions=e,this.metrics=n,this.errorLogger=r,this.paymentRequestLockMap=new WeakMap}overrideStrings(e){var n=this;return Ae(function*(){try{var r=yield n.getPaymentContext(x.App);if(!r.featureFlagHandler.isActive(Q.CanUseOverrideStrings))throw new Pi("overrideStrings");r.metricsHandler.logEvent(R.OverrideStrings,e),r.setTranslationOverrides(e)}catch(i){throw i instanceof $?(n.errorLogger.captureException(i),new Y("overriding the strings")):i}})()}setLocale(e){var n=this;return Ae(function*(){try{var r=yield n.getPaymentContext(x.App);return r.metricsHandler.logEvent(R.SetLocale,e),r.setLocale(e)}catch(i){throw i instanceof $?(n.errorLogger.captureException(i),new Y("setting the locale")):i}})()}verifyBuyer(e,n){var r=this;return Ae(function*(){var i=[];if(r.paymentOptions.locationId&&0!==r.paymentOptions.locationId.length||i.push(new Ye("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||i.push(new Ye("verifyBuyer","source","string")),n&&"object"==typeof n?i.push(...qr.validateVerificationDetails(n,"verifyBuyer")):i.push(new Ye("verifyBuyer","details","object")),i.length>0)throw new Ji(i);var o=yield r.getPaymentContext(x.App);try{o.metricsHandler.logEvent(g.VerificationStart);var a=yield Wi.verifyBuyer({applicationId:r.paymentOptions.applicationId,locationId:r.paymentOptions.locationId,websiteUrl:r.paymentOptions.sourceUrl},e,n);return o.metricsHandler.logEvent(g.VerificationOK),a}catch(s){throw o.metricsHandler.logEvent(g.VerificationError),s instanceof _t?(r.errorLogger.captureException(s),s):new Tn(s)}})()}card(e){var n=this;return Ae(function*(){var r=yield n.getPaymentContext(x.Card);r.metricsHandler.logEvent(g.BuildStart);try{var i=new wp(r,e);return r.metricsHandler.logEvent(g.BuildOK),i}catch(o){throw r.metricsHandler.logEvent(g.BuildError),o}})()}paymentRequest(e){var n=new Yp,r=new jr(e,this.localeStrings,n);return this.paymentRequestLockMap.set(r,n),this.getPaymentContext(x.PaymentRequest).then(i=>{var{metricsHandler:o}=i;r.setPaymentMetricsHandler(o),o.logEvent(R.Configured,e)}),r}googlePay(e){var n=this;return Ae(function*(){var r,i,o=yield n.getPaymentContext(x.GooglePay);o.metricsHandler.logEvent(g.BuildStart),zt(nt.GOOGLE_PAY,o),function(l){if(typeof ShadowRoot>"u")throw l.metricsHandler.logEvent(g.BuildError),new he(Oe.GOOGLE_PAY_BROWSER_NOT_SUPPORTED)}(o),zr(e,o);try{var a=function(l,d){return Jc.apply(this,arguments)}(o.messenger,o.getSession()),s=hn(Ct.GOOGLE,It.GOOGLE,A.GOOGLE_PAY_SCRIPT_URL,()=>{var t,e;return null===(t=window)||void 0===t||null===(e=t.google)||void 0===e?void 0:e.payments});[r,i]=yield Promise.all([s,a])}catch(l){throw o.metricsHandler.logEvent(g.BuildError),l}try{var c=n.getPaymentRequestLock(e),u=function(t,e,n,r,i){return new ph(t,e,n,r,i)}(r,e,o,i,c);return o.metricsHandler.logEvent(g.BuildOK),u}catch(l){throw o.metricsHandler.logEvent(g.BuildError),l}})()}applePay(e){var n=this;return Ae(function*(){var r=yield n.getPaymentContext(x.ApplePay);r.metricsHandler.logEvent(g.BuildStart),zt(nt.APPLE_PAY,r),zr(e,r);try{var i=n.getPaymentRequestLock(e),o=function(t,e,n){return new ah(t,e,n)}(e,r,i);return r.metricsHandler.logEvent(g.BuildOK),o}catch(a){throw r.metricsHandler.logEvent(g.BuildError),a}})()}ach(e){var n=this;return Ae(function*(){var r=yield n.getPaymentContext(x.Ach);r.metricsHandler.logEvent(g.BuildStart),zt(nt.ACH,r),e&&e.redirectURI&&e.transactionId||(r.metricsHandler.logEvent(g.AchMissingRequiredOAuthParameters),console.warn("Missing required OAuth parameters: Chase, Wells Fargo, and Capital One will no longer be available after February 15th, 2022 if these parameters are not provided"));try{var i=yield hn(Ct.PLAID,It.PLAID,A.PLAID_LINK_SCRIPT_URL,()=>{var t;return null===(t=window)||void 0===t?void 0:t.Plaid});return r.metricsHandler.logEvent(g.BuildOK),new yd(i,r,e)}catch(o){throw r.metricsHandler.logEvent(g.BuildError),o}})()}cashApp(e){var n=this;return Ae(function*(){var r=yield n.getPaymentContext(x.CashApp);r.metricsHandler.logEvent(g.BuildStart),zt(nt.CASH_APP,r);try{var i=new kp(r,e);return r.metricsHandler.logEvent(g.BuildOK),i}catch(o){throw r.metricsHandler.logEvent(g.BuildError),o}})()}alipay(e){var n=this;return Ae(function*(){var r=yield n.getPaymentContext(x.Alipay);r.metricsHandler.logEvent(g.BuildStart),zt(nt.ALIPAY,r);try{var i=new vd(r,e);return r.metricsHandler.logEvent(g.BuildOK),i}catch(o){throw r.metricsHandler.logEvent(g.BuildError),o}})()}giftCard(e){var n=this;return Ae(function*(){var r=yield n.getPaymentContext(x.GiftCard);r.metricsHandler.logEvent(g.BuildStart);try{var i=new jp(r,e);return r.metricsHandler.logEvent(g.BuildOK),i}catch(o){throw r.metricsHandler.logEvent(g.BuildError),o}})()}afterpayClearpay(e){var n=this;return Ae(function*(){var r=yield n.getPaymentContext(x.Afterpay);if(r.metricsHandler.logEvent(g.BuildStart),!r.featureFlagHandler.isActive(Q.CanUseBNPLA))throw r.metricsHandler.logEvent(g.BuildError),new Co;zt(nt.AFTERPAY,r),zr(e,r);try{var i=n.getPaymentRequestLock(e),[o,a]=yield Promise.all([hn(Ct.AFTERPAY,It.AFTERPAY,A.AFTERPAY_SCRIPT_URL,()=>{var t;return null===(t=window)||void 0===t?void 0:t.AfterPay}),hn(Ct.AFTERPAY_MESSAGING,It.AFTERPAY_MESSAGING,A.AFTERPAY_MESSAGING_SCRIPT_URL,()=>{var t;return null===(t=window)||void 0===t?void 0:t.Afterpay})]),s=function(t,e,n,r,i){return new Lh(t,e,n,r,i)}(o,a,e,r,i);return yield s.internalSetCheckoutToken(),r.metricsHandler.logEvent(g.BuildOK),s}catch(c){throw r.metricsHandler.logEvent(g.BuildError),c}})()}cashAppPay(e,n){var r=this;return Ae(function*(){var i,o=yield r.getPaymentContext(x.CashAppPayV1);o.metricsHandler.logEvent(g.BuildStart),zt(nt.CASH_APP_PAY_V1,o),zr(e,o);try{i=yield hn(Ct.CASH_APP_PAY,It.CASH_APP_PAY,A.CASH_APP_PAY_SCRIPT_URL,()=>{var t;return null===(t=window)||void 0===t?void 0:t.CashApp})}catch(l){throw o.errorLogger.captureException(l),l}try{if(void 0===i)throw new Y("initializing Cash App Pay");var a=r.getPaymentRequestLock(e),s=A.CASH_APP_PAY_CLIENT_ID,u=function(t,e,n,r,i){return new Uh(t,e,n,r,i)}(yield i.pay({clientId:s}),e,n,o,a);return o.metricsHandler.logEvent(g.BuildOK),u}catch(l){throw o.metricsHandler.logEvent(g.BuildError),l}})()}getPaymentContext(e){var n=this;return Ae(function*(){var{featureFlagValues:r,messenger:i,session:o,paymentMethodSupportDetail:a}=yield n.initializePaymentMethod();o.avt&&n.errorLogger.setAvt(o.avt);var s=xn(),c=new class{constructor(l,d,p,h){this.metricsLogger=l,this.eventSource=p,this.session=d,this.paymentMethodTrackingId=h}logEvent(l,d){var p={event:l,eventSource:this.eventSource};void 0!==d&&(p.eventConfigurationValues=d);var{instanceId:h,sessionId:m,paymentsUIInstanceId:f}=this.session.serialize();return this.metricsLogger.logEvent(p,h,m,this.paymentMethodTrackingId,f)}setPaymentMethodTrackingId(l){this.paymentMethodTrackingId=l}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}}(n.metrics,o,e,s);n.setAnalytics(o),n.contextEventTarget||(n.contextEventTarget=new Zi);var u=new pd(n.errorLogger,i,c,o,a,n.localeStrings,n.contextEventTarget,r);if(n.errorLogger.setFeatureFlagHandler(u.featureFlagHandler),!u.featureFlagHandler.isActive(Q.CanUseWebSDK))throw new cr;return u})()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=qr.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}setAnalytics(e){if(!this.analyticsInterval){var n=this.analyticsInterval=window.setInterval(()=>{qr.initializeAnalytics(e,this.errorLogger,n)},dd);qr.initializeAnalytics(e,this.errorLogger,n)}}getPaymentRequestLock(e){var n=this.paymentRequestLockMap.get(e);if(!n){var r=new Y("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(r),r}return n}}var jh=A.ENABLE_ERROR_LOGGING,Bh=A.env,ko=new Map;window.Square={errors:Sl,payments:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(t,"-").concat(e);if(ko.has(n))return ko.get(n);if(!function Zu(t){return t.hostname.endsWith("localhost")||"https:"===t.protocol}(v.windowLocation))throw new wn;if(!v.isSupported())throw new Rn;!function el(t){if((o=t).length<22||o.length>37||!Xu.test(o)||$u.test(o))throw new In;var o,e=t.match(/^[\w-]{22}$/),n=t.startsWith("sq0idp-"),r=t.startsWith("sandbox-sq0idb"),i=t.startsWith("sq0ids-");if(!(e||n||r||i))throw new In;if(n&&!Ua())throw new ur(D.production,A.env);if(r&&!Ai(D.sandbox))throw new ur(D.sandbox,A.env)}(t);var r=new dl({applicationId:t,applicationUrl:window.location.origin,enableErrorLogging:jh,environment:Bh,sourceName:"web-payments-sdk-public",useGlobalHandlers:!1,version:A.VERSION}),i=v.windowLocation.hostname,a={applicationId:t,hostname:i,locationId:e,sourceUrl:v.windowLocation.origin},s=new td(r,{applicationId:t,hostname:i,locationId:e});s.logEvent({event:g.LoadOK,eventSource:x.App});var c=new Fh(a,s,r);return ko.set(n,c),c}}})()})();